// ==UserScript==
// @name ALE Improvements
// @description Changes to make ALE better.
// @version 27.3
// @author molis, mici1234, wanted2001, gcp5o
// @match *://www.plazmaburst2.com/level_editor/map_edit.php*
// @match *://plazmaburst2.com/level_editor/map_edit.php*
// @connect github.com
// @connect githubusercontent.com
// @downloadURL https://github.com/Molisson/ALEI/raw/main/alei.user.js
// @grant GM.xmlHttpRequest
// @icon https://github.com/Molisson/ALEI/blob/main/icon.png?raw=true
// @run-at document-start
// @updateURL https://github.com/Molisson/ALEI/raw/main/alei.meta.js
// ==/UserScript==

(()=>{var __webpack_modules__={385:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(1601),r=n.n(o),a=n(6314),i=n.n(a)()(r());i.push([e.id,".settings-text {\n    font-size: 12px;\n    margin: 0;\n    margin-bottom: 5px;\n}\n\n.settings-item {\n    display: flex; /*this makes sure that settings labels and buttons don't get extra gap between them from html whitespace due to being inline elements*/\n    margin-bottom: 1px;\n    gap: 4px;\n}\n\n.settings-item--requires-refresh .settings-label {\n    color: #FFFF00;\n}\n\n.settings-label {\n    font-size: 14px;\n    width: 160px;\n    height: 20px;\n    background-color: var(--settings-menu-label-background-color);\n    color: var(--settings-menu-label-color);\n    border-radius: 4px;\n    text-align: center;\n    display: inline-block;\n}\n\n.settings-button {\n    background-color: var(--settings-menu-button-background-color);\n    border: 1px solid var(--settings-menu-button-border-color);\n    color: var(--settings-menu-button-color);\n    border-radius: 5px;\n    width: 80px;\n    height: 20px;\n    font-size: 14px;\n    text-align: center;\n    display: inline-block;\n    padding: 0;\n    white-space: nowrap; /*stop text from wrapping to next line if there isn't enough space*/\n}\n\n.settings-button:hover {\n    background-color: var(--settings-menu-button-hover-background-color);\n    color: var(--settings-menu-button-hover-color);\n}\n\n.settings-button--disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n}\n\n.settings-button--width-auto {\n    width: auto;\n    padding: 0 6px;\n}\n\n.settings-button--toggled {\n    background-color: var(--settings-menu-button-clicked-background-color);\n    color: var(--settings-menu-button-clicked-color);\n}\n\n#alei-tooltip {\n    font-size: 16px;\n    font-family: monospace;\n    color: #eee;\n    background-color: #000;\n    padding: 10px;\n    width: fit-content;\n    border-radius: 4px;\n    word-break: break-all;\n    position: absolute;\n    left: 100px;\n    top: -100px;\n}\n\n#gui-render-info {\n    margin-left: 18px;\n}\n\n.gui-render-info__text {\n    padding: 0;\n    margin: 0;\n    color: var(--gui-render-info-color)\n}\n\n.two-element-grid {\n    display: grid;\n    justify-content: center;\n    grid-template-columns: 50% 50%;\n}\n\n.vertical-gap {\n    height: 20px;\n}\n\n.draggable-window-text {\n    color: var(--draggable-window-text-color);\n\tfont-size: 14px;\n}\n\n.draggable-window-paragraph {\n    margin: 0;\n    margin-bottom: 5px;\n}\n\n/*currently unused*/\n.draggable-window-button {\n    border: 2px solid rgb(177, 177, 177);\n    border-radius: 6px;\n    cursor: pointer;\n    font-size: 12px;\n    background-color: rgb(240, 240, 240);\n    height: 24px;\n    padding: 1px 10px;\n    white-space: nowrap;\n}\n\n.draggable-window-button:hover {\n    background-color: rgb(224, 224, 224);\n}\n\n.draggable-window-button:active {\n    background-color: rgb(212, 212, 212);\n}\n\nhue-slider {\n    --dot-diameter: 14px;\n}\n\ncolor-spectrum {\n    --border-radius: 4px;\n}\n\n.update-button {\n    border: 1px solid var(--update-button-highlight-color);\n    box-shadow: 0 0 8px var(--update-button-highlight-color);\n}\n\n.update-button--seen {\n    transition: border-color 5s, box-shadow 5s;\n    border-color: transparent;\n    box-shadow: none;\n}\n\n/* container for trigger action parameter elements */\n.trigger-action {\n    margin: 2px 0;\n}\n\n.trigger-action--hovered .pa1 {\n    background-color: var(--trigger-action-hovered-color);\n}\n\n.trigger-action--selected .pa1 {\n    background-color: var(--trigger-action-selected-color);\n}\n\n.trigger-action--dragged {\n    filter: brightness(var(--trigger-action-dragged-brightness));\n}\n\n.dragged-item-label {\n    font-size: 12px;\n    color: #ddd;\n    background-color: rgba(0, 0, 0, 0.3);\n    padding: 4px;\n    border-radius: 4px;\n    position: absolute;\n    top: -10px;\n    left: 10px;\n    transform: translate(0, 0);\n    display: none;\n    pointer-events: none;\n    user-select: none;\n}\n\n.dragged-item-label--visible {\n    display: block;\n}\n\n.trigger-action-gap-highlight {\n    height: 2px;\n    background-color: #fff;\n    position: absolute;\n    top: -1px;\n    left: 0px;\n    transform: translate(0, 0);\n    display: none;\n    pointer-events: none;\n}\n\n.trigger-action-gap-highlight--visible {\n    display: block;\n}\n\n.more-info {\n    width: 16px;\n    height: 16px;\n    border-radius: 50%;\n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n    background-color: #7944a1;\n    font-size: 14px;\n}\n\n.more-info::before {\n    content: \"?\";\n    color: #fff;\n}\n\n.more-info:hover {\n    cursor: help;\n}\n\n.highlighted-param .pa1 {\n    animation-duration: 2s;\n    animation-name: paramblink;\n}\n\n/* .mrpopup.drag-over {} */\n\n@keyframes paramblink {\n    0%, 50% {\n        color: orange;\n    }\n}",""]);const s=i},490:(e,t,n)=>{"use strict";n.d(t,{L:()=>i,R:()=>s});var o=n(4168),r=n(7163),a=n(4161);function i(){const e=l;(0,o.IE)("commentAdderButton","alei-comment-adder-button","//+","Add comment above",e,{trigger:{triggerActionsItem:{type:"trigger actions"}}},!1,(e=>!(0,r.oU)(e.selectionData.objs[0],e.actionNum-1)))}function s(){const e=c;(0,o.IE)("commentRemoverButton","alei-comment-remover-button","X","Remove comment",e,{trigger:{".alei-comment-box":{type:"elements"}}},!1)}function l(e){const t=e.selectionData.objs[0],n=e.actionNum-1;(0,r.fL)(t,n,r.E1);const o=document.getElementById("rparams"),i=(0,a.Db)(n);o.insertBefore(i,e.elements[0]),(0,a.Fd)(i)}function c(e){const t=e.selectionData.objs[0],n=e.elements[0].getAttribute("position");(0,r.wI)(t,n),e.elements[0].remove()}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},583:(e,t,n)=>{"use strict";n.d(t,{$:()=>_,D:()=>u});var o=n(3150),r=n(9929),a=n(8050),i=n(3338),s=n(3987),l=n(7218);const c=-1;let d=[];function _(){if(1!==o.sf.length||"trigger"!==o.sf[0]._class)return;if(0===r.Vf.size)return;const e=o.sf[0],t=l.Wx+(e.pm.additionalActions?.length??0),n=(0,r.sH)();let a=[];for(const o of n){if(o<1||o>t){(0,s.Md)(s.dm.WARN,"Attempted to copy an action that doesn't exist on this trigger. selectedActions is somehow invalid.\naction:",o);continue}let n={type:c,targetA:0,targetB:0};if(o<=l.Wx)n.type=e.pm[`actions_${o}_type`],n.targetA=e.pm[`actions_${o}_targetA`],n.targetB=e.pm[`actions_${o}_targetB`];else{const t=o-(l.Wx+1);n.type=e.pm.additionalActions[t],n.targetA=e.pm.additionalParamA[t],n.targetB=e.pm.additionalParamB[t]}a.push(n)}d=a,NewNote("Trigger actions copied to the clipboard.",note_passive),(0,r.EQ)()}function u(){if(1!==o.sf.length||"trigger"!==o.sf[0]._class)return;if(0===r.Vf.size)return;if(0===d.length)return void NewNote("No trigger actions to paste.",note_passive);const e=o.sf[0];let t=(0,i.Q1)(e);const n=t.length,s=(0,r.sH)();if(s.length===d.length)for(let e=s.length-1;e>=0;e--){const n=s[e]-1;t.splice(n,0,d[e])}else{const e=s[0]-1;t.splice(e,0,...d)}for(;t.length>n&&t.at(-1).type==c;)t.pop();if(t.length>n){if(!unsafeWindow.ExtendedTriggersLoaded)return void((0,i.DE)(t)?NewNote("Not enough space in the trigger to paste trigger actions. (only considering empty space at the end of the trigger)",note_passive):NewNote("Not enough space in the trigger to paste trigger actions.",note_passive));{const e=t.length-n;unsafeWindow.addTriggerActionCount(e,!1)}}const l=t.slice(s[0]-1),_=s[0];(0,i.A)(l,_),NewNote("Trigger actions pasted from the clipboard.",note_passive),(0,r.EQ)(),need_GUIParams_update=!0,(0,a.jg)()}},826:(e,t,n)=>{"use strict";n.d(t,{j:()=>s});var o=n(3987);const r=-1,a=99,i=363;function s(){const e=es.filter((e=>e.exists&&"trigger"===e._class));l(e.filter((e=>e.pm.extended&&!e.extendedAndParsed)),e)}function l(e,t){for(const n of e){n.extendedAndParsed=!1;const e=c(n)?10:100;try{const r=d(n,e,t);if((0,o.Md)(o.dm.VERBOSE,"Parsing extended trigger consisting of",[n,...r]),10===e&&r.some((e=>!c(e))))throw new Error("Extended trigger was determined to be 10-action-limited, but parsing this way would've caused loss of data in actions 11-100 of at least one of the extension triggers");const a=_(n,r,e);(0,o.Md)(o.dm.VERBOSE,"Action list:",a),void 0!==n.pm.totalNumOfActions&&u(a,n.pm.totalNumOfActions),m(n,a),g(r),(0,o.Md)(o.dm.VERBOSE,"Parsed extended trigger",n)}catch(e){console.error(e),(0,o.Md)(o.dm.SWARN,`Failed to parse extended trigger ${n.pm.uid}.`),NewNote(`ALEI: Failed to parse extended trigger ${n.pm.uid}.<br>${e.name}: ${e.message}`,note_bad)}}}function c(e){for(let t=100;t>=11;t--)if(e.pm[`actions_${t}_type`]!=r)return!1;return!0}function d(e,t,n){const o=t;let r=e;const s=[],l=new Set;for(;;){const t=r.pm[`actions_${o}_type`];if(!(r===e?t==i||t==a:t==i))break;if(l.has(r))throw new Error(`Reached an infinite loop when parsing extended triggers (at trigger ${r.pm.uid})`);l.add(r);const c=r.pm[`actions_${o}_targetA`],d=n.find((e=>e.pm.uid===c))??null;if(null===d)throw new Error(`Couldn't find extension trigger with uid ${c} (link from trigger ${r.pm.uid})`);s.push(d),r=d}return s}function _(e,t,n){const o=[];for(const r of[e,...t])for(let e=1;e<n;e++)o.push({type:r.pm[`actions_${e}_type`],targetA:r.pm[`actions_${e}_targetA`],targetB:r.pm[`actions_${e}_targetB`]});return o}function u(e,t){for(;e.length>t&&e.at(-1).type===r;)e.pop();for(;e.length<t;)e.push({type:r,targetA:0,targetB:0})}function m(e,t){let n=0;for(let o=1;o<=100;o++){const a=t[n++];e.pm[`actions_${o}_type`]=a?.type??r,e.pm[`actions_${o}_targetA`]=a?.targetA??0,e.pm[`actions_${o}_targetB`]=a?.targetB??0}if(t.length>100){const o=t.length-100;e.pm.additionalActions=new Array(o),e.pm.additionalParamA=new Array(o),e.pm.additionalParamB=new Array(o);for(let r=0;r<o;r++){const{type:o,targetA:a,targetB:i}=t[n++];e.pm.additionalActions[r]=o,e.pm.additionalParamA[r]=a,e.pm.additionalParamB[r]=i}e.pm.totalNumOfActions=t.length,e.pm.extended=!0,e.extendedAndParsed=!0}else(0,o.Md)(o.dm.VERBOSE,"Extended trigger has less than 100 actions, converting to regular trigger"),delete e.pm.additionalActions,delete e.pm.additionalParamA,delete e.pm.additionalParamB,delete e.pm.totalNumOfActions,delete e.pm.extended,delete e.extendedAndParsed}function g(e){for(const t of e){const e=es.indexOf(t);-1!==e&&es.splice(e,1)}}unsafeWindow.parseExtendedTriggers=l},834:()=>{"use strict";const e="undefined"!=typeof unsafeWindow?unsafeWindow:window,t=document.createElement("template");t.innerHTML='\n    <style>\n        :host {\n            --header-background-color: rgb(185, 185, 185);\n            --header-color: #ffffff;\n            --header-button-background-color: hsl(0, 0%, 60%);\n            --header-button-hover-background-color: hsl(0, 0%, 55%);\n            --header-button-active-background-color: hsl(0, 0%, 50%);\n            --header-button-color: #ffffff;\n            --header-button-border-color: #757575;\n            --content-background-color: rgb(235, 235, 235);\n            --shadow-color: #666;\n            --content-width: 400px;\n            --content-height: 300px;\n            position: fixed;\n            border-radius: 4px;\n            box-shadow: 1px 2px 6px var(--shadow-color);\n            z-index: 100;\n            display: block;\n            left: 200px;\n            top: 200px;\n        }\n        \n        .header {\n            background-color: var(--header-background-color);\n            color: var(--header-color);\n            border-bottom: 2px solid rgba(0, 0, 0, 0.1);\n            border-top-left-radius: 4px;\n            border-top-right-radius: 4px;\n            cursor: move;\n            height: 30px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            position: relative;\n        }\n\n        .header-title {\n            font-size: 18px;\n            user-select: none;\n        }\n\n        .header-buttons-container {\n            cursor: default;\n            position: absolute;\n            top: 3px;\n            right: 3px;\n            display: flex;\n            gap: 4px;\n        }\n\n        .header-button {\n            background-color: var(--header-button-background-color);\n            color: var(--header-button-color);\n            border: 2px solid var(--header-button-border-color);\n            font-size: 14px;\n            font-weight: bold;\n            width: 24px;\n            height: 24px;\n            border-radius: 50%;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            cursor: pointer;\n        }\n\n        .header-button:hover {\n            background-color: var(--header-button-hover-background-color);\n        }\n\n        .header-button:active {\n            background-color: var(--header-button-active-background-color);\n        }\n\n        .content-container {\n            max-height: var(--content-height);\n            transition: max-height 0.5s ease;\n        }\n\n        .content-container--collapsed {\n            max-height: 0;\n        }\n\n        .content-container--clipping {\n            overflow: hidden;\n        }\n\n        .content-container--no-transition {\n            transition: none;\n        }\n\n        .content {\n            background-color: var(--content-background-color);\n            padding: 15px;\n            width: var(--content-width);\n            height: var(--content-height);\n            box-sizing: border-box;\n        }\n    </style>\n\n    <div class="header">\n        <div class="header-title"></div>\n        <div class="header-buttons-container">\n            <button class="header-button" data-action="toggle collapse" title="Collapse content">></button>\n            <button class="header-button" data-action="close" title="Close window">X</button>\n        </div>\n    </div>\n    <div class="content-container">\n        <div class="content">\n            <slot name="content"></slot>\n        </div>\n    </div>\n';let n=[];class o extends HTMLElement{headerTitle;collapseButton;contentContainer;contentElement;uncollapseTimeout=null;static observedAttributes=["data-title"];constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(t.content.cloneNode(!0));const n=this.shadowRoot.querySelector(".header");this.collapseButton=n.querySelector('.header-button[data-action="toggle collapse"]');const o=n.querySelector('.header-button[data-action="close"]');this.headerTitle=n.querySelector(".header-title"),this.contentContainer=this.shadowRoot.querySelector(".content-container"),this.contentElement=this.contentContainer.querySelector(".content"),this.collapseButton.addEventListener("click",(()=>this.toggleCollapse())),o.addEventListener("click",(()=>this.closeWindow())),function(t,n){let o,r;function a(a){let i=a.clientX-o,s=a.clientY-r;const l=.5*-t.offsetWidth,c=e.innerWidth-.5*t.offsetWidth,d=e.innerHeight-n.offsetHeight;i=Math.max(l,Math.min(i,c)),s=Math.max(0,Math.min(s,d)),t.style.left=`${i}px`,t.style.top=`${s}px`}function i(e){0===e.button&&(document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",i))}n.addEventListener("mousedown",(function(e){0===e.button&&(o=e.clientX-t.offsetLeft,r=e.clientY-t.offsetTop,document.addEventListener("mousemove",a),document.addEventListener("mouseup",i))}))}(this,n),this.addEventListener("mousedown",(e=>{[0,1].includes(e.button)&&this.moveToFront()}))}connectedCallback(){n.push(this),r()}disconnectedCallback(){const e=n.indexOf(this);n.splice(e,1)}attributeChangedCallback(e,t,n){"data-title"===e&&(this.headerTitle.textContent=n)}setDimensions(e,t){this.contentContainer.classList.add("content-container--no-transition"),this.style.setProperty("--content-width",`${e}px`),this.style.setProperty("--content-height",`${t}px`),this.contentContainer.offsetHeight,this.contentContainer.classList.remove("content-container--no-transition")}toggleCollapse(){this.contentContainer.classList.contains("content-container--collapsed")?(this.contentContainer.classList.remove("content-container--collapsed"),this.uncollapseTimeout=setTimeout((()=>{this.contentContainer.classList.remove("content-container--clipping"),this.uncollapseTimeout=null}),500),this.collapseButton.title="Collapse content"):(this.contentContainer.classList.add("content-container--collapsed","content-container--clipping"),null!==this.uncollapseTimeout&&clearTimeout(this.uncollapseTimeout),this.collapseButton.title="Expand content")}closeWindow(){this.remove(),this.dispatchEvent(new Event("windowclose",{bubbles:!0,composed:!0}))}moveToFront(){const e=n.indexOf(this);n.splice(e,1),n.push(this),r()}}function r(){n.forEach(((e,t)=>{e.style.zIndex=t+100}))}customElements.define("draggable-window",o)},1093:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(4168),r=n(2133),a=n(5022);function i(){const e=s,t=l;(0,o.IE)("openInColorEditorButton","alei-open-in-color-editor-button","🖌️","Open in color editor",e,{bg:{c:{type:"param"}},inf:{forteam:{type:"param"}},trigger:{triggerActionsItem:{type:"trigger actions"}}},!0,t)}function s(e){const t=new r.QL;let n,o;if("triggerActionsItem"==e.item){const r=t.addTriggerActions(e.selectionData.objs,[e.actionNum]);n=r.successCount,o=r.failCount}else{const r=t.addObjects(e.selectionData.objs);n=r.successCount,o=r.failCount}t.updateCategory(),t.updateTitle(),t.updateColor(),(0,a.q)(t),o>0&&NewNote(`Note: ${o} items were excluded for being invalid.`,note_passive)}function l(e){switch(e.selectionData._class){case"bg":return!0;case"inf":for(const t of e.selectionData.objs)if(!["watercolor","acidcolor"].includes(t.pm.mark))return!1;return!0;case"trigger":for(const t of e.selectionData.objs){const n=parseInt(t.pm[`actions_${e.actionNum}_type`]);if(!r.cS.has(n)&&!r.aL.has(n))return!1}return!0}}},1113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},1148:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(1601),r=n.n(o),a=n(6314),i=n.n(a)()(r());i.push([e.id,'.alei-comment-box {\n    background-color: var(--comment-background-color);\n    width: 100%;\n    box-sizing: border-box;\n    border: 2px solid var(--comment-border-color);\n    margin: 2px 0px;\n    padding: 4px;\n    overflow: hidden;\n}\n\n.alei-comment-box__text-element {\n    color: var(--comment-color);\n    font-size: 11px;\n    font-family: "JetBrains Mono Italic", "Liberation Mono", "Courier New", monospace;\n    font-style: italic;\n    line-height: 1.5em;\n}\n\n.alei-comment-box__prefix {\n    width: 20px;\n    float: left;\n    white-space: pre-wrap;\n}\n\n.alei-comment-box__text-area {\n    width: calc(100% - 20px); /* - prefix width*/\n    resize: none;\n    scrollbar-width: none; /*necessary to fix a weird bug with auto resize*/\n    padding: 0;\n    background: none;\n    border: none;\n}\n\n.alei-comment-adder-button {\n    color: var(--comment-adder-button-color);\n}\n\n.alei-comment-remover-button {\n    color: var(--comment-remover-button-color);\n}',""]);const s=i},1271:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{CK:()=>initTheme,dp:()=>aleiThemesCount,o9:()=>replaceThemeSet,pI:()=>patchSaveBrowserSettings,sK:()=>themeNames});var _log_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3987),_storage_storageutils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1329);const themes={0:"blue-theme",1:"dark-theme",2:"purple-theme",3:"green-theme",4:"alei-dark-theme",5:"alei-sage-theme",6:"alei-oeda-theme",7:"alei-crossfire-theme"},themeNames={0:"Blue",1:"Dark",2:"Purple",3:"Green",4:"Black",5:"Sage",6:"OEDA",7:"CF"},aleiThemesCount=4;function replaceThemeSet(){unsafeWindow.ThemeSet=function(e){const t=themes[THEME],n=themes[e];document.body.classList.remove(t),document.body.classList.add(n),THEME=e,need_redraw=!0,UpdateTools(),SaveBrowserSettings(),storeAleiTheme(e)}}function patchSaveBrowserSettings(){const originalCode=unsafeWindow.SaveBrowserSettings.toString(),newCode=originalCode.replace(/localStorage.setItem\(\s*(?<quote>['"`])THEME\k<quote>\s*,\s*THEME\s*\);?/,'localStorage.setItem("THEME", THEME); if (THEME > 3) { localStorage.setItem("THEME", 0); }');originalCode===newCode?(0,_log_js__WEBPACK_IMPORTED_MODULE_0__.Md)(_log_js__WEBPACK_IMPORTED_MODULE_0__.dm.WARN,"SaveBrowserSettings direct code replacement failed (themes)"):unsafeWindow.SaveBrowserSettings=eval(`(${newCode})`)}function initTheme(){document.adoptedStyleSheets=[];const e=takeAleiThemeFromStorage();null!==e&&(THEME=e),ThemeSet(THEME)}function storeAleiTheme(e){(0,_storage_storageutils_js__WEBPACK_IMPORTED_MODULE_1__.P)("ALEI_Theme",e)}function takeAleiThemeFromStorage(){return(0,_storage_storageutils_js__WEBPACK_IMPORTED_MODULE_1__.G)("ALEI_Theme",null,parseInt)}},1329:(e,t,n)=>{"use strict";function o(e,t,n){return void 0===localStorage[e]?t:n(localStorage[e])}function r(e,t){try{localStorage[e]=t}catch(e){NewNote("ALEI: There was some issue trying to save into storage. You might need to clear your datas.",note_bad),console.error(e)}}n.d(t,{G:()=>o,P:()=>r})},1601:e=>{"use strict";e.exports=function(e){return e[1]}},1785:e=>{e.exports="precision mediump float;\r\n\r\nattribute vec2 in_position;\r\nvarying vec2 vertex_position;\r\n\r\nvoid main() {\r\n    vertex_position = in_position;\r\n    gl_Position = vec4(in_position, 0.0, 1.0);\r\n}"},1869:(e,t,n)=>{"use strict";n.d(t,{v:()=>r});var o=n(5740);function r(e,t){const n=(0,o.Cb)(e);n?.classList.toggle("trigger-action--hovered",t)}},2123:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(1601),r=n.n(o),a=n(6314),i=n.n(a)()(r());i.push([e.id,"/* set the css variables for the css stuff that comes from vanilla ale */\n\n:root, blue-theme {\n    --body-td-th-color: rgb(255, 255, 255);\n\n    --objbox-background-color: rgb(38, 53, 74);\n\n    --selline1-background-color: rgb(60, 80, 110);\n\n    --blnk-0-background-color: rgb(117, 157, 215);\n    --blnk-100-background-color: rgb(88, 118, 162);\n\n    --selline0bl-background-color: rgb(88, 118, 162);\n\n    --topui-background-color: rgb(62, 88, 123);\n    --topui-background-image: url(htile.gif);\n\n    --leftui-background-color: rgb(46, 64, 90);\n    --leftui-border-right-color: rgb(21, 46, 78);\n    --leftui-background-image: url(vti.gif);\n\n    --rightui-background-color: rgb(46, 64, 90);\n    --rightui-border-left-color: rgb(21, 46, 78);\n    --rightui-background-image: url(vti.gif);\n\n    --field_dis_left-background-color: rgb(71, 96, 130);\n    --field_dis_left-color: rgb(116, 143, 181);\n\n    --field_dis_right-background-color: rgb(82, 108, 144);\n    --field_dis_right-color: rgb(173, 198, 232);\n\n    --field_btn-background-color: rgb(46, 64, 90);\n    --field_btn-color: rgb(173, 198, 232);\n\n    --field_btn-hover-background-color: rgb(38, 54, 77);\n    --field_btn-hover-color: rgb(221, 235, 255);\n\n    --field_btn-active-background-color: rgb(21, 30, 44);\n    --field_btn-active-color: rgb(250, 244, 152);\n\n    --tool_btn-border-color: rgb(38, 53, 74);\n    --tool_btn-background-color: rgb(38, 53, 74);\n    --tool_btn-color: rgb(173, 198, 232);\n\n    --tool_btn-hover-background-color: rgb(32, 45, 63);\n    --tool_btn-hover-color: rgb(221, 235, 255);\n    --tool_btn-hover-border-color: rgb(32, 45, 63);\n\n    --tool_btn-active-background-color: rgb(25, 35, 48);\n    --tool_btn-active-color: rgb(250, 244, 152);\n    --tool_btn-active-border-color: rgb(25, 35, 48);\n\n    --tool_btn2-border-color: rgb(104, 135, 180);\n    --tool_btn2-background-color: rgb(65, 91, 128);\n    --tool_btn2-color: rgb(173, 198, 232);\n\n    --tool_btn2-hover-background-color: rgb(65, 91, 128);\n    --tool_btn2-hover-color: rgb(221, 235, 255);\n    --tool_btn2-hover-border-color: rgb(104, 135, 180);\n\n    --tool_btn2-active-background-color: rgb(65, 91, 128);\n    --tool_btn2-active-color: rgb(250, 244, 152);\n    --tool_btn2-active-border-color: rgb(104, 135, 180);\n\n    --c-color: rgba(173, 198, 232, 0.8);\n\n    --p_u1-border-bottom-color: rgb(52, 70, 96);\n\n    --p_u2-border-bottom-color: rgb(64, 87, 122);\n\n    --pa1-color: rgb(129, 156, 192);\n    --pa1-background-color: rgb(60, 80, 110);\n\n    --pa2-color: rgb(173, 198, 232);\n    --pa2-background-color: rgb(74, 100, 137);\n\n    --pa2-hover-background-color: rgb(80, 109, 149);\n\n    --pa2edit-color: rgb(255, 255, 255);\n    --pa2edit-background-color: rgb(74, 115, 114);\n    --pa2edit-border-color: rgb(0, 0, 0);\n\n    --opcode_field-color: rgb(255, 255, 255);\n    --opcode_field-background-color: rgb(0, 0, 0);\n    --opcode_field-border-color: rgb(0, 0, 0);\n\n    --gui_sel_info-color: rgb(94, 118, 152);\n\n    --parambox-background-color: rgba(0, 0, 0, 0.8);\n    --parambox-border-color: rgb(0, 0, 0);\n\n    --paramactive-link-visited-background-color: rgba(100, 150, 255, 0.4);\n    --paramactive-link-visited-color: rgb(255, 255, 255);\n\n    --paramactive-hover-background-color: rgba(100, 150, 255, 0.7);\n\n    --paramactive-active-background-color: rgba(100, 150, 255, 0.7);\n\n    --paraminbox-link-visited-background-color: rgba(144, 255, 0, 0);\n    --paraminbox-link-visited-color: rgb(255, 255, 255);\n\n    --paraminbox-hover-background-color: rgba(144, 255, 0, 0.4);\n\n    --paraminbox-active-background-color: rgba(144, 255, 0, 0.7);\n\n    --webkit-scrollbar-track-color: rgba(0, 0, 0, 0.2);\n\n    --webkit-scrollbar-thumb-color: rgb(112, 136, 172);\n\n    --scrollbar-color-thumb: rgb(76, 96, 125);\n    --scrollbar-color-track: rgb(43, 58, 79);\n\n    --notediv-background-color: rgba(0, 0, 0, 0.8);\n\n    --notediv_term_strict-background-color: rgba(150, 0, 0, 0.8);\n\n    --notediv_term_nonstrict-background-color: rgba(0, 0, 0, 0.8);\n\n    --error-color: rgb(255, 119, 119);\n    --error-text-shadow-color: rgb(255, 0, 0);\n\n    --mrdimlights-background-color: rgba(0, 0, 0, 0.8);\n\n    --mrtitle-background-color: rgb(97, 124, 164);\n\n    --closebox-background-color: rgb(128, 155, 195);\n    --closebox-color: black;\n\n    --mrbox-background-color: rgb(62, 88, 123);\n\n    --field_input-background-color: rgb(46, 64, 90);\n    --field_input-color: rgb(173, 198, 232);\n\n    --btn-background-color: rgb(46, 64, 90);\n    --btn-color: rgb(173, 198, 232);\n\n    --btn-hover-background-color: rgb(38, 54, 77);\n    --btn-hover-color: rgb(221, 235, 255);\n\n    --btn-active-background-color: rgb(21, 30, 44);\n    --btn-active-color: rgb(250, 244, 152);\n\n    --game_overlay-background-color: rgba(0, 0, 0, 0.8);\n\n    --a-basic-link-visited-color: rgb(117, 227, 255);\n\n    --a-basic-hover-color: rgb(255, 255, 255);\n\n    --a-basic-active-color: rgb(255, 255, 255);\n\n    --mobile_panel-background-color: rgba(0, 0, 0, 0.39);\n\n    --mobile_btn-background-color: rgb(27, 39, 57);\n    --mobile_btn-color: white;\n    --mobile_btn-border-color: rgb(0, 0, 0);\n\n    --mobile_btn-active-btn2-background-color: white;\n    --mobile_btn-active-btn2-color: black;\n    --mobile_btn-active-btn2-border-color: rgb(0, 0, 0);\n\n    --img_option-border-color: black;\n    --img_option-background-color: rgba(255, 255, 255, 0.1);\n\n    --img_option_selected-background-color: rgba(100, 100, 255, 0.5);\n\n    --img_option-hover-background-color: rgba(200, 255, 200, 0.5);\n    --img_option-hover-color: rgb(0, 0, 0);\n\n    --img_option-active-background-color: rgba(0, 0, 0, 0.1);\n    --img_option-active-color: rgb(255, 255, 255);\n\n    --img_option-div-imgdiv-background-color: rgba(0, 0, 0, 0.5) !important; /*!important is eric's not mine*/\n\n    --list_group-background-color: rgba(103, 132, 185, 0.42);\n    --list_group-border-bottom-color: rgb(36, 50, 68);\n\n    --list_mod-background-color: rgb(101, 132, 52);\n\n    --list_group-hover-background-color: rgba(146, 185, 255, 0.42);\n\n    --list_group-active-background-color: rgba(28, 36, 49, 0.42);\n\n    --image_list_collapsable-background-color: rgba(143, 167, 210, 0.22);\n\n    --image_context-background-color: rgb(255, 255, 255);\n    --image_context-border-color: rgb(140, 140, 140);\n\n    --image_context-div-color: rgb(0, 0, 0);\n\n    --image_context-div-hover-color: rgb(0, 0, 0);\n    --image_context-div-hover-background-color: rgb(221, 221, 221);\n\n    --image_context-div-active-color: rgb(221, 221, 221);\n    --image_context-div-active-background-color: rgb(51, 51, 51);\n\n    --user_link-link-visited-color: rgb(255, 204, 0);\n\n    --user_link-hover-color: rgb(255, 227, 117);\n\n    --user_link-active-color: rgb(255, 255, 255);\n\n    --search_bar-background-color: rgb(17, 17, 17);\n\n    --search_bar-input-background-color: rgb(51, 51, 51);\n    --search_bar-input-color: white;\n\n    --search_bar-input-text-background-color: rgb(34, 34, 34);\n\n    --search_bar-input-button-hover-background-color: rgb(51, 51, 102);\n\n    --search_bar-input-button-active-background-color: rgb(17, 17, 17);\n\n    --lin2b-color: rgb(188, 190, 195);\n    --lin2b-background-color: rgb(44, 52, 68);\n    --lin2b-border-color: rgb(66, 79, 104);\n\n    --lin2b-hover-color: rgb(255, 255, 255);\n    --lin2b-hover-background-color: rgb(55, 67, 92);\n    --lin2b-hover-border-color: rgb(89, 110, 149);\n\n    --lin2b-focus-active-border-color: rgb(95, 137, 227);\n    --lin2b-focus-active-background-color: rgb(34, 54, 102);\n    --lin2b-focus-active-color: rgb(255, 255, 255);\n}\n\n.dark-theme, .purple-theme, .green-theme {\n    --body-td-th-color: rgb(200, 200, 200);\n\n    --objbox-background-color: rgb(20, 20, 20);\n\n    --selline1-background-color: rgb(37, 37, 37);\n\n    --blnk-0-background-color: rgb(102, 102, 102);\n    --blnk-100-background-color: rgb(66, 66, 66);\n\n    --selline0bl-background-color: rgb(66, 66, 66);\n\n    --topui-background-color: rgb(42, 42, 42);\n    --topui-background-image: url(htile_dark.gif);\n\n    --leftui-background-color: rgb(26, 26, 26);\n    --leftui-border-right-color: rgb(16, 16, 16);\n    --leftui-background-image: url(vti_dark.gif);\n\n    --rightui-background-color: rgb(26, 26, 26);\n    --rightui-border-left-color: rgb(16, 16, 16);\n    --rightui-background-image: url(vti_dark.gif);\n\n    --field_dis_left-background-color: rgb(48, 48, 48);\n    --field_dis_left-color: rgb(87, 87, 87);\n\n    --field_dis_right-background-color: rgb(57, 57, 57);\n    --field_dis_right-color: rgb(139, 139, 139);\n\n    --field_btn-background-color: rgb(26, 26, 26);\n    --field_btn-color: rgb(139, 139, 139);\n\n    --field_btn-hover-background-color: rgb(20, 20, 20);\n    --field_btn-hover-color: rgb(179, 179, 179);\n\n    --field_btn-active-background-color: rgb(8, 8, 8);\n    --field_btn-active-color: rgb(155, 155, 155);\n\n    --tool_btn-border-color: rgb(20, 20, 20);\n    --tool_btn-background-color: rgb(20, 20, 20);\n    --tool_btn-color: rgb(139, 139, 139);\n\n    --tool_btn-hover-background-color: rgb(15, 15, 15);\n    --tool_btn-hover-color: rgb(179, 179, 179);\n    --tool_btn-hover-border-color: rgb(135, 108, 54);\n\n    --tool_btn-active-background-color: rgb(10, 10, 10);\n    --tool_btn-active-color: rgb(155, 155, 155);\n    --tool_btn-active-border-color: rgb(132, 106, 53);\n\n    --tool_btn2-border-color: rgb(81, 81, 81);\n    --tool_btn2-background-color: rgb(45, 45, 45);\n    --tool_btn2-color: rgb(139, 139, 139);\n\n    --tool_btn2-hover-background-color: rgb(45, 45, 45);\n    --tool_btn2-hover-color: rgb(179, 179, 179);\n    --tool_btn2-hover-border-color: rgb(168, 134, 67);\n\n    --tool_btn2-active-background-color: rgb(45, 45, 45);\n    --tool_btn2-active-color: rgb(155, 155, 155);\n    --tool_btn2-active-border-color: rgb(168, 134, 67);\n\n    --c-color: rgba(139, 139, 139, 0.8);\n\n    --p_u1-border-bottom-color: rgb(30, 30, 30);\n\n    --p_u2-border-bottom-color: rgb(42, 42, 42);\n\n    --pa1-color: rgb(98, 98, 98);\n    --pa1-background-color: rgb(37, 37, 37);\n\n    --pa2-color: rgb(139, 139, 139);\n    --pa2-background-color: rgb(51, 51, 51);\n\n    --pa2-hover-background-color: rgb(58, 58, 58);\n\n    --pa2edit-color: rgb(200, 200, 200);\n    --pa2edit-background-color: rgb(49, 49, 49);\n    --pa2edit-border-color: rgb(0, 0, 0);\n\n    --opcode_field-color: rgb(200, 200, 200);\n    --opcode_field-background-color: rgb(0, 0, 0);\n    --opcode_field-border-color: rgb(0, 0, 0);\n\n    --gui_sel_info-color: rgb(65, 65, 65);\n\n    --parambox-background-color: rgba(0, 0, 0, 0.8);\n    --parambox-border-color: rgb(0, 0, 0);\n\n    --paramactive-link-visited-background-color: rgba(107, 107, 107, 0.4);\n    --paramactive-link-visited-color: rgb(200, 200, 200);\n\n    --paramactive-hover-background-color: rgba(107, 107, 107, 0.7);\n\n    --paramactive-active-background-color: rgba(107, 107, 107, 0.7);\n\n    --paraminbox-link-visited-background-color: rgba(75, 75, 75, 0);\n    --paraminbox-link-visited-color: rgb(200, 200, 200);\n\n    --paraminbox-hover-background-color: rgba(75, 75, 75, 0.4);\n\n    --paraminbox-active-background-color: rgba(75, 75, 75, 0.7);\n\n    --webkit-scrollbar-track-color: rgba(0, 0, 0, 0.2);\n\n    --webkit-scrollbar-thumb-color: rgb(81, 81, 81);\n\n    --scrollbar-color-thumb: rgb(48, 48, 48);\n    --scrollbar-color-track: rgb(22, 22, 22);\n\n    --notediv-background-color: rgba(0, 0, 0, 0.8);\n\n    --notediv_term_strict-background-color: rgba(17, 17, 17, 0.8);\n\n    --notediv_term_nonstrict-background-color: rgba(0, 0, 0, 0.8);\n\n    --error-color: rgb(255, 119, 119); /*rgb(103, 103, 103);*/\n    --error-text-shadow-color: rgb(255, 0, 0); /*rgb(38, 38, 38);*/\n\n    --mrdimlights-background-color: rgba(0, 0, 0, 0.8);\n\n    --mrtitle-background-color: rgb(71, 71, 71);\n\n    --closebox-background-color: rgb(98, 98, 98);\n    --closebox-color: black;\n\n    --mrbox-background-color: rgb(42, 42, 42);\n\n    --field_input-background-color: rgb(26, 26, 26);\n    --field_input-color: rgb(139, 139, 139);\n\n    --btn-background-color: rgb(26, 26, 26);\n    --btn-color: rgb(139, 139, 139);\n\n    --btn-hover-background-color: rgb(20, 20, 20);\n    --btn-hover-color: rgb(179, 179, 179);\n\n    --btn-active-background-color: rgb(8, 8, 8);\n    --btn-active-color: rgb(155, 155, 155);\n\n    --game_overlay-background-color: rgba(0, 0, 0, 0.8);\n\n    --a-basic-link-visited-color: rgb(138, 138, 138);\n\n    --a-basic-hover-color: rgb(200, 200, 200);\n\n    --a-basic-active-color: rgb(200, 200, 200);\n\n    --mobile_panel-background-color: rgba(0, 0, 0, 0.39);\n\n    --mobile_btn-background-color: rgb(12, 12, 12);\n    --mobile_btn-color: white;\n    --mobile_btn-border-color: rgb(0, 0, 0);\n\n    --mobile_btn-active-btn2-background-color: white;\n    --mobile_btn-active-btn2-color: black;\n    --mobile_btn-active-btn2-border-color: rgb(127, 102, 51);\n\n    --img_option-border-color: black;\n    --img_option-background-color: rgba(200, 200, 200, 0.1);\n\n    --img_option_selected-background-color: rgba(91, 91, 91, 0.5);\n\n    --img_option-hover-background-color: rgba(158, 158, 158, 0.5);\n    --img_option-hover-color: rgb(0, 0, 0);\n\n    --img_option-active-background-color: rgba(0, 0, 0, 0.1);\n    --img_option-active-color: rgb(200, 200, 200);\n\n    --img_option-div-imgdiv-background-color: rgba(0, 0, 0, 0.5) !important;\n\n    --list_group-background-color: rgba(81, 81, 81, 0.42);\n    --list_group-border-bottom-color: rgb(18, 18, 18);\n\n    --list_mod-background-color: rgb(45, 45, 45);\n\n    --list_group-hover-background-color: rgba(134, 134, 134, 0.42);\n\n    --list_group-active-background-color: rgba(11, 11, 11, 0.42);\n\n    --image_list_collapsable-background-color: rgba(112, 112, 112, 0.22);\n\n    --image_context-background-color: rgb(200, 200, 200);\n    --image_context-border-color: rgb(81, 81, 81);\n\n    --image_context-div-color: rgb(0, 0, 0);\n\n    --image_context-div-hover-color: rgb(0, 0, 0);\n    --image_context-div-hover-background-color: rgb(161, 161, 161);\n\n    --image_context-div-active-color: rgb(161, 161, 161);\n    --image_context-div-active-background-color: rgb(17, 17, 17);\n\n    --user_link-link-visited-color: rgb(92, 92, 92);\n\n    --user_link-hover-color: rgb(138, 138, 138);\n\n    --user_link-active-color: rgb(200, 200, 200);\n\n    --search_bar-background-color: rgb(3, 3, 3);\n\n    --search_bar-input-background-color: rgb(17, 17, 17);\n    --search_bar-input-color: white;\n\n    --search_bar-input-text-background-color: rgb(9, 9, 9);\n\n    --search_bar-input-button-hover-background-color: rgb(27, 27, 27);\n\n    --search_bar-input-button-active-background-color: rgb(3, 3, 3);\n\n    --lin2b-color: rgb(129, 129, 129);\n    --lin2b-background-color: rgb(19, 19, 19);\n    --lin2b-border-color: rgb(37, 37, 37);\n\n    --lin2b-hover-color: rgb(200, 200, 200);\n    --lin2b-hover-background-color: rgb(29, 29, 29);\n    --lin2b-hover-border-color: rgb(158, 126, 63);\n\n    --lin2b-focus-active-border-color: rgb(173, 139, 69);\n    --lin2b-focus-active-background-color: rgb(24, 24, 24);\n    --lin2b-focus-active-color: rgb(200, 200, 200);\n}\n\n.alei-dark-theme {\n    --c-color: #FFFFFF20;\n\n    --topui-background-image: none;\n    --leftui-background-image: none;\n    --rightui-background-image: none;\n    --topui-background-color: #0A0A0A;\n    --leftui-background-color: #0A0A0A;\n    --rightui-background-color: #0A0A0A;\n\n    --field_btn-background-color: #1E1E1E;\n    --field_btn-color: #FFFFFFD0;\n    --field_btn-hover-background-color: #353535;\n    --field_btn-hover-color: #FFFFFFD0;\n    --field_btn-active-background-color: #151515;\n    --field_btn-active-color: #CCC;\n\n    --field_dis_left-background-color: #1E1E1E;\n    --field_dis_left-color: #FFFFFFD0;\n    --field_dis_right-background-color: #131313;\n    --field_dis_right-color: #FFFFFFD0;\n\n    --tool_btn-background-color: #1E1E1E;\n    --tool_btn-border-color: transparent;\n    --tool_btn-color: #FFFFFFD0;\n    --tool_btn-hover-background-color: #5f8dd3;\n    --tool_btn-hover-border-color: #FFFFFF20;\n    --tool_btn-active-background-color: #151515;\n    --tool_btn-active-border-color: #FFFFFF20;\n    --tool_btn-active-color: #FFFFFFD0;\n    --tool_btn2-background-color: #4566AB;\n    --tool_btn2-border-color: #FFFFFF20;\n    --tool_btn2-color: #FFFFFFD0;\n    --tool_btn2-hover-background-color: #5077C4;\n    --tool_btn2-hover-border-color: #FFFFFF20;\n    --tool_btn2-hover-color: #FFFFFFD0;\n    --tool_btn2-active-background-color: #39558C;\n    --tool_btn2-active-border-color: #FFFFFF20;\n    --tool_btn2-active-color: #FFFFFFD0;\n\n    --gui_sel_info-color: #FFFFFFD0;\n\n    --pa1-background-color: #101010;\n    --pa1-color: #FFFFFF66;\n    --pa2-background-color: #1B1B1B;\n    --pa2-color: #FFFFFFD0;\n    --pa2-hover-background-color: #5077C4;\n    --p_u1-border-bottom-color: transparent;\n    --p_u2-border-bottom-color: transparent;\n\n    --selline1-background-color: #7A1314;\n    --objbox-background-color: #131313;\n    \n    --mrtitle-background-color: #1E1E1E;\n    --mrbox-background-color: #0A0A0A;\n    --field_input-background-color: #131313;\n    --field_input-color: #CCC;\n    --btn-background-color: #1E1E1E;\n    --btn-color: #CCC;\n    --btn-hover-background-color: #353535;\n    --btn-hover-color: #CCC;\n    --btn-active-background-color: #151515;\n    --btn-active-color: #CCC;\n\n    --closebox-background-color: #353535;\n    --closebox-color: #CCC;\n    --list_group-background-color: #1E1E1E;\n    --list_group-border-bottom-color: transparent;\n    --list_group-hover-background-color: #353535;\n    --list_group-active-background-color: #0A0A0A;\n    --image_list_collapsable-background-color: #0A0A0A;\n    --img_option_selected-background-color: #4566AB40;\n    --rightui-border-left-color: transparent;\n    --leftui-border-right-color: transparent;\n    --webkit-scrollbar-thumb-color: #444;\n    --scrollbar-color-thumb: #444;\n    --scrollbar-color-track: rgba(0, 0, 0, 0.2);\n}\n\n.alei-sage-theme {\n    --c-color: #FFFFFF20;\n\n    --topui-background-image: none;\n    --leftui-background-image: none;\n    --rightui-background-image: none;\n    --topui-background-color: #0A0A0A;\n    --leftui-background-color: #0A0A0A;\n    --rightui-background-color: #0A0A0A;\n\n    --field_btn-background-color: #1E1E1E;\n    --field_btn-color: #FFFFFFD0;\n    --field_btn-hover-background-color: #353535;\n    --field_btn-hover-color: #FFFFFFD0;\n    --field_btn-active-background-color: #151515;\n    --field_btn-active-color: #CCC;\n\n    --field_dis_left-background-color: #1E1E1E;\n    --field_dis_left-color: #FFFFFFD0;\n    --field_dis_right-background-color: #131313;\n    --field_dis_right-color: #FFFFFFD0;\n\n    --tool_btn-background-color: #1E1E1E;\n    --tool_btn-border-color: transparent;\n    --tool_btn-color: #FFFFFFD0;\n    --tool_btn-hover-background-color: #77af68;\n    --tool_btn-hover-border-color: #FFFFFF20;\n    --tool_btn-hover-color: #FFFFFFD0;\n    --tool_btn-active-background-color: #151515;\n    --tool_btn-active-border-color: #FFFFFF20;\n    --tool_btn-active-color: #FFFFFFD0;\n    --tool_btn2-background-color: #517e45;\n    --tool_btn2-border-color: #FFFFFF20;\n    --tool_btn2-color: #FFFFFFD0;\n    --tool_btn2-hover-background-color: #5f9451;\n    --tool_btn2-hover-border-color: #FFFFFF20;\n    --tool_btn2-hover-color: #FFFFFFD0;\n    --tool_btn2-active-background-color: #3d6132;\n    --tool_btn2-active-border-color: #FFFFFF20;\n    --tool_btn2-active-color: #FFFFFFD0;\n\n    --gui_sel_info-color: #FFFFFFD0;\n\n    --pa1-background-color: #101010;\n    --pa1-color: #FFFFFF66;\n    --pa2-background-color: #1B1B1B;\n    --pa2-color: #FFFFFFD0;\n    --pa2-hover-background-color: #517e45;\n    --p_u1-border-bottom-color: transparent;\n    --p_u2-border-bottom-color: transparent;\n\n    --selline1-background-color: #5f9451;\n    --objbox-background-color: #131313;\n\n    --mrtitle-background-color: #1E1E1E;\n    --mrbox-background-color: #0A0A0A;\n    --field_input-background-color: #131313;\n    --field_input-color: #CCC;\n    --btn-background-color: #1E1E1E;\n    --btn-color: #CCC;\n    --btn-hover-background-color: #353535;\n    --btn-hover-color: #CCC;\n    --btn-active-background-color: #151515;\n    --btn-active-color: #CCC;\n\n    --closebox-background-color: #353535;\n    --closebox-color: #CCC;\n    --list_group-background-color: #1E1E1E;\n    --list_group-border-bottom-color: transparent;\n    --list_group-hover-background-color: #353535;\n    --list_group-active-background-color: #0A0A0A;\n    --image_list_collapsable-background-color: #0A0A0A;\n    --img_option_selected-background-color: #4566AB40;\n    --rightui-border-left-color: transparent;\n    --leftui-border-right-color: transparent;\n    --webkit-scrollbar-thumb-color: #444;\n    --scrollbar-color-thumb: #444;\n    --scrollbar-color-track: rgba(0, 0, 0, 0.2);\n}\n\n.alei-oeda-theme {\n    --c-color: #FFFFFF20;\n\n    --topui-background-image: none;\n    --leftui-background-image: none;\n    --rightui-background-image: none;\n    --topui-background-color: #0A0A0A;\n    --leftui-background-color: #0A0A0A;\n    --rightui-background-color: #0A0A0A;\n\n    --field_btn-background-color: #1E1E1E;\n    --field_btn-color: #FFFFFFD0;\n    --field_btn-hover-background-color: #353535;\n    --field_btn-hover-color: #FFFFFFD0;\n    --field_btn-active-background-color: #151515;\n    --field_btn-active-color: #CCC;\n\n    --field_dis_left-background-color: #1E1E1E;\n    --field_dis_left-color: #FFFFFFD0;\n    --field_dis_right-background-color: #131313;\n    --field_dis_right-color: #FFFFFFD0;\n\n    --tool_btn-background-color: #1E1E1E;\n    --tool_btn-border-color: transparent;\n    --tool_btn-color: #FFFFFFD0;\n    --tool_btn-hover-background-color: #dc9be2a0;\n    --tool_btn-hover-border-color: #FFFFFF60;\n    --tool_btn-active-background-color: #151515;\n    --tool_btn-active-border-color: #FFFFFF20;\n    --tool_btn-active-color: #FFFFFFD0;\n    --tool_btn2-background-color: #d295d8;\n    --tool_btn2-border-color: #FFFFFF20;\n    --tool_btn2-color: #FFFFFFD0;\n    --tool_btn2-hover-background-color: #e1aae6;\n    --tool_btn2-hover-border-color: #FFFFFFa0;\n    --tool_btn2-hover-color: #FFFFFFD0;\n    --tool_btn2-active-background-color: #dc9be2c0;\n    --tool_btn2-active-border-color: #FFFFFFc0;\n    --tool_btn2-active-color: #FFFFFFD0;\n\n    --gui_sel_info-color: #FFFFFFD0;\n\n    --pa1-background-color: #101010;\n    --pa1-color: #FFFFFF66;\n    --pa2-background-color: #1B1B1B;\n    --pa2-color: #FFFFFFD0;\n    --pa2-hover-background-color: #81b3d4;\n    --p_u1-border-bottom-color: transparent;\n    --p_u2-border-bottom-color: transparent;\n\n    --selline1-background-color: #81b3d4;\n    --objbox-background-color: #131313;\n    \n    --mrtitle-background-color: #1E1E1E;\n    --mrbox-background-color: #0A0A0A;\n    --field_input-background-color: #131313;\n    --field_input-color: #CCC;\n    --btn-background-color: #1E1E1E;\n    --btn-color: #CCC;\n    --btn-hover-background-color: #353535;\n    --btn-hover-color: #CCC;\n    --btn-active-background-color: #151515;\n    --btn-active-color: #CCC;\n\n    --closebox-background-color: #353535;\n    --closebox-color: #CCC;\n    --list_group-background-color: #1E1E1E;\n    --list_group-border-bottom-color: transparent;\n    --list_group-hover-background-color: #353535;\n    --list_group-active-background-color: #0A0A0A;\n    --image_list_collapsable-background-color: #0A0A0A;\n    --img_option_selected-background-color: #4566AB40;\n    --rightui-border-left-color: transparent;\n    --leftui-border-right-color: transparent;\n    --webkit-scrollbar-thumb-color: #444;\n    --scrollbar-color-thumb: #777;\n    --scrollbar-color-track: rgba(0, 0, 0, 0.2);\n}\n\n.alei-crossfire-theme {\n    --c-color: #262a2e;\n\n    --topui-background-image: none;\n    --leftui-background-image: none;\n    --rightui-background-image: none;\n    --topui-background-color: #0f1113;\n    --leftui-background-color: #191c1f;\n    --rightui-background-color: #191c1f;\n\n    --field_btn-background-color: #262a2e;\n    --field_btn-color: #FFFFFFD0;\n    --field_btn-hover-background-color: #373c41;\n    --field_btn-hover-color: #FFFFFFD0;\n    --field_btn-active-background-color: #0a0b0c;\n    --field_btn-active-color: #CCC;\n\n    --field_dis_left-background-color: #262a2e;\n    --field_dis_left-color: #FFFFFFD0;\n    --field_dis_right-background-color: #191c1f;\n    --field_dis_right-color: #FFFFFFD0;\n\n    --tool_btn-background-color: #0f1113;\n    --tool_btn-border-color: #93FD9840;\n    --tool_btn-color: #FFFFFFD0;\n    --tool_btn-hover-background-color: #5ba35e40;\n    --tool_btn-hover-border-color: #5ba35e60;\n    --tool_btn-hover-color: #FFFFFFD0;\n    --tool_btn-active-background-color: #0a0b0c;\n    --tool_btn-active-border-color: #93FD98;\n    --tool_btn-active-color: #FFFFFFD0;\n    --tool_btn2-background-color: #5ba35e;\n    --tool_btn2-border-color: #93FD98;\n    --tool_btn2-hover-background-color: #48864a;\n    --tool_btn2-hover-border-color: #adffb1;\n    --tool_btn2-hover-color: #FFFFFFD0;\n    --tool_btn2-active-background-color: #48864a80;\n    --tool_btn2-active-border-color: #93FD98;\n    --tool_btn2-active-color: #FFFFFFD0;\n    --tool_btn2-color: #FFFFFFD0;\n\n    --gui_sel_info-color: #FFFFFFD0;\n\n    --pa1-background-color: #0f1113;\n    --pa1-color: #FFFFFF90;\n    --pa2-background-color: #0a0b0c;\n    --pa2-color: #FFFFFFD0;\n    --p_u1-border-bottom-color: transparent;\n    --p_u2-border-bottom-color: transparent;\n\n    --selline1-background-color: #5ba35e;\n    --objbox-background-color: #0f1113;\n\n    --mrtitle-background-color: #0f1113;\n    --mrbox-background-color: #191c1f;\n    --field_input-background-color: #0a0b0c;\n    --field_input-color: #CCC;\n    --btn-background-color: #262a2e;\n    --btn-color: #CCC;\n    --btn-hover-background-color: #373c41;\n    --btn-hover-color: #CCC;\n    --btn-active-background-color: #0a0b0c;\n    --btn-active-color: #CCC;\n    \n    --closebox-background-color: #262a2e;\n    --closebox-color: #CCC;\n    --list_group-background-color: #262a2e;\n    --list_group-border-bottom-color: transparent;\n    --list_group-hover-background-color: #373c41;\n    --list_group-active-background-color: #0a0b0c;\n    --image_list_collapsable-background-color: #0a0b0c;\n    --img_option_selected-background-color: #93FD9840;\n    --rightui-border-left-color: transparent;\n    --leftui-border-right-color: transparent;\n    --webkit-scrollbar-thumb-color: #FFFFFFD0;\n    --scrollbar-color-thumb: #FFFFFFD0;\n    --scrollbar-color-track: rgba(0, 0, 0, 0.2);\n}",""]);const s=i},2133:(e,t,n)=>{"use strict";n.d(t,{QL:()=>i,aL:()=>r,cS:()=>o});const o=new Set([71,90,193,232,378,379,389,409]),r=new Set;let a=0;class i{title;category;uid;color;hasError;collectiveErrorMessage;nextTargetUid;targets;constructor(){this.title="Empty",this.category=null,this.uid=a++,this.color=null,this.hasError=!1,this.collectiveErrorMessage="",this.nextTargetUid=0,this.targets=[]}addObjects(e){let t=0,n=0;for(const o of e)if(["bg","inf"].includes(o._class)){const e=new s(o,this.nextTargetUid);e.valid?(t++,this.targets.push(e),this.nextTargetUid++):n++}return{successCount:t,failCount:n}}addTriggerActions(e,t){let n=0,o=0;for(const r of e)if("trigger"===r._class)for(const e of t){const t=l(r.pm[`actions_${e}_type`],e),a=new s(r,this.nextTargetUid,e,t);a.valid?(n++,this.targets.push(a),this.nextTargetUid++):o++}return{successCount:n,failCount:o}}updateTitle(){this.title=this.makeTitle()}updateCategory(){let e=null;for(const t of this.targets)if(null===e)e=t.entity._class;else if(t.entity._class!==e){e="mixed";break}this.category=e}updateColor(){let e=null;for(const t of this.targets){const n=t.getColorValue();if(null===e)e=n;else if(e!==n&&null!==n){e=null;break}}this.color=e}updateErrors(){let e=[];for(const t of this.targets)t.updateValidity(),t.valid||e.push(t);if(0==e.length)this.hasError=!1,this.collectiveErrorMessage="";else{const t=e.length>1;this.hasError=!0,this.collectiveErrorMessage=`This group has ${e.length} error${t?"s":""}`;for(let t=0;t<e.length;t++){if(3==t){this.collectiveErrorMessage+="\n...";break}const n=e[t];this.collectiveErrorMessage+=`\n${n.name}: ${n.errorMessage}`}}}makeTitle(){const e=this.targets.length;if(0==e)return"None";switch(this.category){case"bg":return`Backgrounds (${e})`;case"inf":return`Engine marks (${e})`;case"trigger":return`Trigger actions (${e})`;case"mixed":return`Mixed (${e})`;default:return"Invalid"}}}class s{entity;actionNum;actionParam;uid;name;valid;errorMessage;constructor(e,t,n=null,o=null){this.entity=e,this.uid=t,this.actionNum=n,this.actionParam=o,this.name=null,this.valid=null,this.errorMessage=null,this.updateName(),this.updateValidity()}setColorValue(e){if(null===this.errorMessage)switch(this.entity._class){case"bg":this.entity.pm.c=e;break;case"trigger":this.entity.pm[this.actionParam]=e;break;case"inf":this.entity.pm.forteam=e}}getColorValue(){let e=null;if(this.valid)switch(this.entity._class){case"bg":e=this.entity.pm.c;break;case"trigger":e=this.entity.pm[this.actionParam];break;case"inf":e=this.entity.pm.forteam}return""!==e&&/^#[0-9A-Fa-f]{6}$/.test(e)?e:"#808080"}updateName(){switch(this.entity._class){case"bg":this.name="Background";break;case"trigger":this.name=`${this.entity.pm.uid} [${this.actionNum}]`;break;case"inf":this.name="Engine mark"}}updateValidity(){let e=null,t=null;if(this.entity.exists)switch(this.entity._class){case"bg":e=!0;break;case"trigger":const n=parseInt(this.entity.pm[`actions_${this.actionNum}_type`]);e=(o.has(n)||r.has(n))&&this.actionParam==l(n,this.actionNum),e||(t="Trigger action is invalid");break;case"inf":e=["watercolor","acidcolor"].includes(this.entity.pm.mark),e||(t="Engine mark modificator is invalid");break;default:e=!1,t="Object type is invalid (how did this happen?)"}else e=!1,t="Object no longer exists";this.valid=e,this.errorMessage=t}}function l(e,t){return function(e){return 193==e}(e)?`actions_${t}_targetA`:`actions_${t}_targetB`}},2186:(e,t,n)=>{"use strict";n.d(t,{Or:()=>p,un:()=>v,zj:()=>b,jY:()=>f,nG:()=>h});var o=n(7218),r=n(3150);const a="::ALEI Map Data (important!)::",i="::ALEI Map Data backup::";function s(e){let t=new E("decor");t.pm.uid=i,t.pm.model="null",t.pm.text=d(e),es.push(t),need_redraw=!0,UpdateGUIObjectsList(),(0,r.fd)([t])}function l(){for(let e of es)if(e.pm.uid==a&&"decor"==e._class&&e.exists)return e;return null}function c(e,t){e.pm.text=d(JSON.stringify(t))}function d(e){return(e=(e=(e=e.replaceAll('"',"&quot;")).replaceAll("<","&lt;")).replaceAll(">","&gt;")).replaceAll("\\","&bs;")}const _=1,u={2:function(e){throw new Error("mapDataFormatUpdateFunctions[2] not implemented")}},m={v:_,content:{comments:{}}};let g;function p(){const e=l();if(null===e)v();else{try{g=function(e){return JSON.parse(e.pm.text.replaceAll("&quot;",'"').replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&bs;","\\"))}(e)}catch(t){console.error(t),NewNote("ALEI: Failed to read ALEI map data (trigger comments). The data was reset and a backup was created for the previous data.",note_bad),s(e.pm.text),v()}const t=function(e){return e.v==_}(g);t||function(e){s(JSON.stringify(e));for(let t=e.v;t<_;t++){let n=t+1,o=u[n];if(null==o)throw NewNote("ALEI: An error occured while updating ALEI map data.<br>Report this problem to the developers and disable ALEI if the problem persists.",note_bad),new Error(`v.${t} -> v.${n} map data update function doesn't exist`);o(e)}}(g)}}function b(){for(const e in g.content.comments){const t=g.content.comments[e];let n=0;for(const o of es)if("trigger"==o._class&&o.exists&&o.pm.uid==e&&(o.comments=t[n],n++,n==t.length))break}}function h(){g.content.comments={};for(const e of es){if("trigger"!=e._class||!e.exists||void 0===e.comments)continue;const t=e.pm.uid;void 0===g.content.comments[t]&&(g.content.comments[t]=new Array);let n={};const r=!0===e.pm.extended?e.pm.totalNumOfActions:o.Wx;for(const t in e.comments)parseInt(t)<r&&(n[t]=e.comments[t]);g.content.comments[t].push(n)}}function f(){const e=l();null!=e?c(e,g):Object.keys(g.content.comments).length>0&&function(e){let t=new E("decor");t.pm.uid=a,t.pm.model="null",c(t,e),es.push(t),need_redraw=!0,UpdateGUIObjectsList(),(0,r.fd)([t])}(g)}function v(){g=JSON.parse(JSON.stringify(m))}v(),unsafeWindow.RemoveALEIMapData=function(){!function(){for(const e of es)"trigger"==e._class&&e.exists&&void 0!==e.comments&&delete e.comments}(),unsafeWindow.SaveThisMap()}},2201:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(1601),r=n.n(o),a=n(6314),i=n.n(a)()(r());i.push([e.id,'/*some of these are unused cuz i scrapped the feature that required them*/\n\n\n.select-indicator {\n\tmargin: 0 5px;\n\tfont-size: 14px;\n    color: var(--select-indicator-color);\n}\n\n.select-indicator::before {\n    content: "✓";\n}\n\n.select-indicator--hidden {\n    display: none;\n}\n\n.warning-indicator {\n\tfont-size: 14px;\n\tcursor: default; /* use default cursor cuz warning indicator probably has a tooltip */\n}\n\n.warning-indicator::before {\n    content: "⚠️";\n}\n\n.warning-indicator--hidden {\n    display: none;\n}\n\n.dropdown-container {\n\tposition: relative;\n\tdisplay: inline-block;\n}\n\n.dropdown-opener {\n\tbackground-color: var(--dropdown-background-color);\n\twidth: 150px;\n\theight: 25px;\n\tborder-radius: 4px;\n\tborder: 1px solid var(--dropdown-opener-border-color);\n\toverflow: hidden;\n}\n\n.dropdown {\n\tbackground-color: var(--dropdown-background-color);\n\tbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n\tposition: absolute;\n\ttop: 30px;\n\tleft: 0px;\n    width: 300px;\n\tborder-radius: 4px;\n\tdisplay: none;\n\toverflow: auto;\n\tmax-height: 400px;\n\tz-index: 1;\n}\n\n.dropdown--visible {\n\tdisplay: block;\n}\n\n.dropdown--smaller {\n\twidth: 200px;\n\tmax-height: 300px;\n}\n\n.dropdown--small {\n\twidth: 100px;\n\tmax-height: 200px;\n}\n\n.dropdown--closer {\n\ttop: 25px;\n}\n\n.dropdown::-webkit-scrollbar {\n\twidth: 6px; /*vertical scrollbar*/\n\theight: 6px; /*horizontal scrollbar*/\n}\n\n.dropdown::-webkit-scrollbar-track {\n\tborder-radius: 6px;\n\tbackground-color: rgba(0, 0, 0, 0.15);\n}\n\n.dropdown::-webkit-scrollbar-thumb {\n\tborder-radius: 6px;\n\tbackground-color: rgba(0, 0, 0, 0.2);\n}\n\n.dropdown-clickable-element:hover {\n\tcursor: pointer;\n\tbackground-color: rgba(0, 0, 0, 0.0588);\n}\n\n.dropdown-item {\n\tborder-bottom: 1px solid rgba(0, 0, 0, 0.1);\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\theight: 35px;\n\tcolor: var(--dropdown-item-color);\n}\n\n.dropdown-item--small {\n\theight: 25px;\n}\n\n.dropdown-item-label {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tflex-grow: 1;\n\tpadding-left: 10px;\n\theight: 100%;\n\tmin-width: 0; /*allow content to shrink if necessary*/\n}\n\n.dropdown-item-label__left {\n\tdisplay: flex;\n\talign-items: center;\n\theight: 100%;\n\toverflow: hidden;\n}\n\n.dropdown-item-label__right {\n\tdisplay: flex;\n\talign-items: center;\n\theight: 100%;\n}\n\n.dropdown-item-text {\n\tfont-size: 14px;\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.dropdown-item-text--small {\n\tfont-size: 12px;\n}\n\n.dropdown-item-control {\n\tdisplay: flex;\n\theight: 100%\n}\n\n.dropdown-arrow-container {\n\twidth: 40px;\n\theight: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.dropdown-arrow-container--small {\n\twidth: 30px;\n}\n\n.dropdown-arrow {\n\tcolor: var(--dropdown-arrow-color);\n\tfont-size: 14px;\n\tfont-family: "Verdana", "Tahoma", "Georgia";\n\ttransition: transform 0.3s ease;\n\ttransform: translate(0px, -1.5px) rotate(0deg);\n}\n\n.dropdown-arrow::before {\n\tcontent: ">";\n}\n\n.dropdown-arrow--open {\n\ttransform: translate(1.5px, 0px) rotate(90deg);\n}\n\n.dropdown-submenu-container {\n\tbackground-color: rgba(0, 0, 0, 0.04);\n\tborder-bottom: 1px solid rgba(0, 0, 0, 0.1);\n\twidth: 100%;\n\tdisplay: none;\n}\n\n.dropdown-submenu-container--visible {\n\tdisplay: inline-block;\n}\n\n.dropdown-submenu-content {\n\tmargin: 5px;\n\tmargin-right: 0;\n\tborder-left: 2px solid rgba(0, 0, 0, 0.1);\n\tpadding: 10px;\n\tpadding-bottom: 5px;\n}\n\n.dropdown-control-buttons-container {\n\tdisplay: flex;\n\tgap: 10px;\n\tpadding: 5px 10px;\n}\n\n.dropdown-normal-button {\n    border: 2px solid rgba(0, 0, 0, 0.2);\n\tborder-radius: 4px;\n\tbackground-color: rgba(0, 0, 0, 0.25);\n\tcolor: #fff;\n\tmargin-right: 15px;\n\tmargin-bottom: 5px;\n\tcursor: pointer;\n}\n\n.dropdown-normal-button:hover {\n    background-color: rgba(0, 0, 0, 0.2);\n}\n\n.dropdown-normal-text {\n    color: #000;\n\tfont-size: 14px;\n\tmargin: 0;\n\tmargin-bottom: 5px;\n}\n\n.dropdown-square-button {\n\twidth: 25px;\n    height: 25px;\n    background-color: rgba(0, 0, 0, 0.1);\n\tcolor: rgba(0, 0, 0, 0.4813);\n\tborder: none;\n\tborder-radius: 4px;\n    font-size: 22px;\n\tfont-weight: bold;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tcursor: pointer;\n}\n\n.dropdown-square-button--smaller-font {\n\tfont-size: 18px;\n}\n\n.dropdown-square-button:hover {\n\tbackground-color: rgba(0, 0, 0, 0.15);\n}',""]);const s=i},2641:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(1601),r=n.n(o),a=n(6314),i=n.n(a)()(r());i.push([e.id,'.color-window-top-layout {\n    display: flex;\n    width: 100%;\n}\n\n.color-window-top-layout__left, .color-window-top-layout__right {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    flex: 1;\n}\n\n.color-window-top-layout__right {\n    justify-content: flex-end\n}\n\n.color-text-input-layout {\n    display: flex;\n    gap: 5px;\n}\n\n.color-text-input-label {\n    width: 30px;\n    cursor: pointer;\n}\n\n.color-text-input {\n    background-color: var(--color-text-input-background-color);\n    border: none;\n    color: var(--color-text-input-color);\n    font-size: 14px;\n    padding: 1px 3px;\n}\n\n.color-picker-container {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    margin: 0 auto;\n    margin-top: 15px;\n    width: 350px;\n}\n\n.color-spectrum-container {\n    width: 350px;\n    height: 175px;\n}\n\n.selectable-target-item {\n    cursor: pointer;\n}\n\n.selectable-target-item:hover {\n    color: var(--selectable-target-item-hover-color);\n}\n\n.selectable-target-item--selected, .selectable-target-item--selected:hover {\n    color: var(--selected-target-item-color);\n}\n\n.target-quick-delete-button-container {\n\theight: 100%;\n\tdisplay: flex;\n\talign-items: center;\n    margin: 0 5px;\n}\n\n.target-quick-delete-button {\n    font-size: 14px;\n    font-weight: bold;\n    color: var(--target-quick-delete-button-color);\n    border: none;\n    background: none;\n    width: 15px;\n    height: 15px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.target-quick-delete-button::before {\n    content: "x";\n}\n\n.target-quick-delete-button:hover {\n    background: rgba(0, 0, 0, 0.1);\n}',""]);const s=i},2750:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(1601),r=n.n(o),a=n(6314),i=n.n(a)()(r());i.push([e.id,'.checkmark-icon {\n    font-size: 14px;\n    color: #0e0;\n}\n\n.checkmark-icon::before {\n    content: "✓";\n}\n\n.warning-icon {\n    font-size: 14px;\n}\n\n.warning-icon::before {\n    content: "⚠️";\n}\n\n.error-icon {\n    font-size: 11px;\n}\n\n.error-icon::before {\n    content: "❌";\n}',""]);const s=i},2839:(e,t,n)=>{"use strict";n.d(t,{b6:()=>h,tz:()=>m,BC:()=>b});const o=JSON.parse('{"0":{"name":"Concrete","sprites":{"top":{"mid":{"sprite":"walls/concrete_top"},"left":{"sprite":"walls/concrete_top_left"},"right":{"sprite":"walls/concrete_top_right"}},"bottom":{"mid":{"sprite":"walls/concrete_bottom"},"left":{"sprite":"walls/concrete_bottom_left"},"right":{"sprite":"walls/concrete_bottom_right"}}}},"1":{"name":"Grass","sprites":{"top":{"mid":{"sprite":"walls/grass","offsetX":28,"offsetY":-23,"widthAdjustment":-56},"left":{"sprite":"walls/grass_left","offsetY":-23,"requiresCorner":false},"right":{"sprite":"walls/grass_right","offsetX":16,"offsetY":-23,"requiresCorner":false}}}},"2":{"name":"Sand","sprites":{"top":{"mid":{"sprite":"walls/sand","offsetY":-6}}}},"3":{"name":"Brown concrete","sprites":{"top":{"mid":{"sprite":"walls/brown_concrete_top"},"left":{"sprite":"walls/concrete_top_left"},"right":{"sprite":"walls/concrete_top_right"}},"bottom":{"mid":{"sprite":"walls/brown_concrete_bottom"},"left":{"sprite":"walls/concrete_bottom_left"},"right":{"sprite":"walls/concrete_bottom_right"}}}},"4":{"name":"Dark plate","sprites":{"top":{"mid":{"sprite":"walls/dark_plate_top"}},"bottom":{"mid":{"sprite":"walls/dark_plate_bottom"}}}},"5":{"name":"Dry grass","sprites":{"top":{"mid":{"sprite":"walls/dry_grass","offsetX":28,"offsetY":-23,"widthAdjustment":-56},"left":{"sprite":"walls/dry_grass_left","offsetY":-23,"requiresCorner":false},"right":{"sprite":"walls/dry_grass_right","offsetX":16,"offsetY":-23,"requiresCorner":false}}}},"6":{"name":"Dark grass","sprites":{"top":{"mid":{"sprite":"walls/dark_grass","offsetX":28,"offsetY":-23,"widthAdjustment":-56},"left":{"sprite":"walls/dark_grass_left","offsetY":-23,"requiresCorner":false},"right":{"sprite":"walls/dark_grass_right","offsetX":16,"offsetY":-23,"requiresCorner":false}}}},"7":{"name":"Clean dark plate","sprites":{"top":{"mid":{"sprite":"walls/clean_dark_plate_top"}},"bottom":{"mid":{"sprite":"walls/clean_dark_plate_bottom"}}}},"8":{"name":"Bright plate","sprites":{"top":{"mid":{"sprite":"walls/bright_plate_top"}},"bottom":{"mid":{"sprite":"walls/bright_plate_bottom"}}}},"9":{"name":"Clean bright plate","sprites":{"top":{"mid":{"sprite":"walls/clean_bright_plate_top"}},"bottom":{"mid":{"sprite":"walls/clean_bright_plate_bottom"}}}},"10":{"name":"Usurpation plate","sprites":{"top":{"mid":{"sprite":"walls/usurpation_plate_top"},"left":{"sprite":"walls/usurpation_plate_top_left"},"right":{"sprite":"walls/usurpation_plate_top_right"}},"bottom":{"mid":{"sprite":"walls/usurpation_plate_bottom"},"left":{"sprite":"walls/usurpation_plate_bottom_left"},"right":{"sprite":"walls/usurpation_plate_bottom_right"}}}},"11":{"name":"Stripes","sprites":{"top":{"mid":{"sprite":"walls/stripes"},"left":{"sprite":"walls/stripes_top_left"},"right":{"sprite":"walls/stripes_top_right"}},"bottom":{"mid":{"sprite":"walls/stripes"},"left":{"sprite":"walls/stripes_bottom_left"},"right":{"sprite":"walls/stripes_bottom_right"}}}},"12":{"name":"Asphalt","sprites":{"top":{"mid":{"sprite":"walls/asphalt"}}}},"13":{"name":"White concrete","sprites":{"top":{"mid":{"sprite":"walls/white_concrete_top"},"left":{"sprite":"walls/white_concrete_top_left"},"right":{"sprite":"walls/white_concrete_top_right"}},"bottom":{"mid":{"sprite":"walls/white_concrete_bottom"},"left":{"sprite":"walls/white_concrete_bottom_left"},"right":{"sprite":"walls/white_concrete_bottom_right"}}}},"14":{"name":"PB:FTTP-like concrete","sprites":{"top":{"mid":{"sprite":"walls/pbfttp_concrete"},"left":{"sprite":"walls/pbfttp_concrete_left"},"right":{"sprite":"walls/pbfttp_concrete_right"}}}},"15":{"name":"Wet sand","sprites":{"top":{"mid":{"sprite":"walls/wet_sand","offsetY":-6}}}},"16":{"name":"Mud","sprites":{"top":{"mid":{"sprite":"walls/mud","offsetY":-6}}}},"17":{"name":"Usurpation tiles","sprites":{"top":{"mid":{"sprite":"walls/usurpation_tiles_top"}},"bottom":{"mid":{"sprite":"walls/usurpation_tiles_bottom"}}}},"18":{"name":"Stone bricks","sprites":{"top":{"mid":{"sprite":"walls/stone_bricks"},"left":{"sprite":"walls/concrete_top_left"},"right":{"sprite":"walls/concrete_top_right"}},"bottom":{"mid":{"sprite":"walls/concrete_bottom"},"left":{"sprite":"walls/concrete_bottom_left"},"right":{"sprite":"walls/concrete_bottom_right"}}}},"19":{"name":"Wood","sprites":{"top":{"mid":{"sprite":"walls/wood"}}}},"20":{"name":"Rocks","sprites":{"top":{"mid":{"sprite":"walls/rocks","offsetY":-6}}}},"example":{"name":"Example material data with comments","sprites":{"_comment":"top and bottom are both optional","top":{"mid":{"sprite":"string | some texture key","offsetX":"number? | 0 by default if omitted","offsetY":"number? | 0 by default if omitted","widthAdjustment":"number? | 0 by default if omitted"},"left":{"sprite":"string","offsetX":"number?","offsetY":"number?","requiresCorner":"boolean? | determines if the part is only rendered when the part is in a corner, true by default"},"right":{"sprite":"string","offsetX":"number?","offsetY":"number?","requiresCorner":"boolean?"}},"bottom":{"left":{"sprite":"string","offsetX":"number?","offsetY":"number?","requiresCorner":"boolean?"},"mid":{"sprite":"string","offsetX":"number?","offsetY":"number?","widthAdjustment":"number?"},"right":{"sprite":"string","offsetX":"number?","offsetY":"number?","requiresCorner":"boolean?"}}}}}'),r=Object.fromEntries(Object.entries(o).filter((([e,t])=>"example"!==e)));let a=[];for(const e in r)if("example"!==e)for(const t in r[e].sprites)for(const n in r[e].sprites[t])a.push(r[e].sprites[t][n].sprite);a=[...new Set(a)];const i={};for(const e of a){const t=new Image;t.src="https://raw.githubusercontent.com/iatealemon/ALEI/refs/heads/main/resources/"+e+".webp",t.loaded=!1,t.onload=()=>{t.loaded=!0},i[e]=t}const s=new Map;function l(e){return i[e]}function c(e,t,n){return{tiling:!1,image:e,x:t,y:n}}const d=0,_=1;class u{constructor(e){if(this.coords=[...new Set(e)].sort(((e,t)=>e-t)),this.coords.length<2)throw new Error("Cannot create interval tree for less than 2 unique coordinates");this.coordIndexes=Object.fromEntries(this.coords.map(((e,t)=>[e,t]))),this.leaves=this.coords.length-1,this.nodeWallCount=new Uint8Array(4*this.leaves),this.nodeBubblingWallCount=new Uint8Array(4*this.leaves),this.nodeSide=new Uint8Array(4*this.leaves),this.nodeMaterial=new Uint8Array(4*this.leaves),this.nodePriority=new Uint16Array(4*this.leaves),this.nodeDepth=new Uint8Array(4*this.leaves),this.currentDepth=0}leftChild(e){return 2*e}rightChild(e){return 2*e+1}update(e,t,n,o,r,a){if(!(e in this.coordIndexes)||!(t in this.coordIndexes))throw new Error("Start or end value is not in original coordinate set.");if(e>=t)throw new Error("Start must be less than end");const i=this.coordIndexes[e],s=this.coordIndexes[t];this._update(1,0,this.leaves,i,s,n,o,r,a)}_update(e,t,n,o,r,a,i,s,l){if(!(n<=o||r<=t)&&(o<=t&&n<=r&&(this.nodeWallCount[e]+=a===d?1:-1,(l>this.nodeDepth[e]||a===_&&this.nodeSide[e]===d||s>this.nodePriority[e])&&(this.nodeSide[e]=a,this.nodeMaterial[e]=i,this.nodePriority[e]=s,this.nodeDepth[e]=l),this.currentDepth=l),this.nodeBubblingWallCount[e]+=a===d?1:-1,n-t>1)){const c=Math.floor((t+n)/2);this._update(this.leftChild(e),t,c,o,r,a,i,s,l),this._update(this.rightChild(e),c,n,o,r,a,i,s,l)}}getSegments(){const e=[];return this._getSegments(1,0,this.leaves,e),e}_getSegments(e,t,n,o){const r=this.nodeSide[e]===d?1:0;if(this.nodeWallCount[e]<=r)if(this.nodeBubblingWallCount[e]<=r&&this.nodeDepth[e]>=this.currentDepth){const r=o[o.length-1],a=void 0!==r&&r.end===this.coords[t],i=void 0!==r&&r.material===this.nodeMaterial[e],s=void 0!==r&&"top"===r.side==(this.nodeSide[e]===d);a&&s?i?r.end=this.coords[n]:(r.hasRightCorner=!1,o.push({start:this.coords[t],end:this.coords[n],material:this.nodeMaterial[e],side:this.nodeSide[e]===d?"top":"bottom",hasLeftCorner:!1,hasRightCorner:!0})):o.push({start:this.coords[t],end:this.coords[n],material:this.nodeMaterial[e],side:this.nodeSide[e]===d?"top":"bottom",hasLeftCorner:!0,hasRightCorner:!0})}else if(n-t>1){const r=Math.floor((t+n)/2);this._getSegments(this.leftChild(e),t,r,o),this._getSegments(this.rightChild(e),r,n,o)}}}const m=new Set(["x","y","w","h"]);let g=!0,p=[];function b(){g=!0}function h(e){g&&function(){if(!g)return;p=[];const e=function(e){const t=e.flatMap(((e,t)=>[{y:e.pm.y,minX:e.pm.x,maxX:e.pm.x+e.pm.w,side:d,wallMaterial:e.pm.m,wallPriority:t,depth:0},{y:e.pm.y+e.pm.h,minX:e.pm.x,maxX:e.pm.x+e.pm.w,side:_,wallMaterial:e.pm.m,wallPriority:t,depth:0}])).sort(((e,t)=>e.y!==t.y?e.y-t.y:e.side!==t.side?e.side===d?-1:1:0));{let e=0,n=-1/0;for(const o of t)o.y>n&&(e++,n=o.y),o.depth=e}let n;try{n=new u(t.flatMap((({minX:e,maxX:t})=>[e,t])))}catch{return[]}let o=[];function a(e,t){const n=function(e){const t=r[e.material]?.sprites[e.side];if(void 0===t)return[];const n=e.end-e.start,o=[];if(void 0!==t.mid){const r=t.mid,a=l(r.sprite);if(void 0!==a&&a.loaded){const t=r.offsetX??0,i=(r.offsetY??0)+("bottom"===e.side?-a.height:0),s=n+(r.widthAdjustment??0),l=-e.start-(r.offsetX??0);o.push(function(e,t,n,o,r){return{tiling:!0,image:e,x:t,y:n,width:o,tileX:r}}(a,t,i,s,l))}}if(void 0!==t.left){const n=t.left;if(e.hasLeftCorner||!(n.requiresCorner??1)){const t=l(n.sprite);if(void 0!==t&&t.loaded){const r=n.offsetX??0,a=(n.offsetY??0)+("bottom"===e.side?-t.height:0);o.push(c(t,r,a))}}}if(void 0!==t.right){const r=t.right;if(e.hasRightCorner||!(r.requiresCorner??1)){const t=l(r.sprite);if(void 0!==t&&t.loaded){const a=(r.offsetX??0)+n-t.width,i=(r.offsetY??0)+("bottom"===e.side?-t.height:0);o.push(c(t,a,i))}}}return o}(e);for(const r of n)r.x+=e.start,r.y+=t,o.push(r)}let i=1/0;for(const{y:e,minX:o,maxX:r,side:s,wallMaterial:l,wallPriority:c,depth:d}of t){if(e-i>0){const e=n.getSegments();for(const t of e)a(t,i)}n.update(o,r,s,l,c,d),i=e}const s=n.getSegments();for(const e of s)a(e,i);return o}(es.filter((e=>"box"===e._class&&e.exists)).filter((e=>e.pm.x%10==0&&e.pm.y%10==0&&e.pm.w%10==0&&e.pm.h%10==0)));p=e,g=!1}();for(const t of p)(t.tiling?v:f)(e,t)}function f(e,t){const n=unsafeWindow.w2s_x(t.x),o=unsafeWindow.w2s_y(t.y),r=unsafeWindow.w2s_w(t.image.width),a=unsafeWindow.w2s_h(t.image.height);e.drawImage(t.image,n,o,r,a)}function v(e,t){const n=function(e,t){if(s.has(t))return s.get(t);const n=e.createPattern(t,"repeat");return s.set(t,n),n}(e,t.image),o=unsafeWindow.w2s_x(t.x),r=unsafeWindow.w2s_y(t.y),a=unsafeWindow.w2s_x(t.tileX),i=unsafeWindow.w2s_w(t.width),l=unsafeWindow.w2s_w(t.image.height);e.save(),e.translate(o+a,0),e.fillStyle=n,e.fillRect(-a,r,i,l),e.restore()}unsafeWindow.wallTexturesSetDirty=b},2846:(e,t,n)=>{"use strict";n.d(t,{A:()=>j});var o=n(5072),r=n.n(o),a=n(7825),i=n.n(a),s=n(7659),l=n.n(s),c=n(4868),d=n.n(c),_=n(540),u=n.n(_),m=n(1113),g=n.n(m),p=n(2123),b={attributes:{title:"style-from-webpack"}};b.styleTagTransform=g(),b.setAttributes=d(),b.insert=l().bind(null,"head"),b.domAPI=i(),b.insertStyleElement=u(),r()(p.A,b),p.A&&p.A.locals&&p.A.locals;var h=n(3537),f={attributes:{title:"style-from-webpack"}};f.styleTagTransform=g(),f.setAttributes=d(),f.insert=l().bind(null,"head"),f.domAPI=i(),f.insertStyleElement=u(),r()(h.A,f),h.A&&h.A.locals&&h.A.locals;var v=n(7900),w={attributes:{title:"style-from-webpack"}};w.styleTagTransform=g(),w.setAttributes=d(),w.insert=l().bind(null,"head"),w.domAPI=i(),w.insertStyleElement=u(),r()(v.A,w),v.A&&v.A.locals&&v.A.locals;var y=n(2963),E={attributes:{title:"style-from-webpack"}};E.styleTagTransform=g(),E.setAttributes=d(),E.insert=l().bind(null,"head"),E.domAPI=i(),E.insertStyleElement=u(),r()(y.A,E),y.A&&y.A.locals&&y.A.locals;var x=n(9508),k={attributes:{title:"style-from-webpack"}};k.styleTagTransform=g(),k.setAttributes=d(),k.insert=l().bind(null,"head"),k.domAPI=i(),k.insertStyleElement=u(),r()(x.A,k),x.A&&x.A.locals&&x.A.locals;var A=n(385),C={attributes:{title:"style-from-webpack"}};C.styleTagTransform=g(),C.setAttributes=d(),C.insert=l().bind(null,"head"),C.domAPI=i(),C.insertStyleElement=u(),r()(A.A,C),A.A&&A.A.locals&&A.A.locals;var M=n(7961),D={attributes:{title:"style-from-webpack"}};D.styleTagTransform=g(),D.setAttributes=d(),D.insert=l().bind(null,"head"),D.domAPI=i(),D.insertStyleElement=u(),r()(M.A,D),M.A&&M.A.locals&&M.A.locals;var P=n(1148),O={attributes:{title:"style-from-webpack"}};O.styleTagTransform=g(),O.setAttributes=d(),O.insert=l().bind(null,"head"),O.domAPI=i(),O.insertStyleElement=u(),r()(P.A,O),P.A&&P.A.locals&&P.A.locals;var S=n(2641),I={attributes:{title:"style-from-webpack"}};I.styleTagTransform=g(),I.setAttributes=d(),I.insert=l().bind(null,"head"),I.domAPI=i(),I.insertStyleElement=u(),r()(S.A,I),S.A&&S.A.locals&&S.A.locals;var T=n(2201),F={attributes:{title:"style-from-webpack"}};F.styleTagTransform=g(),F.setAttributes=d(),F.insert=l().bind(null,"head"),F.domAPI=i(),F.insertStyleElement=u(),r()(T.A,F),T.A&&T.A.locals&&T.A.locals;var L=n(2750),B={attributes:{title:"style-from-webpack"}};B.styleTagTransform=g(),B.setAttributes=d(),B.insert=l().bind(null,"head"),B.domAPI=i(),B.insertStyleElement=u(),r()(L.A,B),L.A&&L.A.locals&&L.A.locals;var R=n(4750),N={attributes:{title:"style-from-webpack"}};N.styleTagTransform=g(),N.setAttributes=d(),N.insert=l().bind(null,"head"),N.domAPI=i(),N.insertStyleElement=u(),r()(R.A,N),R.A&&R.A.locals&&R.A.locals;const U="style-from-webpack";function j(){for(let e=0;e<document.styleSheets.length;e++)document.styleSheets[e].title==U&&(document.styleSheets[e].disabled=!1)}},2946:(e,t,n)=>{"use strict";n.d(t,{F:()=>i,K:()=>a});var o=n(1329);function r(e){return"true"===e}null!=localStorage.RIGHT_PANEL_WIDTH&&(localStorage.ALEI_RightPanelWidth=localStorage.RIGHT_PANEL_WIDTH,localStorage.removeItem("RIGHT_PANEL_WIDTH"));const a={logLevel:"ALEI_LogLevel",showTriggerIDs:"ALEI_ShowTriggerIDs",enableTooltips:"ALEI_ShowTooltips",showIDs:"ALEI_ShowIDs",showZIndex:"ALEI_ShowZIndex",showSameParameters:"ALEI_ShowSameParameters",gridBasedOnSnapping:"ALEI_gridBasedOnSnapping",renderObjectNames:"ALEI_RenderObjectNames",rematchUID:"ALEI_RemapUID",extendedTriggers:"ALEI_ExtendedTriggersEnabled",orderedNaming:"ALEI_orderedNaming",customRenderer:"ALEI_Renderer_Enabled",cartoonishEdges:"ALEI_Renderer_CartoonishEdges",originalSelectOverlay:"ALEI_Renderer_OriginalSelectOverlay",boxRendering:"ALEI_Renderer_PreviewWalls",showTextPlaceholderDecors:"ALEI_Renderer_ShowTextPlaceholderDecors",html5Mode:"ALEI_HTML5Mode",renderSpawnAreas:"ALEI_Renderer_SpawnAreas",errorCheckOnSave:"ALEI_ErrorCheckOnSave",experimentalExtTriggers:"ALEI_ExperimentalExtTriggers"},i={rightPanelSize:(0,o.G)("ALEI_RightPanelWidth","30vw",(e=>e)),triggerEditTextSize:(0,o.G)("ALEI_EditTextSize","12px",(e=>e+"px")),starsImage:(0,o.G)("ALEI_StarImage","stars2.jpg",(e=>e)),logLevel:(0,o.G)("ALEI_LogLevel",0,parseInt),showTriggerIDs:(0,o.G)("ALEI_ShowTriggerIDs",!1,r),enableTooltips:(0,o.G)("ALEI_ShowTooltips",!1,r),showSameParameters:(0,o.G)("ALEI_ShowSameParameters",!0,r),rematchUID:(0,o.G)("ALEI_RemapUID",!1,r),gridBasedOnSnapping:(0,o.G)("ALEI_gridBasedOnSnapping",!0,r),renderObjectNames:(0,o.G)("ALEI_RenderObjectNames",!0,r),ocmEnabled:!0,extendedTriggers:(0,o.G)("ALEI_ExtendedTriggersEnabled",!0,r),customRenderer:(0,o.G)("ALEI_Renderer_Enabled",!0,r),orderedNaming:(0,o.G)("ALEI_orderedNaming",!0,r),cartoonishEdges:(0,o.G)("ALEI_Renderer_CartoonishEdges",!1,r),originalSelectOverlay:(0,o.G)("ALEI_Renderer_OriginalSelectOverlay",!1,r),boxRendering:(0,o.G)("ALEI_Renderer_PreviewWalls",!1,r),showTextPlaceholderDecors:(0,o.G)("ALEI_Renderer_ShowTextPlaceholderDecors",!0,r),html5Mode:(0,o.G)("ALEI_HTML5Mode",!0,r),renderSpawnAreas:(0,o.G)("ALEI_Renderer_SpawnAreas",!1,r),errorCheckOnSave:(0,o.G)("ALEI_ErrorCheckOnSave",!0,r),experimentalExtTriggers:(0,o.G)("ALEI_ExperimentalExtTriggers",!1,r)};i.extendedTriggers=i.experimentalExtTriggers,unsafeWindow.aleiSettings=i},2963:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(1601),r=n.n(o),a=n(6314),i=n.n(a)()(r());i.push([e.id,".alei-param-side-buttons-container {\n    width: 18px;\n    height: 60px;\n    position: absolute;\n    left: 1px;\n    display: none;\n}\n\n.alei-param-side-buttons-container--visible {\n    display: block;\n}\n\n.alei-param-side-buttons-container:hover .alei-param-side-button {\n    opacity: 100%;\n}\n\n.alei-param-side-button {\n    color: #f0f0f0;\n    background-color: var(--param-side-button-background-color);\n    border: none;\n    border-radius: 2px;\n    font-size: 11px;\n    font-weight: bold;\n    display: block;\n    width: 15px;\n    height: 15px;\n    padding: 0;\n    opacity: 40%;\n    margin-top: 1px;\n}\n\n.alei-param-side-button:hover {\n    background-color: var(--param-side-button-hover-background-color);\n}\n\n.alei-param-side-button:active {\n    background-color: var(--param-side-button-active-background-color);\n}",""]);const s=i},3150:(e,t,n)=>{"use strict";n.d(t,{Mw:()=>g,XV:()=>m,fd:()=>_,sf:()=>u});var o=n(3797),r=n(7918),a=n(5146),i=n(2946),s=n(2839),l=n(3987),c=n(5129),d=n(7218);function _(e){(0,o.UM)(e),(0,r.p2)(e),i.F.ocmEnabled&&(0,a.yD)(e),i.F.renderSpawnAreas&&e.some((e=>c.Ly.has(e._class)))&&c.lA(),e.some((e=>"box"===e._class))&&s.BC()}let u=[];function m(){u=[]}function g(){let e=unsafeWindow.E;unsafeWindow.E=function(t){let n=new e(t);if("water"==t)n.pm.attach=-1;else if("decor"==t)n.pm.text="Hello World!";else if("trigger"==t){let e=Object.entries(n.pm);e.splice(5,0,["execute",!1]),n.pm=Object.fromEntries(e)}else"region"==t?n.pm.uses_timer=!1:"door"==t&&d.Em&&(n.pm.mute=!1);var o;return n.fixWidths=(o=n.fixWidths,function(){o.call(this),c.Ly.has(this._class)&&c.lA(),"box"===this._class&&s.BC()}),n.Remove=()=>{NewNote("ALEI: This absolutely should not happen, please report to ALEI developers, error: E.Remove got called when it shouldn't be","#FF0000")},new Proxy(n,{set:function(e,t,n,o){if("selected"==t){const t=e.selected;n&&!t?u.push(o):!n&&t&&u.splice(u.indexOf(o),1)}return"exists"===t&&n!==e.exists&&(i.F.renderSpawnAreas&&c.Ly.has(e._class)&&c.lA(),"box"===e._class&&s.BC()),Reflect.set(e,t,n,o)}})},(0,l.Md)(l.dm.DEBUG,"Patched entity.")}unsafeWindow.getSelectedObjects=()=>u},3338:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,DE:()=>i,Q1:()=>a});var o=n(7218);const r=-1;function a(e){let t=[];for(let n=1;n<=o.Wx;n++)t.push({type:e.pm[`actions_${n}_type`],targetA:e.pm[`actions_${n}_targetA`],targetB:e.pm[`actions_${n}_targetB`]});if(void 0!==e.pm.additionalActions)for(let n=0;n<e.pm.additionalActions.length;n++)t.push({type:e.pm.additionalActions[n],targetA:e.pm.additionalParamA[n],targetB:e.pm.additionalParamB[n]});return t}function i(e){return e.some((e=>e.type==r))}function s(e,t=1){let n={names:[],values:[]};for(let o=0;o<e.length;o++){const r=o+t,a=e[o];n.names.push(`actions_${r}_type`),n.values.push(a.type),n.names.push(`actions_${r}_targetA`),n.values.push(a.targetA),n.names.push(`actions_${r}_targetB`),n.values.push(a.targetB)}UpdatePhysicalParams(n.names,n.values,!1,!1)}},3537:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(1601),r=n.n(o),a=n(6314),i=n.n(a)()(r());i.push([e.id,"/* set the css variables for the css stuff that comes from alei */\n\n:root, .blue-theme {\n    --settings-menu-label-background-color: #476082;\n    --settings-menu-label-color: #bfcad9;\n    --settings-menu-button-background-color: #26354a;\n    --settings-menu-button-border-color: #26354a;\n    --settings-menu-button-color: #c1c9d3;\n    --settings-menu-button-hover-background-color: #596a83;\n    --settings-menu-button-hover-color: #f5faff;\n    --settings-menu-button-clicked-background-color: #91a5c1;\n    --settings-menu-button-clicked-color: #fbfbfb;\n    --comment-background-color: #314664;\n    --comment-border-color: #41546f;\n    --comment-color: hsl(215, 70%, 60%);\n    --comment-adder-button-color: hsl(215, 95%, 55%);\n    --comment-remover-button-color: hsl(0, 100%, 35%);\n    --param-side-button-background-color: hsl(215, 35%, 15%);\n    --param-side-button-hover-background-color: hsl(215, 35%, 20%);\n    --param-side-button-active-background-color: hsl(215, 35%, 25%);\n    --gui-render-info-color: #fff;\n    --draggable-window-text-color: hsl(215, 30%, 90%);\n\t--select-indicator-color: hsl(120, 100%, 40%);\n\t--dropdown-background-color: hsl(215, 100%, 95%);\n\t--dropdown-opener-border-color: hsl(215, 10%, 80%);\n\t--dropdown-item-color: #000;\n\t--dropdown-arrow-color: #555;\n\t--color-text-input-background-color: hsl(215, 20%, 55%);\n\t--color-text-input-color: #fff;\n\t--selectable-target-item-hover-color: #858585;\n\t--selected-target-item-color: #d1cb09;\n\t--target-quick-delete-button-color: #f00;\n    draggable-window {\n        --header-background-color: #728eb5;\n        --header-color: #fff;\n        --header-button-background-color: hsl(210, 37.5%, 55%);\n        --header-button-hover-background-color: hsl(210, 37.5%, 50%);\n        --header-button-active-background-color: hsl(210, 37.5%, 45%);\n        --header-button-color: #fff;\n        --header-button-border-color: hsl(210, 18.5%, 43.5%);\n        --content-background-color: #536b8d;\n        --shadow-color: #222;\n    }\n\tcolor-spectrum, hue-slider {\n\t\t--dot-border-color: #fff;\n\t}\n    --update-button-highlight-color: orange;\n    --trigger-action-hovered-color: rgb(65, 83, 124);/*rgb(65, 85, 130);*/\n    --trigger-action-selected-color: rgb(50, 70, 100);/*rgb(45, 65, 95);*/\n    --trigger-action-dragged-brightness: 0.8;\n    --tab-view-separator-color: hsl(215, 53%, 63%);\n    --tab-label-background-color: #819bbf;\n    --tab-label-hover-background-color: #657d9f;\n    --tab-label-select-background-color: #3e526d;\n    --tab-label-text-color: #fff;\n    --tab-label-info-color: #eee;\n    --params-table-cell-border-color: hsl(215, 52%, 69%);\n    --params-table-header-background-color: hsl(215, 29%, 34%);\n    --params-table-odd-row-background-color: hsl(215, 25%, 53%);\n    --params-table-even-row-background-color: hsl(215, 25%, 45%);\n    --params-table-row-hover-background-color: hsl(215, 22%, 40%);\n}\n\n.dark-theme, .purple-theme, .green-theme {\n    --settings-menu-label-background-color: #3b3b3b;\n    --settings-menu-label-color: #ccc;\n    --settings-menu-button-background-color: #555;\n    --settings-menu-button-border-color: #555;\n    --settings-menu-button-color: #aaa;\n    --settings-menu-button-hover-background-color: #666;\n    --settings-menu-button-hover-color: #ddd;\n    --settings-menu-button-clicked-background-color: #888;\n    --settings-menu-button-clicked-color: #eee;\n    --comment-background-color: #292929;\n    --comment-border-color: #353535;\n    --comment-color: #7b7b7b;\n    --comment-adder-button-color: #8d8d8d;\n    --comment-remover-button-color: hsl(0, 90%, 35%);\n    --param-side-button-background-color: #2d2d2d;\n    --param-side-button-hover-background-color: #3b3b3b;\n    --param-side-button-active-background-color: #494949;\n    --gui-render-info-color: #aaa;\n    --draggable-window-text-color: rgb(170, 170, 170);\n\t--select-indicator-color: hsl(120, 65%, 30%);\n\t--dropdown-background-color: rgb(184, 184, 184);\n\t--dropdown-opener-border-color: rgb(142, 142, 142);\n\t--dropdown-item-color: #000;\n\t--dropdown-arrow-color: rgb(38, 38, 38);\n\t--color-text-input-background-color: rgb(80, 80, 80);\n\t--color-text-input-color: rgb(200, 200, 200);\n\t--selectable-target-item-hover-color: rgb(75, 75, 75);\n\t--selected-target-item-color: #ffff4d;\n\t--target-quick-delete-button-color: #c00;\n    draggable-window {\n        --header-background-color: rgb(86, 86, 86);\n        --header-color: rgb(200, 200, 200);\n        --header-button-background-color: rgb(81, 81, 81);\n        --header-button-hover-background-color: rgb(70, 70, 70);\n        --header-button-active-background-color: rgb(60, 60, 60);\n        --header-button-color: rgb(200, 200, 200);\n        --header-button-border-color: rgb(57, 57, 57);\n        --content-background-color: rgb(56, 56, 56);\n        --shadow-color: rgb(9, 9, 9);\n    }\n\tcolor-spectrum, hue-slider {\n\t\t--dot-border-color: #ccc;\n\t}\n    --update-button-highlight-color: rgba(255, 165, 0, 0.5);\n    --trigger-action-hovered-color: rgb(42, 42, 42);/*rgb(47, 47, 47);*/\n    --trigger-action-selected-color: rgb(30, 30, 30);/*rgb(27, 27, 27);*/\n    --trigger-action-dragged-brightness: 0.8;\n    --tab-view-separator-color: rgb(97, 97, 97);\n    --tab-label-background-color: rgb(97, 97, 97);\n    --tab-label-hover-background-color: rgb(71, 71, 71);\n    --tab-label-select-background-color: rgb(38, 38, 38);\n    --tab-label-text-color: rgb(200, 200, 200);\n    --tab-label-info-color: rgb(180, 180, 180);\n    --params-table-cell-border-color: rgb(112, 112, 112);\n    --params-table-header-background-color: rgb(38, 38, 38);\n    --params-table-odd-row-background-color: rgb(75, 75, 75);\n    --params-table-even-row-background-color: rgb(58, 58, 58);\n    --params-table-row-hover-background-color: rgb(49, 49, 49);\n}\n\n.alei-dark-theme {\n    --settings-menu-label-background-color: #1d1d1d;\n    --settings-menu-label-color: #bbb;\n    --settings-menu-button-background-color: #333;\n    --settings-menu-button-border-color: #333;\n    --settings-menu-button-color: #999;\n    --settings-menu-button-hover-background-color: #444;\n    --settings-menu-button-hover-color: #ccc;\n    --settings-menu-button-clicked-background-color: #666;\n    --settings-menu-button-clicked-color: #ddd;\n    --comment-background-color: #161616;\n    --comment-border-color: #202020;\n    --comment-color: #808080;\n    --comment-adder-button-color: #808080;\n    --comment-remover-button-color: hsl(0, 90%, 35%);\n    --param-side-button-background-color: #202020;\n    --param-side-button-hover-background-color: #303030;\n    --param-side-button-active-background-color: #404040;\n    --gui-render-info-color: #FFFFFFD0;\n    --draggable-window-text-color: #d2d2d2;\n\t--select-indicator-color: hsl(120, 75%, 30%);\n\t--dropdown-background-color: rgb(150, 150, 150);\n\t--dropdown-opener-border-color: rgb(95, 95, 95);\n\t--dropdown-item-color: #000;\n\t--dropdown-arrow-color: rgb(14, 14, 14);\n\t--color-text-input-background-color: rgb(60, 60, 60);\n\t--color-text-input-color: rgb(220, 220, 220);\n\t--selectable-target-item-hover-color: rgb(85, 85, 85);\n\t--selected-target-item-color: #f2f20d;\n\t--target-quick-delete-button-color: #b00;\n    draggable-window {\n        --header-background-color: rgb(49, 49, 49);\n        --header-color: rgb(210, 210, 210);\n        --header-button-background-color: hsl(220, 30%, 40%);\n        --header-button-hover-background-color: hsl(220, 30%, 32.5%);\n        --header-button-active-background-color: hsl(220, 30%, 27.5%);\n        --header-button-color: rgb(210, 210, 210);\n        --header-button-border-color: hsl(220, 16%, 17%);\n        --content-background-color: rgb(33, 33, 33);\n        --shadow-color: #000;\n    }\n\tcolor-spectrum, hue-slider {\n\t\t--dot-border-color: rgb(220, 220, 220);\n\t}\n    --update-button-highlight-color: #4566AB;\n    --trigger-action-hovered-color: rgb(33, 15, 15);\n    --trigger-action-selected-color: rgb(60, 15, 15);\n    --trigger-action-dragged-brightness: 0.6;\n    --tab-view-separator-color: rgb(97, 97, 97);\n    --tab-label-background-color: rgb(77, 77, 77);\n    --tab-label-hover-background-color: rgb(61, 61, 61);\n    --tab-label-select-background-color: rgb(45, 45, 45);\n    --tab-label-text-color: #fff;\n    --tab-label-info-color: #eee;\n    --params-table-cell-border-color: rgb(112, 112, 112);\n    --params-table-header-background-color: rgb(41, 41, 41);\n    --params-table-odd-row-background-color: rgb(75, 75, 75);\n    --params-table-even-row-background-color: rgb(58, 58, 58);\n    --params-table-row-hover-background-color: rgb(49, 49, 49);\n}\n\n.alei-sage-theme {\n    --settings-menu-label-background-color: #1d1d1d;\n    --settings-menu-label-color: #bbb;\n    --settings-menu-button-background-color: #333;\n    --settings-menu-button-border-color: #333;\n    --settings-menu-button-color: #999;\n    --settings-menu-button-hover-background-color: #444;\n    --settings-menu-button-hover-color: #ccc;\n    --settings-menu-button-clicked-background-color: #666;\n    --settings-menu-button-clicked-color: #ddd;\n    --comment-background-color: #161616;\n    --comment-border-color: #202020;\n    --comment-color: #808080;\n    --comment-adder-button-color: #808080;\n    --comment-remover-button-color: hsl(0, 90%, 35%);\n    --param-side-button-background-color: #202020;\n    --param-side-button-hover-background-color: #303030;\n    --param-side-button-active-background-color: #404040;\n    --gui-render-info-color: #FFFFFFD0;\n    --draggable-window-text-color: #d2d2d2;\n\t--select-indicator-color: hsl(120, 75%, 30%);\n\t--dropdown-background-color: rgb(150, 150, 150);\n\t--dropdown-opener-border-color: rgb(95, 95, 95);\n\t--dropdown-item-color: #000;\n\t--dropdown-arrow-color: rgb(14, 14, 14);\n\t--color-text-input-background-color: rgb(60, 60, 60);\n\t--color-text-input-color: rgb(220, 220, 220);\n\t--selectable-target-item-hover-color: rgb(85, 85, 85);\n\t--selected-target-item-color: #f2f20d;\n\t--target-quick-delete-button-color: #b00;\n    draggable-window {\n        --header-background-color: rgb(49, 49, 49);\n        --header-color: rgb(210, 210, 210);\n        --header-button-background-color: hsl(107, 29%, 38%);\n        --header-button-hover-background-color: hsl(107, 29%, 30.5%);\n        --header-button-active-background-color: hsl(107, 29%, 25.5%);\n        --header-button-color: rgb(210, 210, 210);\n        --header-button-border-color: hsl(220, 16%, 17%);\n        --content-background-color: rgb(33, 33, 33);\n        --shadow-color: #000;\n    }\n\tcolor-spectrum, hue-slider {\n\t\t--dot-border-color: rgb(220, 220, 220);\n\t}\n    --update-button-highlight-color: #517e45;\n    --trigger-action-hovered-color: #181f16;\n    --trigger-action-selected-color: #273b21;\n    --trigger-action-dragged-brightness: 0.6;\n    --tab-view-separator-color: rgb(97, 97, 97);\n    --tab-label-background-color: rgb(77, 77, 77);\n    --tab-label-hover-background-color: rgb(61, 61, 61);\n    --tab-label-select-background-color: rgb(45, 45, 45);\n    --tab-label-text-color: #fff;\n    --tab-label-info-color: #eee;\n    --params-table-cell-border-color: rgb(112, 112, 112);\n    --params-table-header-background-color: rgb(41, 41, 41);\n    --params-table-odd-row-background-color: rgb(75, 75, 75);\n    --params-table-even-row-background-color: rgb(58, 58, 58);\n    --params-table-row-hover-background-color: rgb(49, 49, 49);\n}\n\n.alei-oeda-theme {\n    --settings-menu-label-background-color: #1d1d1d;\n    --settings-menu-label-color: #bbb;\n    --settings-menu-button-background-color: #333;\n    --settings-menu-button-border-color: #333;\n    --settings-menu-button-color: #999;\n    --settings-menu-button-hover-background-color: #444;\n    --settings-menu-button-hover-color: #ccc;\n    --settings-menu-button-clicked-background-color: #666;\n    --settings-menu-button-clicked-color: #ddd;\n    --comment-background-color: #161616;\n    --comment-border-color: #202020;\n    --comment-color: #808080;\n    --comment-adder-button-color: #808080;\n    --comment-remover-button-color: hsl(0, 90%, 35%);\n    --param-side-button-background-color: #202020;\n    --param-side-button-hover-background-color: #303030;\n    --param-side-button-active-background-color: #404040;\n    --gui-render-info-color: #FFFFFFD0;\n    --draggable-window-text-color: #d2d2d2;\n\t--select-indicator-color: hsl(120, 75%, 30%);\n\t--dropdown-background-color: rgb(150, 150, 150);\n\t--dropdown-opener-border-color: rgb(95, 95, 95);\n\t--dropdown-item-color: #000;\n\t--dropdown-arrow-color: rgb(14, 14, 14);\n\t--color-text-input-background-color: rgb(60, 60, 60);\n\t--color-text-input-color: rgb(220, 220, 220);\n\t--selectable-target-item-hover-color: rgb(85, 85, 85);\n\t--selected-target-item-color: #f2f20d;\n\t--target-quick-delete-button-color: #b00;\n    draggable-window {\n        --header-background-color: rgb(49, 49, 49);\n        --header-color: rgb(210, 210, 210);\n        --header-button-background-color: hsl(295, 46%, 72%);\n        --header-button-hover-background-color: hsl(297, 45%, 70%);\n        --header-button-active-background-color: hsl(295, 39%, 64%);\n        --header-button-color: rgb(255,255,255);\n        --header-button-border-color: hsl(220, 16%, 17%);\n        --content-background-color: rgb(33, 33, 33);\n        --shadow-color: #000;\n    }\n\tcolor-spectrum, hue-slider {\n\t\t--dot-border-color: rgb(220, 220, 220);\n\t}\n    --update-button-highlight-color: #d295d8;\n    --trigger-action-hovered-color: #d295d860;\n    --trigger-action-selected-color: #d295d8a0;\n    --trigger-action-dragged-brightness: 0.6;\n    --tab-view-separator-color: rgb(97, 97, 97);\n    --tab-label-background-color: rgb(77, 77, 77);\n    --tab-label-hover-background-color: rgb(61, 61, 61);\n    --tab-label-select-background-color: rgb(45, 45, 45);\n    --tab-label-text-color: #fff;\n    --tab-label-info-color: #eee;\n    --params-table-cell-border-color: rgb(112, 112, 112);\n    --params-table-header-background-color: rgb(41, 41, 41);\n    --params-table-odd-row-background-color: rgb(75, 75, 75);\n    --params-table-even-row-background-color: rgb(58, 58, 58);\n    --params-table-row-hover-background-color: rgb(49, 49, 49);\n}\n\n.alei-crossfire-theme {\n    --settings-menu-label-background-color: #0a0b0c;\n    --settings-menu-label-color: #bbb;\n    --settings-menu-button-background-color: #0a0b0c;\n    --settings-menu-button-border-color: #333;\n    --settings-menu-button-color: #999;\n    --settings-menu-button-hover-background-color: #5ba35e40;\n    --settings-menu-button-hover-color: #ccc;\n    --settings-menu-button-clicked-background-color: #5ba35e;\n    --settings-menu-button-clicked-color: #ddd;\n    --comment-background-color: #0a0b0c;\n    --comment-border-color: #0a0b0c;\n    --comment-color: #808080;\n    --comment-adder-button-color: #808080;\n    --comment-remover-button-color: hsl(0, 90%, 35%);\n    --param-side-button-background-color: #202020;\n    --param-side-button-hover-background-color: #303030;\n    --param-side-button-active-background-color: #404040;\n    --gui-render-info-color: #FFFFFFD0;\n    --draggable-window-text-color: #d2d2d2;\n\t--select-indicator-color: hsl(120, 75%, 30%);\n\t--dropdown-background-color: rgb(150, 150, 150);\n\t--dropdown-opener-border-color: rgb(95, 95, 95);\n\t--dropdown-item-color: #000;\n\t--dropdown-arrow-color: rgb(14, 14, 14);\n\t--color-text-input-background-color: rgb(60, 60, 60);\n\t--color-text-input-color: rgb(220, 220, 220);\n\t--selectable-target-item-hover-color: rgb(85, 85, 85);\n\t--selected-target-item-color: #f2f20d;\n\t--target-quick-delete-button-color: #b00;\n    draggable-window {\n        --header-background-color: #262a2e;\n        --header-color: #FFFFFFD0;\n        --header-button-background-color: #5ba35e;\n        --header-button-hover-background-color: #48864a;\n        --header-button-active-background-color: #48864a80;\n        --header-button-color: rgb(255, 255, 255);\n        --header-button-border-color: #93FD98;\n        --content-background-color: #191c1f;\n        --shadow-color: #000;\n    }\n\tcolor-spectrum, hue-slider {\n\t\t--dot-border-color: rgb(220, 220, 220);\n\t}\n    --update-button-highlight-color: #5ba35e;\n    --trigger-action-hovered-color: #5ba35e40;\n    --trigger-action-selected-color: #5ba35e80;\n    --trigger-action-dragged-brightness: 0.6;\n    --tab-view-separator-color: #40454b;\n    --tab-label-background-color: #40454b;\n    --tab-label-hover-background-color: #31353a;\n    --tab-label-select-background-color: #0f1113;\n    --tab-label-text-color: #fff;\n    --tab-label-info-color: #eee;\n    --params-table-cell-border-color: #262a2e;\n    --params-table-header-background-color: #262a2e;\n    --params-table-odd-row-background-color: #40454b;\n    --params-table-even-row-background-color: #31353a;\n    --params-table-row-hover-background-color: #262a2e;\n}",""]);const s=i},3569:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});const o={head:{sx:21,sy:5,sw:459,sh:267},body:{sx:489,sy:5,sw:351,sh:303},lowerLeg:{sx:849,sy:5,sw:187,sh:211},upperArm:{sx:849,sy:225,sw:167,sh:215},upperLeg:{sx:1045,sy:5,sw:243,sh:247},pelvis:{sx:1045,sy:261,sw:155,sh:139},foreArm:{sx:1297,sy:5,sw:215,sh:263},foot:{sx:1297,sy:277,sw:187,sh:163},psi:{sx:1521,sy:5,sw:319,sh:455}},r={none:{drawOrder:["foot","upperLeg","lowerLeg","pelvis","body","head","upperArm","psi","foreArm"],parts:{head:{x:0,y:0,deg:0,sprite:"head"},body:{x:0,y:0,deg:0,sprite:"body"},pelvis:{x:0,y:0,deg:0,sprite:"pelvis"},upperLeg:{x:0,y:0,deg:0,sprite:"upperLeg"},lowerLeg:{x:0,y:0,deg:0,sprite:"lowerLeg"},foot:{x:0,y:0,deg:0,sprite:"foot"},upperArm:{x:0,y:0,deg:0,sprite:"upperArm"},foreArm:{x:0,y:0,deg:0,sprite:"foreArm"},psi:{x:0,y:0,deg:0,sprite:"psi"}}},standing:{drawOrder:["upperArmLeft","psiLeft","foreArmLeft","footLeft","upperLegLeft","lowerLegLeft","pelvis","body","footRight","upperLegRight","lowerLegRight","head","upperArmRight","psiRight","foreArmRight"],parts:{head:{x:13,y:-20,deg:0,sprite:"head"},body:{x:-60,y:43,deg:5,sprite:"body"},pelvis:{x:57,y:223,deg:5,sprite:"pelvis"},upperLegLeft:{x:-15,y:196,deg:-15.5,sprite:"upperLeg"},lowerLegLeft:{x:63,y:257,deg:8,sprite:"lowerLeg"},footLeft:{x:54,y:301,deg:-3.5,sprite:"foot"},upperLegRight:{x:-27.5,y:188,deg:0,sprite:"upperLeg"},lowerLegRight:{x:35,y:255,deg:22.5,sprite:"lowerLeg"},footRight:{x:18,y:300,deg:7,sprite:"foot"},upperArmLeft:{x:45,y:99,deg:1,sprite:"upperArm"},foreArmLeft:{x:-6,y:185,deg:7.5,sprite:"foreArm"},psiLeft:{x:-14,y:106,deg:7.5,sprite:"psi"},upperArmRight:{x:46,y:101,deg:-6.5,sprite:"upperArm"},foreArmRight:{x:22,y:192.5,deg:-10,sprite:"foreArm"},psiRight:{x:16,y:100,deg:-10,sprite:"psi"}}}},a={};function i(e){let t;if("string"==typeof e&&"c"===e.charAt(0)?t=`/mimage_cache.php?image_id=${e.slice(1)}`:(t=`/mimage_cache.php?image_id=${e}`,e="c"+e),CACHED_CHARS[e]?.loaded)return Promise.resolve(CACHED_CHARS[e]);if(e in a)return a[e];CACHED_CHARS[e]=new Image,CACHED_CHARS[e].loaded=!1,CACHED_CHARS[e].native=!1;const n=new Image;return CACHED_CHARS[e].spriteSheet=n,CACHED_CHARS[e].charJSON=null,a[e]=new Promise(((o,r)=>{n.src=t,n.onload=()=>o(n),n.onerror=()=>r(new Error(`Failed to load spritesheet ${e}`))})).then((t=>(CACHED_CHARS[e].spriteSheet=t,CACHED_CHARS[e].charJSON=function(e){const t=function(e,t,n,o,r){const a=document.createElement("canvas");a.width=o,a.height=r;const i=a.getContext("2d");return i.globalCompositeOperation="copy",i.drawImage(e,t,n,o,r,0,0,o,r),i.getImageData(0,0,o,r)}(e,0,0,16,128);let n="";t.data.forEach(((e,t)=>{t%4!=3&&(n+=e>127?"1":"0")}));let o="";for(let e=0;e<n.length;e+=8){const t=n.slice(e,e+8),r=parseInt(t,2);if(0===r)break;o+=String.fromCharCode(r)}try{return JSON.parse(o)}catch(e){return console.warn("Failed to parse json. It's probably invalid or not included.\n",e,"\nInput:",o),null}}(t),async function(e,t){const n=document.createElement("canvas");n.width=220,n.height=260;const a=n.getContext("2d");a.scale(.5,.5);const i=isNaN(t.swords)?0:parseInt(t.swords);for(const t of r.standing.drawOrder){const{x:n,y:s,deg:l,sprite:c}=r.standing.parts[t],{sx:d,sy:_,sw:u,sh:m}=o[c];a.save(),a.translate(n+u/2,s+m/2),a.rotate(l*Math.PI/180),"psi"===c&&(a.globalCompositeOperation="lighter",1===i?a.globalCompositeOperation="source-over":2===i&&(a.globalCompositeOperation="multiply")),a.drawImage(e,d,_,u,m,-u/2,-m/2,u,m),a.restore()}const s=await new Promise((e=>n.toBlob(e)));return null===s?"":URL.createObjectURL(s)}(t,CACHED_CHARS[e].charJSON)))).then((t=>(CACHED_CHARS[e].src=t,CACHED_CHARS[e].loaded=!0,delete a[e],CACHED_CHARS[e]))).catch((t=>(console.error(t),delete a[e],CACHED_CHARS[e]))),a[e]}},3797:(e,t,n)=>{"use strict";n.d(t,{PZ:()=>a,UM:()=>s,V4:()=>i,Wm:()=>c,_f:()=>_});var o=n(3987);const r=!1;let a=new Map;function i(){a=new Map,es.forEach(l)}function s(e){e.forEach(l),(0,o.Md)(o.dm.VERBOSE,"addEntitiesToUIDMap called"),r&&u("addEntitiesToUIDMap")}function l(e){null!=e.pm.uid&&d(e,e.pm.uid.toString())}function c(e,t,n){!function(e,t){if(a.has(t)){const n=a.get(t);n.delete(e),0===n.size&&a.delete(t)}}(e,t),d(e,n),(0,o.Md)(o.dm.VERBOSE,"updateUIDMap called"),r&&u("updateUIDMap")}function d(e,t){a.has(t)||a.set(t,new Set),a.get(t).add(e)}function _(){a.clear()}function u(e){const t=function(){const e=a;i();const t=a;return a=e,{valid:m(e,t),originalMap:e,correctMap:t}}();return t.valid||((0,o.Md)(o.dm.WARN,`uid map error (source: ${e})`,"\noriginal map:",t.originalMap,"\ncorrect map:",t.correctMap,"\nThe effects of this error were fixed automatically."),a=t.correctMap),t.valid}function m(e,t){if(e.size!==t.size)return!1;for(const n of e.keys()){if(!t.has(n))return!1;const o=e.get(n),r=t.get(n);if(o.size!==r.size)return!1;for(const e of o)if(!r.has(e))return!1}return!0}unsafeWindow.updateUIDMap=c,unsafeWindow.getUIDMap=()=>a,unsafeWindow.validateUIDMap=()=>{u("console")&&(0,o.Md)(o.dm.INFO,"UID map is correct")}},3987:(e,t,n)=>{"use strict";n.d(t,{Dk:()=>i,Md:()=>d,Sj:()=>a,dm:()=>r,oH:()=>l});var o=n(2946);const r={INFO:0,DEBUG:1,VERBOSE:2,WARN:-1,SWARN:-2},a="[0m",i="[93m",s="[92m",l="[96m",c={0:`${l}INFO${a}`,1:`${s}DEBUG${a}`,2:`${s}VERBOSE${a}`};function d(e,...t){e<=r.WARN?(console.warn("[ALEI:WARNING]:",...t),e===r.WARN&&NewNote("ALEI: Please check console.","#FFFF00")):e<=o.F.logLevel&&console.log(`[${s}ALEI:${c[e]}]:`,...t)}},4161:(e,t,n)=>{"use strict";n.d(t,{Db:()=>u,Fd:()=>m,Gg:()=>d,gI:()=>_});var o=n(7163);const r="//",a=16.5;let i,s=null;const l=new ResizeObserver((()=>{clearTimeout(s),s=setTimeout(c,200)}));function c(){s=null;const e=document.getElementById("rparams");if(null!==e){const t=e.querySelectorAll(".alei-comment-box");for(const e of t){const t=e.querySelector(".alei-comment-box__prefix"),n=e.querySelector(".alei-comment-box__text-area");g(n),p(n,t)}}}function d(e){i=e}function _(e){l.disconnect(),l.observe(e)}function u(e){const t=document.createElement("span");t.classList.add("alei-comment-box__text-element","alei-comment-box__prefix");const n=document.createElement("textarea");n.classList.add("alei-comment-box__text-element","alei-comment-box__text-area"),n.setAttribute("autocomplete","off"),n.setAttribute("autocorrect","off"),n.setAttribute("spellcheck","false");const r=document.createElement("div");r.className="alei-comment-box",r.setAttribute("position",e),r.appendChild(t),r.appendChild(n),n.addEventListener("input",function(){let e;const o=i;return function(){e&&clearTimeout(e),e=setTimeout((()=>{b(r,o)}),1e3),function(e,t){g(e),p(e,t)}(n,t)}}()),n.addEventListener("focusout",function(){const e=i;return()=>{b(r,e)}}());const a=(0,o.rw)(i,r.getAttribute("position"));return n.value=a,r}function m(e){const t=e.querySelector(".alei-comment-box__prefix"),n=e.querySelector(".alei-comment-box__text-area");g(n),p(n,t)}function g(e){e.style.height="auto",e.style.height=e.scrollHeight}function p(e,t){const n=Math.floor(e.scrollHeight/a);let o=`${r}\n`.repeat(n);o=o.slice(0,-1),t.textContent=o}function b(e,t){const n=e.getAttribute("position"),r=e.querySelector(".alei-comment-box__text-area").value;(0,o.Ah)(t,n,r)}},4168:(e,t,n)=>{"use strict";let o;n.d(t,{AL:()=>h,IE:()=>b,Zt:()=>f});const r=document.createElement("div");let a,i,s,l;r.className="alei-param-side-buttons-container";const c=new ResizeObserver((()=>{l!==o.scrollHeight&&(l=o.scrollHeight,y())})),d=new MutationObserver((e=>{for(const t of e){for(const e of t.removedNodes)e.nodeType===Node.ELEMENT_NODE&&c.unobserve(e);for(const e of t.addedNodes)e.nodeType!==Node.ELEMENT_NODE||e.classList.contains("alei-param-side-buttons-container")||c.observe(e);l=o.scrollHeight,y()}}));let _,u,m,g={},p={};function b(e,t,n,o,r,i,s,l=null){const c=function(e,t,n,o){const r=document.createElement("button");return r.classList.add("alei-param-side-button",t),r.textContent=n,r.title=o,r.addEventListener("click",(()=>function(e){if(!a)return;const t={selectionData:_,elements:u,item:m};"trigger actions"==p[_._class][m].type&&(t.actionNum=M(u[0])),g[e].clickFunction(t),y()}(e))),r}(e,t,n,o);g[e]={element:c,clickFunction:r,allowMultipleSelection:s,visibilityCondition:l};for(const t in i){void 0===p[t]&&(p[t]={});for(const n in i[t]){const o=i[t][n].type;void 0===p[t][n]?p[t][n]={type:o,buttons:[e]}:p[t][n].buttons.push(e)}}}function h(){c.disconnect(),d.disconnect(),o=null}function f(e){h(),o=e;for(const e of o.children)c.observe(e);d.observe(o,{childList:!0}),_=function(){let e=[],t=!1,n=null;for(const o of es)o.exists&&o.selected&&(e.push(o),null===n?n=o._class:n!=o._class&&(t=!0));return{objs:e,mixed:t,_class:t?null:n}}(),_.mixed||void 0===p[_._class]||(a=!1,o.addEventListener("mousemove",v),o.addEventListener("mouseleave",w),o.appendChild(r))}function v(e){a=!0,i=e.clientX,s=e.clientY,y()}function w(){a=!1,A()}function y(){const{elements:e,item:t}=function(){if(a)for(const e in p[_._class]){let t;switch(p[_._class][e].type){case"param":t=E;break;case"elements":t=x;break;case"trigger actions":t=k}for(const n of t(e)){const t=n[0].getBoundingClientRect().top,o=n.reduce(((e,t)=>e+t.offsetHeight),0);if(t<=s&&s<=t+o)return{elements:n,item:e}}}return{elements:[],item:null}}();if(u=e,m=t,A(),null===t)return;const n=e[0].getBoundingClientRect().top,i=e.reduce(((e,t)=>e+t.offsetHeight),0),l=o.getBoundingClientRect();r.style.top=n-l.top+o.scrollTop,r.style.height=i,r.classList.add("alei-param-side-buttons-container--visible");let c=[];for(const e of p[_._class][t].buttons){const t=g[e].allowMultipleSelection;_.objs.length>1&&!t||C(e)&&c.push(e)}!function(e){for(const t of e){const e=g[t].element;r.appendChild(e)}}(c)}function*E(e){yield[o.querySelector("#pm_"+e).parentElement]}function*x(e){for(const t of o.querySelectorAll(e))yield[t]}function*k(e){const t=o.getElementsByClassName("trigger-action");for(const e of t)yield[e]}function A(){for(const e of r.children)e.remove();r.classList.remove("alei-param-side-buttons-container--visible")}function C(e){const t=g[e].visibilityCondition;if(null===t)return!0;const n={selectionData:_,elements:u,item:m};return"trigger actions"==p[_._class][m].type&&(n.actionNum=M(u[0])),t(n)}const M=function(){const e=/^pm_actions_(\d+)_type$/;return function(t){if(!t.classList.contains("trigger-action"))return null;const n=t.firstElementChild?.children[1]?.id.match(e)??null;return null===n?null:n[1]}}()},4750:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(1601),r=n.n(o),a=n(6314),i=n.n(a)()(r());i.push([e.id,".tab-view-container {\n    display: flex;\n    height: 100%;\n    flex-direction: column;\n}\n\n.tablist {\n    border-bottom: 2px solid var(--tab-view-separator-color);\n    padding-bottom: 10px;\n    flex-shrink: 0;\n    display: flex;\n    justify-content: space-between;\n    gap: 10px;\n}\n\n.tab-label {\n    padding: 5px 10px 5px 5px;\n    font-size: 14px;\n    height: 25px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    flex-grow: 1;\n    background-color: var(--tab-label-background-color);\n    border-radius: 8px;\n    min-width: 0;\n    gap: 5px;\n    cursor: pointer;\n}\n\n.tab-label:hover {\n    background-color: var(--tab-label-hover-background-color);\n}\n\n.tab-label:active {\n    background-color: var(--tab-label-select-background-color)\n}\n\n.tab-label--selected, .tab-label--selected:hover {\n    background-color: var(--tab-label-select-background-color);\n    cursor: default;\n}\n\n.tab-label-text {\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space: nowrap;\n    min-width: 0;\n    display: flex;\n    gap: 5px;\n    color: var(--tab-label-text-color);\n}\n\n.tab-label-icon-container {\n    display: inline-flex;\n    width: 15px;\n    justify-content: center;\n}\n\n.tab-label-info {\n    color: var(--tab-label-info-color);\n}\n\n.tabpanel {\n    padding-top: 10px;\n    font-size: 14px;\n    min-height: 0;\n}\n\n.tab-text {\n    margin: auto;\n    text-align: center;\n}\n\n\n.basic-tab {\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    overflow: auto;\n    height: 100%;\n    padding: 0 10px;\n}\n\n.hidden-tab {\n    display: none;\n}\n\n.requirement-text {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n}\n\n.params-table {\n    border-collapse: collapse;\n    table-layout: auto;\n}\n\n.params-table th,\n.params-table td {\n    border-bottom: 2px solid var(--params-table-border-color);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    min-width: 50px;\n    max-width: 100px;\n    font-size: 12px;\n    padding: 5px 10px;\n    text-align: left;\n    user-select: none;\n}\n\n.params-table th {\n    font-weight: normal;\n}\n\n.params-table thead tr {\n    background-color: var(--params-table-header-background-color);\n}\n\n.params-table tbody tr:nth-child(odd) {\n    background-color: var(--params-table-odd-row-background-color);\n}\n\n.params-table tbody tr:nth-child(even) {\n    background-color: var(--params-table-even-row-background-color);\n}\n\n.params-table tbody tr:hover {\n    background-color: var(--params-table-row-hover-background-color);\n}\n\n.params-table tbody tr:hover td {\n    cursor: pointer;\n}",""]);const s=i},4868:e=>{"use strict";e.exports=function(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}},4948:(e,t,n)=>{"use strict";n.d(t,{j:()=>a});const o=99,r=363;function a(){i(es.filter((e=>e.exists&&"trigger"===e._class&&e.pm.extended&&e.extendedAndParsed)))}function i(e){for(const t of e)c(t,l(t,s(t))),d(t)}function s(e){const t=Math.max(e.pm.totalNumOfActions??100),n=new Array(t);let o=0;for(let t=1;t<=100;t++)n[o++]={type:e.pm[`actions_${t}_type`],targetA:e.pm[`actions_${t}_targetA`],targetB:e.pm[`actions_${t}_targetB`]};for(let r=0;r<t-100;r++)n[o++]={type:e.pm.additionalActions[r],targetA:e.pm.additionalParamA[r],targetB:e.pm.additionalParamB[r]};return n}function l(e,t){const n=Math.ceil(t.length/99)-1,o=new Array(n);let r=e.pm.x,a=e.pm.y+20,i=99;for(let s=0;s<n;s++){const n=new E("trigger");n.pm.uid=`${e.pm.uid}'s extended trigger no: ${s}.`,n.pm.x=r,n.pm.y=a,n.pm.maxcalls=-1;for(let e=1;e<=99;e++){const o=t[i++];if(!o)break;n.pm[`actions_${e}_type`]=o.type,n.pm[`actions_${e}_targetA`]=o.targetA,n.pm[`actions_${e}_targetB`]=o.targetB}o[s]=n,es.push(n),r+=5}return o}function c(e,t){if(0!==t.length){e.pm.actions_100_type=o,e.pm.actions_100_targetA=t[0].pm.uid;for(let e=0;e<t.length-1;e++)t[e].pm.actions_100_type=r,t[e].pm.actions_100_targetA=t[e+1].pm.uid}}function d(e){delete e.pm.additionalActions,delete e.pm.additionalParamA,delete e.pm.additionalParamB,e.extendedAndParsed=!1}unsafeWindow.compileExtendedTriggers=i},5022:(e,t,n)=>{"use strict";function o(e,t,n){const o=e.createShader(t);return e.shaderSource(o,n),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS)?o:(console.error(e.getShaderInfoLog(o)),e.deleteShader(o),null)}n.d(t,{q:()=>v});var r=n(1785),a=n(5332);class i{constructor(e){if(this.canvas=e,this.gl=e.getContext("webgl2",{preserveDrawingBuffer:!0,antialias:!1}),!this.gl&&(this.gl=e.getContext("webgl",{preserveDrawingBuffer:!0,antialias:!1}),!this.gl))return console.error("WebGL not supported"),void NewNote("The color selector won't work because WebGL is not supported in your browser. Try updating your browser.",note_bad);const t=this.gl;this.currentHue=0,this.resizeObserver=new ResizeObserver((e=>{for(let t of e)t.target===this.canvas&&this.updateCanvasSize()})),this.resizeObserver.observe(this.canvas);const n=o(t,t.VERTEX_SHADER,r),i=o(t,t.FRAGMENT_SHADER,a);this.program=function(e,t,n){const o=e.createProgram();return e.attachShader(o,t),e.attachShader(o,n),e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS)?o:(console.error(e.getProgramInfoLog(o)),e.deleteProgram(o),null)}(t,n,i),this.hueUniformLocation=t.getUniformLocation(this.program,"hue");const s=new Float32Array([-1,-1,1,-1,-1,1,1,1]),l=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,s,t.STATIC_DRAW);const c=t.getAttribLocation(this.program,"in_position");t.vertexAttribPointer(c,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(c)}draw(e){this.gl.useProgram(this.program),this.gl.uniform1f(this.hueUniformLocation,e),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.currentHue=e}readPixelRGB(e,t){let n=Math.floor(this.gl.drawingBufferWidth*(e/this.canvas.clientWidth)),o=Math.floor(this.gl.drawingBufferHeight*(t/this.canvas.clientHeight));o=this.gl.drawingBufferHeight-1-o;const r=new Uint8Array(4);return this.gl.readPixels(n,o,1,1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,r),{red:r[0],green:r[1],blue:r[2]}}updateCanvasSize(){this.canvas.width===this.canvas.clientWidth&&this.canvas.height===this.canvas.clientHeight||(this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight,this.gl.viewport(0,0,this.canvas.width,this.canvas.height),unsafeWindow.requestAnimationFrame((()=>this.draw(this.currentHue))))}checkCorners(){const e=this.gl.drawingBufferWidth-1,t=this.gl.drawingBufferHeight-1;let n=new Uint8Array(4);this.gl.readPixels(0,0,1,1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n),console.log(`bottom left: (${n[0]}, ${n[1]}, ${n[2]})`),this.gl.readPixels(0,t,1,1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n),console.log(`top left: (${n[0]}, ${n[1]}, ${n[2]})`),this.gl.readPixels(e,0,1,1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n),console.log(`bottom right: (${n[0]}, ${n[1]}, ${n[2]})`),this.gl.readPixels(e,t,1,1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n),console.log(`top right: (${n[0]}, ${n[1]}, ${n[2]})`)}}function s(e){let t=e.red.toString(16),n=e.green.toString(16),o=e.blue.toString(16);return 1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),1==o.length&&(o="0"+o),"#"+t+n+o}function l(e){const t=parseInt(e.substring(1),16);return{red:t>>16&255,green:t>>8&255,blue:255&t}}function c(e){let t,n=e.red/255,o=e.green/255,r=e.blue/255,a=Math.max(n,o,r),i=a-Math.min(n,o,r);return 0==i?t=0:a==n?t=(o-r)/i%6*60:a==o?t=60*((r-n)/i+2):a==r&&(t=60*((n-o)/i+4)),t<0&&(t+=360),t}function d(e){const t=e.red/255,n=e.green/255,o=e.blue/255;let r,a,i=Math.max(t,n,o),s=Math.min(t,n,o),l=i,c=i-s;if(a=0==i?0:c/i,i==s)r=0;else{switch(i){case t:r=(n-o)/c+(n<o?6:0);break;case n:r=(o-t)/c+2;break;case o:r=(t-n)/c+4}r*=60}return{hue:r,saturation:a,value:l}}const _=document.createElement("template");_.innerHTML='\n    <style>\n        :host {\n            --border-radius: 0;\n            --dot-border-color: #fff;\n            --dot-diameter: 10px;\n            --dot-border-width: 2px;\n            display: block;\n            position: relative;\n            width: 100%;\n            height: 100%;\n        }\n\n        canvas {\n            display: block;\n            width: 100%;\n            height: 100%;\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n            border-radius: var(--border-radius);\n        }\n\n        .selection-dot {\n            position: absolute;\n            display: block;\n            width: var(--dot-diameter);\n            height: var(--dot-diameter);\n            border: var(--dot-border-width) solid var(--dot-border-color);\n            border-radius: 50%;\n            pointer-events: none;\n        }\n\n        .selection-dot--hidden {\n            display: none;\n        }\n    </style>\n\n    <canvas>WebGL is not supported in your browser.</canvas>\n    <div class="selection-dot"></div>\n';class u extends HTMLElement{canvas;selectionDot;glHandler;selectedColor={red:128,green:128,blue:128};hue;currentX=0;currentY=0;dragged=!1;outputFormat="rgb";hideDot=!1;transparentDot=!1;updateSelectionOnHueChange=!1;documentMouseMoveBound;documentMouseUpBound;resizeObserver;static observedAttributes=["data-output-format","data-hide-dot","data-transparent-dot","data-update-selection-on-hue-change"];constructor(){super(),this.hue=c(this.selectedColor),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(_.content.cloneNode(!0)),this.canvas=this.shadowRoot.querySelector("canvas"),this.selectionDot=this.shadowRoot.querySelector(".selection-dot"),this.glHandler=new i(this.canvas),this.canvas.addEventListener("mousedown",(e=>this.canvasMouseDown(e))),this.documentMouseMoveBound=this.documentMouseMove.bind(this),this.documentMouseUpBound=this.documentMouseUp.bind(this),this.resizeObserver=new ResizeObserver((()=>{this.updateCurrentPosition(),this.updateSelectionDot()}))}connectedCallback(){document.addEventListener("mousemove",this.documentMouseMoveBound),document.addEventListener("mouseup",this.documentMouseUpBound),this.resizeObserver.observe(this),this.resizeObserver.observe(this.selectionDot,{box:"border-box"}),this.redraw(),this.updateCurrentPosition(),this.updateSelectionDot()}disconnectedCallback(){document.removeEventListener("mousemove",this.documentMouseMoveBound),document.removeEventListener("mouseup",this.documentMouseUpBound),this.resizeObserver.disconnect()}attributeChangedCallback(e,t,n){switch(e){case"data-output-format":this.outputFormat=n||"rgb";break;case"data-hide-dot":this.hideDot=this.hasAttribute("data-hide-dot"),this.hideDot?this.selectionDot.classList.add("selection-dot--hidden"):this.selectionDot.classList.remove("selection-dot--hidden");break;case"data-transparent-dot":this.transparentDot=this.hasAttribute("data-transparent-dot"),this.transparentDot?this.selectionDot.style.backgroundColor="transparent":this.updateSelectionDot();case"data-update-selection-on-hue-change":this.updateSelectionOnHueChange=this.hasAttribute("data-update-selection-on-hue-change")}}canvasMouseDown(e){0===e.button&&(this.dragged=!0,this.dispatchEvent(new Event("dragselectstart",{bubbles:!0,composed:!0})),this.currentX=e.offsetX,this.currentY=e.offsetY,this.updateSelectedColor())}documentMouseMove(e){if(this.dragged){const t=this.canvas.getBoundingClientRect();let n=e.clientX-t.left,o=e.clientY-t.top;const r=0,a=this.canvas.clientWidth-1,i=0,s=this.canvas.clientHeight-1;n=Math.max(r,Math.min(n,a)),o=Math.max(i,Math.min(o,s)),this.currentX=n,this.currentY=o,this.updateSelectedColor()}}documentMouseUp(e){0===e.button&&this.dragged&&(this.dragged=!1,this.dispatchEvent(new Event("dragselectend",{bubbles:!0,composed:!0})))}updateSelectedColor(){const e=this.glHandler.readPixelRGB(this.currentX,this.currentY);let t;switch(this.selectedColor.red=e.red,this.selectedColor.green=e.green,this.selectedColor.blue=e.blue,this.outputFormat){case"rgb":t=this.getRGBColor();break;case"hex":t=this.getHexColor();break;default:t=void 0}this.dispatchEvent(new CustomEvent("colorinput",{detail:{color:t},bubbles:!0,composed:!0})),this.updateSelectionDot()}updateSelectionDot(){this.selectionDot.style.left=this.currentX-this.selectionDot.offsetWidth/2,this.selectionDot.style.top=this.currentY-this.selectionDot.offsetHeight/2,this.transparentDot||(this.selectionDot.style.backgroundColor=`rgb(${this.selectedColor.red}, ${this.selectedColor.green}, ${this.selectedColor.blue})`)}updateCurrentPosition(){const e=d(this.selectedColor);this.currentX=(this.clientWidth-1)*e.saturation,this.currentY=(this.clientHeight-1)*(1-e.value)}redraw(e=!1){unsafeWindow.requestAnimationFrame((()=>{this.glHandler.draw(this.hue),e&&this.updateSelectedColor()}))}getHue(){return this.hue}setHue(e){this.hue=e,this.redraw(this.updateSelectionOnHueChange)}getRGBColor(){return{...this.selectedColor}}setRGBColor(e){this.selectedColor={...e},this.hue=c(this.selectedColor),this.redraw(),this.updateCurrentPosition(),this.updateSelectionDot()}getHexColor(){return s(this.selectedColor)}setHexColor(e){this.selectedColor=l(e),this.hue=c(this.selectedColor),this.redraw(),this.updateCurrentPosition(),this.updateSelectionDot()}}customElements.define("color-spectrum",u);const m=document.createElement("template");m.innerHTML='\n    <style>\n        :host {\n            --thickness: 10px;\n            --border-radius: 8px;\n            --dot-center-color: #000;\n            --dot-border-color: #fff;\n            --dot-diameter: 6px;\n            --dot-width: var(--dot-diameter);\n            --dot-height: var(--dot-diameter);\n            --dot-border-width: 2px;\n            --dot-border-radius: 50%;\n            display: block;\n            position: relative;\n            border-radius: var(--border-radius);\n            width: auto;\n            height: var(--thickness);\n            background: linear-gradient(to right,\n                                        hsl(0, 100%, 50%),\n                                        hsl(60, 100%, 50%),\n                                        hsl(120, 100%, 50%),\n                                        hsl(180, 100%, 50%),\n                                        hsl(240, 100%, 50%),\n                                        hsl(300, 100%, 50%),\n                                        hsl(360, 100%, 50%));\n        }\n\n        :host([data-vertical]) {\n            width: var(--thickness);\n            height: 100%; /* height: auto doesn\'t work cuz the element has no content */\n            background: linear-gradient(to bottom,\n                                        hsl(0, 100%, 50%),\n                                        hsl(60, 100%, 50%),\n                                        hsl(120, 100%, 50%),\n                                        hsl(180, 100%, 50%),\n                                        hsl(240, 100%, 50%),\n                                        hsl(300, 100%, 50%),\n                                        hsl(360, 100%, 50%));\n        }\n\n        .selection-dot {\n            position: absolute;\n            display: block;\n            width: var(--dot-width);\n            height: var(--dot-height);\n            border: var(--dot-border-width) solid var(--dot-border-color);\n            border-radius: var(--dot-border-radius);\n            background-color: var(--dot-center-color);\n            pointer-events: none;\n        }\n\n        .selection-dot--hidden {\n            display: none;\n        }\n    </style>\n\n    <div class="selection-dot"></div>\n';class g extends HTMLElement{selectionDot;selectedHue=0;dragged=!1;vertical=!1;hideDot=!1;dotCenterShowsColor=!1;dotBorderShowsColor=!1;documentMouseMoveBound;documentMouseUpBound;resizeObserver;static observedAttributes=["data-vertical","data-hide-dot","data-dot-center-shows-color","data-dot-border-shows-color"];constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(m.content.cloneNode(!0)),this.selectionDot=this.shadowRoot.querySelector(".selection-dot"),this.addEventListener("mousedown",(e=>this.sliderMouseDown(e))),this.documentMouseMoveBound=this.documentMouseMove.bind(this),this.documentMouseUpBound=this.documentMouseUp.bind(this),this.resizeObserver=new ResizeObserver((()=>this.updateSelectionDot()))}connectedCallback(){document.addEventListener("mousemove",this.documentMouseMoveBound),document.addEventListener("mouseup",this.documentMouseUpBound),this.resizeObserver.observe(this),this.resizeObserver.observe(this.selectionDot,{box:"border-box"}),this.updateSelectionDot()}disconnectedCallback(){document.removeEventListener("mousemove",this.documentMouseMoveBound),document.removeEventListener("mouseup",this.documentMouseUpBound),this.resizeObserver.disconnect()}attributeChangedCallback(e,t,n){switch(e){case"data-vertical":this.vertical=this.hasAttribute("data-vertical"),this.updateSelectionDot();break;case"data-hide-dot":this.hideDot=this.hasAttribute("data-hide-dot"),this.hideDot?this.selectionDot.classList.add("selection-dot--hidden"):this.selectionDot.classList.remove("selection-dot--hidden");break;case"data-dot-center-shows-color":this.dotCenterShowsColor=this.hasAttribute("data-dot-center-shows-color"),this.dotCenterShowsColor?this.updateSelectionDot():this.selectionDot.style.removeProperty("background-color");break;case"data-dot-border-shows-color":this.dotBorderShowsColor=this.hasAttribute("data-dot-border-shows-color"),this.dotBorderShowsColor?this.updateSelectionDot():this.selectionDot.style.removeProperty("border-color")}}sliderMouseDown(e){0===e.button&&(this.dragged=!0,this.dispatchEvent(new Event("dragselectstart",{bubbles:!0,composed:!0})),this.vertical?this.updateSelectedHue(e.offsetY):this.updateSelectedHue(e.offsetX))}documentMouseMove(e){if(this.dragged){const t=this.getBoundingClientRect();if(this.vertical){let n=e.clientY-t.top;const o=0,r=this.clientHeight-1;n=Math.max(o,Math.min(n,r)),this.updateSelectedHue(n)}else{let n=e.clientX-t.left;const o=0,r=this.clientWidth-1;n=Math.max(o,Math.min(n,r)),this.updateSelectedHue(n)}}}documentMouseUp(e){0===e.button&&this.dragged&&(this.dragged=!1,this.dispatchEvent(new Event("dragselectend",{bubbles:!0,composed:!0})))}updateSelectedHue(e){this.vertical?this.selectedHue=e/(this.clientHeight-1)*360:this.selectedHue=e/(this.clientWidth-1)*360,this.dispatchEvent(new CustomEvent("hueinput",{detail:{hue:this.selectedHue},bubbles:!0,composed:!0})),this.updateSelectionDot()}updateSelectionDot(){this.vertical?(this.selectionDot.style.top=(this.clientHeight-1)*(this.selectedHue/360)-this.selectionDot.offsetHeight/2,this.selectionDot.style.left=Math.floor((this.clientWidth-this.selectionDot.offsetWidth)/2)):(this.selectionDot.style.top=Math.floor((this.clientHeight-this.selectionDot.offsetHeight)/2),this.selectionDot.style.left=(this.clientWidth-1)*(this.selectedHue/360)-this.selectionDot.offsetWidth/2),this.dotCenterShowsColor&&(this.selectionDot.style.backgroundColor=`hsl(${this.selectedHue}, 100%, 50%)`),this.dotBorderShowsColor&&(this.selectionDot.style.borderColor=`hsl(${this.selectedHue}, 100%, 50%)`)}setSelectedHue(e){this.selectedHue=e,this.updateSelectionDot()}}customElements.define("hue-slider",g);var p=n(2133);let b=[];const h=6;class f{static title="Color picker";targetGroup;currentTextInputColorType="hex";draggableWindow;targetsMenu={};colorTextInputLabel;colorTextInput;colorTypeSelectIndicators={};colorSpectrum;hueSlider;targetsMenuOffmenuClick;colorTypeMenuOffmenuClick;constructor(e,t,n){this.targetGroup=e,this.draggableWindow=document.createElement("draggable-window"),this.draggableWindow.setAttribute("data-title",f.title),this.draggableWindow.style.left=`${t}px`,this.draggableWindow.style.top=`${n}px`,this.draggableWindow.addEventListener("windowclose",(()=>this.onWindowClosed())),this.initContent()}initContent(){this.draggableWindow.insertAdjacentHTML("beforeend",`\n            <div slot="content">\n                <div class="color-window-top-layout">\n                    <div class="color-window-top-layout__left">\n                        <p class="draggable-window-text draggable-window-paragraph">Objects to affect:</p>\n                        <div class="dropdown-container" data-id="targets menu">\n                            <div class="dropdown-opener">\n                                <div class="dropdown-item dropdown-item--small dropdown-clickable-element">\n                                    <div class="dropdown-item-label">\n                                        <div class="dropdown-item-label__left">\n                                            <span class="dropdown-item-text dropdown-item-text--small">${this.targetGroup.title}</span>\n                                        </div>\n                                        <div class="dropdown-item-label__right">\n                                            <span class="warning-indicator warning-indicator--hidden"></span>\n                                        </div>\n                                    </div>\n                                    <div class="dropdown-item-control">\n                                        <div class="dropdown-arrow-container dropdown-arrow-container--small">\n                                            <div class="dropdown-arrow"></div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="dropdown dropdown--smaller">\n                                <div class="dropdown-items-container"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="color-window-top-layout__right">\n                        <div class="color-text-input-layout">\n                            <div class="dropdown-container" data-id="color type menu">\n                                <div class="draggable-window-text color-text-input-label">HEX:</div>\n                                <div class="dropdown dropdown--small dropdown--closer">\n                                    <div class="dropdown-items-container">\n                                        <div class="dropdown-item dropdown-item--small dropdown-clickable-element" data-value="hex">\n                                            <div class="dropdown-item-label">\n                                                <div class="dropdown-item-label__left">\n                                                    <span class="dropdown-item-text dropdown-item-text--small">HEX</span>\n                                                    <span class="select-indicator"></span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class="dropdown-item dropdown-item--small dropdown-clickable-element" data-value="rgb">\n                                            <div class="dropdown-item-label">\n                                                <div class="dropdown-item-label__left">\n                                                    <span class="dropdown-item-text dropdown-item-text--small">RGB</span>\n                                                    <span class="select-indicator select-indicator--hidden"></span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class="dropdown-item dropdown-item--small dropdown-clickable-element" data-value="hsv">\n                                            <div class="dropdown-item-label">\n                                                <div class="dropdown-item-label__left">\n                                                    <span class="dropdown-item-text dropdown-item-text--small">HSV</span>\n                                                    <span class="select-indicator select-indicator--hidden"></span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class="dropdown-item dropdown-item--small dropdown-clickable-element" data-value="hsl">\n                                            <div class="dropdown-item-label">\n                                                <div class="dropdown-item-label__left">\n                                                    <span class="dropdown-item-text dropdown-item-text--small">HSL</span>\n                                                    <span class="select-indicator select-indicator--hidden"></span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <input type="text" size=10 class="color-text-input" value="#808080" />\n                        </div>\n                    </div>\n                </div>\n                <div class="color-picker-container">\n                    <div class="color-spectrum-container">\n                        <color-spectrum data-output-format="hex" data-update-selection-on-hue-change></color-spectrum>\n                    </div>\n                    <hue-slider data-dot-center-shows-color></hue-slider>\n                </div>\n            </div>\n        `);const e=this.draggableWindow.querySelector('[slot="content"]');this.initTargetsMenu(),this.initColorTextInput(),this.colorSpectrum=e.querySelector("color-spectrum"),this.hueSlider=e.querySelector("hue-slider");let t=[];const n=()=>{this.updateErrors(),t=this.targetGroup.targets.filter((e=>e.valid))},o=()=>{need_GUIParams_update=!0};this.colorSpectrum.addEventListener("dragselectstart",n),this.colorSpectrum.addEventListener("colorinput",(e=>{const n=e.detail.color;w(t,n),this.targetGroup.color=n,this.updateColorTextInputField()})),this.colorSpectrum.addEventListener("dragselectend",o),this.hueSlider.addEventListener("dragselectstart",n),this.hueSlider.addEventListener("hueinput",(e=>this.colorSpectrum.setHue(e.detail.hue))),this.hueSlider.addEventListener("dragselectend",o),null!==this.targetGroup.color&&(this.colorSpectrum.setHexColor(this.targetGroup.color),this.hueSlider.setSelectedHue(this.colorSpectrum.getHue())),this.updateColorTextInputField()}initTargetsMenu(){const e=this.draggableWindow.querySelector('[slot="content"]').querySelector('.dropdown-container[data-id="targets menu"]'),t=e.querySelector(".dropdown-opener"),n=t.querySelector(".dropdown-arrow"),o=e.querySelector(".dropdown");this.targetsMenu.itemsContainer=o.querySelector(".dropdown-items-container"),this.targetsMenu.labels={},this.targetsMenu.warningIndicators={},this.targetsMenu.openerText=t.querySelector(".dropdown-item-text"),this.targetsMenu.openerWarningIndicator=t.querySelector(".warning-indicator"),this.targetsMenu.ignoreNextOffmenuClick=!1;for(const e of this.targetGroup.targets)this.addTargetListItem(e);this.targetsMenuOffmenuClick=t=>{if(o.classList.contains("dropdown--visible")&&!e.contains(t.target)){if(this.targetsMenu.ignoreNextOffmenuClick)return void(this.targetsMenu.ignoreNextOffmenuClick=!1);n.classList.remove("dropdown-arrow--open"),o.classList.remove("dropdown--visible")}},t.addEventListener("click",(()=>{o.classList.contains("dropdown--visible")||this.updateSelectionStateOnTargetLabels(),n.classList.toggle("dropdown-arrow--open"),o.classList.toggle("dropdown--visible")})),document.addEventListener("click",this.targetsMenuOffmenuClick)}addTargetListItem(e){const t=this.targetsMenu.itemsContainer.children.length;this.targetsMenu.itemsContainer.insertAdjacentHTML("beforeend",`\n            <div class="dropdown-item dropdown-item--small" data-uid="${e.uid}">\n                <div class="dropdown-item-label selectable-target-item ${e.entity.selected?"selectable-target-item--selected":""}">\n                    <div class="dropdown-item-label__left">\n                        <span class="dropdown-item-text dropdown-item-text--small">${t+1}. ${e.name}</span>\n                    </div>\n                    <div class="dropdown-item-label__right">\n                        <span class="warning-indicator warning-indicator--hidden"></span>\n                    </div>\n                </div>\n                <div class="dropdown-item-control">\n                    <div class="target-quick-delete-button-container">\n                        <button class="target-quick-delete-button"></button> \n                    </div>\n                </div>\n            </div>\n        `);const n=this.targetsMenu.itemsContainer.lastElementChild,o=n.querySelector(".dropdown-item-label"),r=n.querySelector(".target-quick-delete-button");this.targetsMenu.labels[e.uid]=o,this.targetsMenu.warningIndicators[e.uid]=o.querySelector(".warning-indicator"),o.addEventListener("click",(t=>{if(!e.entity.exists)return;const n=!e.entity.selected;if(!t.ctrlKey)for(const e of es)e.selected=!1;e.entity.selected=n,this.updateSelectionStateOnTargetLabels(),need_redraw=!0,need_GUIParams_update=!0})),r.addEventListener("click",(()=>{n.remove(),delete this.targetsMenu.labels[e.uid],delete this.targetsMenu.warningIndicators[e.uid],this.targetsMenu.ignoreNextOffmenuClick=!0,this.targetGroup.targets.splice(this.targetGroup.targets.indexOf(e),1),this.targetGroup.updateCategory(),this.targetGroup.updateTitle(),this.targetsMenu.openerText.textContent=this.targetGroup.title,this.targetGroup.updateColor(),this.updateErrors()}))}initColorTextInput(){const e=this.draggableWindow.querySelector('[slot="content"]');this.colorTextInputLabel=e.querySelector(".color-text-input-label"),this.colorTextInput=e.querySelector(".color-text-input");const t=e.querySelector('.dropdown-container[data-id="color type menu"]'),n=t.querySelector(".dropdown");this.colorTypeSelectIndicators={};for(const e of n.querySelectorAll(".dropdown-item")){const t=e.dataset.value;this.colorTypeSelectIndicators[t]=e.querySelector(".select-indicator"),e.addEventListener("click",(()=>{this.selectColorType(t),n.classList.remove("dropdown--visible")}))}let o=null;this.colorTypeMenuOffmenuClick=e=>{n.classList.contains("dropdown--visible")&&!t.contains(e.target)&&n.classList.remove("dropdown--visible")},this.colorTextInputLabel.addEventListener("click",(()=>{n.classList.toggle("dropdown--visible")})),this.colorTextInput.addEventListener("input",(()=>{null!==o&&(clearTimeout(o),o=null),o=setTimeout((()=>{this.tryApplyColorTextInput(),UpdateGUIParams(),letediting=!0,o=null}),50)})),this.colorTextInput.addEventListener("focus",(()=>{letediting=!0})),this.colorTextInput.addEventListener("blur",(()=>{null!==o&&(clearTimeout(o),o=null),this.tryApplyColorTextInput(),this.updateColorTextInputField(),need_GUIParams_update=!0,letediting=!1})),document.addEventListener("click",this.colorTypeMenuOffmenuClick)}selectColorType(e){this.colorTypeSelectIndicators[this.currentTextInputColorType].classList.add("select-indicator--hidden"),this.colorTypeSelectIndicators[e].classList.remove("select-indicator--hidden"),this.currentTextInputColorType=e,this.colorTextInputLabel.textContent={hex:"HEX:",rgb:"RGB:",hsv:"HSV:",hsl:"HSL:"}[e],this.updateColorTextInputField()}updateColorTextInputField(){if(null===this.targetGroup.color)return void(this.targetGroup.targets.length>0?this.colorTextInput.value="multiple":this.colorTextInput.value="none");let e="";const t=this.targetGroup.color;switch(this.currentTextInputColorType){case"hex":e=t;break;case"rgb":const n=l(t);e=`${n.red}, ${n.green}, ${n.blue}`;break;case"hsv":const o=d(l(t));e=`${Math.round(o.hue)}, ${Math.round(100*o.saturation)}%, ${Math.round(100*o.value)}%`;break;case"hsl":const r=function(e){const t=e.red/255,n=e.green/255,o=e.blue/255;let r,a,i=Math.max(t,n,o),s=Math.min(t,n,o),l=(i+s)/2;if(i==s)r=a=0;else{let e=i-s;switch(a=l>.5?e/(2-i-s):e/(i+s),i){case t:r=(n-o)/e+(n<o?6:0);break;case n:r=(o-t)/e+2;break;case o:r=(t-n)/e+4}r*=60}return{hue:r,saturation:a,lightness:l}}(l(t));e=`${Math.round(r.hue)}, ${Math.round(100*r.saturation)}%, ${Math.round(100*r.lightness)}%`}this.colorTextInput.value=e}tryApplyColorTextInput(){let e=this.readColorTextInput();const t=e.valid,n=e.values;if(t){let e,t;switch(this.currentTextInputColorType){case"hex":e=n[0],t=l(n[0]);break;case"rgb":t={red:n[0],green:n[1],blue:n[2]};break;case"hsv":t=function(e){const t=e.hue/360,n=e.saturation,o=e.value;let r,a,i,s=Math.floor(6*t),l=6*t-s,c=o*(1-n),d=o*(1-l*n),_=o*(1-(1-l)*n);switch(s%6){case 0:r=o,a=_,i=c;break;case 1:r=d,a=o,i=c;break;case 2:r=c,a=o,i=_;break;case 3:r=c,a=d,i=o;break;case 4:r=_,a=c,i=o;break;case 5:r=o,a=c,i=d}return{red:Math.round(255*r),green:Math.round(255*a),blue:Math.round(255*i)}}({hue:n[0],saturation:n[1]/100,value:n[2]/100});break;case"hsl":t=function(e){const t=e.hue/360,n=e.saturation,o=e.lightness;let r,a,i;if(0==n)r=a=i=e.lightness;else{function s(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}let l=o<.5?o*(1+n):o+n-o*n,c=2*o-l;r=s(c,l,t+1/3),a=s(c,l,t),i=s(c,l,t-1/3)}return{red:Math.round(255*r),green:Math.round(255*a),blue:Math.round(255*i)}}({hue:n[0],saturation:n[1]/100,lightness:n[2]/100})}this.targetGroup.color=e||s(t),this.updateErrors(),w(this.targetGroup.targets.filter((e=>e.valid)),this.targetGroup.color),this.colorSpectrum.setRGBColor(t),this.hueSlider.setSelectedHue(this.colorSpectrum.getHue())}}readColorTextInput(){const e=this.colorTextInput.value;let t=!1,n=null;switch(this.currentTextInputColorType){case"hex":/^#[0-9A-Fa-f]{6}$/.test(e)&&(t=!0,n=[e]);break;case"rgb":let o=e.match(/^(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})$/);o&&o.slice(1).every((e=>e>=0&&e<=255))&&(t=!0,n=o.slice(1).map(Number));break;case"hsv":case"hsl":let r=e.match(/^(\d{1,3}(?:\.\d+)?),\s*(\d{1,3}(?:\.\d+)?)%?,\s*(\d{1,3}(?:\.\d+)?)%?$/);r&&r[1]>=0&&r[1]<=360&&r[2]>=0&&r[2]<=100&&r[3]>=0&&r[3]<=100&&(t=!0,n=[parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3])])}return{valid:t,values:n}}updateSelectionStateOnTargetLabels(){for(const e of this.targetGroup.targets){const t=this.targetsMenu.labels[e.uid];e.entity.selected?t.classList.add("selectable-target-item--selected"):t.classList.remove("selectable-target-item--selected")}}onWindowClosed(){const e=b.indexOf(this);b.splice(e,1),document.removeEventListener("click",this.targetsMenuOffmenuClick),document.removeEventListener("click",this.colorTypeMenuOffmenuClick)}updateErrors(){this.targetGroup.updateErrors(),this.targetsMenu.openerWarningIndicator.classList.toggle("warning-indicator--hidden",!this.targetGroup.hasError),this.targetsMenu.openerWarningIndicator.title=this.targetGroup.hasError?this.targetGroup.collectiveErrorMessage:"";for(const e of this.targetGroup.targets){const t=this.targetsMenu.warningIndicators[e.uid];t.classList.toggle("warning-indicator--hidden",e.valid),t.title=e.valid?"":e.errorMessage}}addToPage(){document.body.appendChild(this.draggableWindow)}}function v(e){if(b.length<h){null===e&&(e=new p.QL);const t=new f(e,200,200);t.addToPage(),b.push(t)}else NewNote(`New color tool window wasn't created because maximum (${h}) has been reached.`,note_bad)}function w(e,t){for(const n of e)n.setColorValue(t),"bg"==n.entity._class&&(need_redraw=!0)}unsafeWindow.colorWindows=b},5072:e=>{"use strict";var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var a={},i=[],s=0;s<e.length;s++){var l=e[s],c=o.base?l[0]+o.base:l[0],d=a[c]||0,_="".concat(c," ").concat(d);a[c]=d+1;var u=n(_),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)t[u].references++,t[u].updater(m);else{var g=r(m,o);o.byIndex=s,t.splice(s,0,{identifier:_,updater:g,references:1})}i.push(_)}return i}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var a=o(e=e||[],r=r||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var s=n(a[i]);t[s].references--}for(var l=o(e,r),c=0;c<a.length;c++){var d=n(a[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}a=l}}},5129:(e,t,n)=>{"use strict";n.d(t,{$j:()=>u,Ly:()=>g,O7:()=>_,dQ:()=>m,lA:()=>h,tz:()=>p});const o=!0,r=!1,a=!0,i=!1,s=0,l=1,c=2,d=l,_={bounds:{minX:0,minY:0,maxX:0,maxY:0},totalArea:0},u={rects:[],totalArea:0};let m=0;const g=new Set(["box","door","water","pushf"]),p=new Set(["x","y","w","h"]);let b=!1;function h(){b||(b=!0,queueMicrotask((()=>{(function(){_.bounds.minX=0,_.bounds.minY=0,_.bounds.maxX=0,_.bounds.maxY=0,_.totalArea=0,u.rects=[],u.totalArea=0;const e=es.filter((e=>e.exists));if(0===e.filter((e=>"box"===e._class)).length)return;const t=e.filter((e=>"box"===e._class)).map((({pm:{x:e,y:t,w:n,h:o}})=>({minX:e,minY:t,maxX:e+n,maxY:t+o}))),n=function(e){const t=function(e){let t=1/0,n=1/0,o=-1/0,r=-1/0;for(const{minX:a,minY:i,maxX:s,maxY:l}of e)a<t&&(t=a),i<n&&(n=i),s>o&&(o=s),l>r&&(r=l);return{minX:t,minY:n,maxX:o,maxY:r}}(e),n=[t.minX+100,t.maxX-100],o=[t.minY+100,t.maxY-100];return{minX:Math.min(...n),maxX:Math.max(...n),minY:Math.min(...o),maxY:Math.max(...o)}}(t);var m;_.bounds=n,_.totalArea=((m=n).maxX-m.minX)*(m.maxY-m.minY);const g=t.filter((({minX:e,minY:t,maxX:n,maxY:o})=>e<n&&t<o)),p=e.filter((e=>"door"===e._class)).filter((({pm:{w:e,h:t}})=>e>0&&t>0)).map((({pm:{x:e,y:t,w:n,h:o}})=>({minX:e,minY:t,maxX:e+n,maxY:t+o}))),b=e.filter((e=>"water"===e._class||"pushf"===e._class)).filter((({pm:{w:e,h:t}})=>e>-200&&t>-200)).map((({pm:{x:e,y:t,w:n,h:o}})=>({minX:e,minY:t,maxX:e+n,maxY:t+o}))),h=g.concat(p).flatMap((({minX:e,minY:t,maxX:n,maxY:d})=>[{x:e-10,eventType:o,intervalType:a,intervalPos:s,minY:t-50,maxY:d-50},{x:n-10,eventType:r,intervalType:a,intervalPos:s,minY:t-50,maxY:d-50},{x:e,eventType:o,intervalType:a,intervalPos:l,minY:t-50,maxY:d-50},{x:n,eventType:r,intervalType:a,intervalPos:l,minY:t-50,maxY:d-50},{x:e+10,eventType:o,intervalType:a,intervalPos:c,minY:t-50,maxY:d-50},{x:n+10,eventType:r,intervalType:a,intervalPos:c,minY:t-50,maxY:d-50},{x:e-10,eventType:o,intervalType:i,intervalPos:s,minY:t+50,maxY:d+50},{x:n-10,eventType:r,intervalType:i,intervalPos:s,minY:t+50,maxY:d+50},{x:e,eventType:o,intervalType:i,intervalPos:l,minY:t+50,maxY:d+50},{x:n,eventType:r,intervalType:i,intervalPos:l,minY:t+50,maxY:d+50},{x:e+10,eventType:o,intervalType:i,intervalPos:c,minY:t+50,maxY:d+50},{x:n+10,eventType:r,intervalType:i,intervalPos:c,minY:t+50,maxY:d+50}])).concat(b.flatMap((({minX:e,minY:t,maxX:n,maxY:a})=>[{x:e-100,eventType:o,intervalType:i,intervalPos:d,minY:t-100,maxY:a+100},{x:n+100,eventType:r,intervalType:i,intervalPos:d,minY:t-100,maxY:a+100}]))).concat([{x:-1/0,eventType:o,intervalType:i,intervalPos:d,minY:-1/0,maxY:1/0},{x:n.minX,eventType:r,intervalType:i,intervalPos:d,minY:-1/0,maxY:1/0},{x:-1/0,eventType:o,intervalType:i,intervalPos:d,minY:-1/0,maxY:n.minY},{x:1/0,eventType:r,intervalType:i,intervalPos:d,minY:-1/0,maxY:n.minY},{x:-1/0,eventType:o,intervalType:i,intervalPos:d,minY:n.maxY,maxY:1/0},{x:1/0,eventType:r,intervalType:i,intervalPos:d,minY:n.maxY,maxY:1/0},{x:n.maxX,eventType:o,intervalType:i,intervalPos:d,minY:-1/0,maxY:1/0},{x:1/0,eventType:r,intervalType:i,intervalPos:d,minY:-1/0,maxY:1/0}]).sort(((e,t)=>e.x!==t.x?e.x-t.x:e.eventType!==t.eventType?e.eventType===o?-1:1:0));let w;try{w=new v(h.flatMap((({minY:e,maxY:t})=>[e,t])))}catch{return}let y=0,E=[],x={},k=1/0;for(const{x:e,eventType:t,intervalType:n,intervalPos:r,minY:a,maxY:i}of h){const s=e-k;if(s>0){const t={};for(const[n,o]of f(w.getSpawnableSegments())){const r=`${n},${o}`;let a;r in x?(a=x[r],E[a].maxX=e):(a=E.length,E.push({minX:k,minY:n,maxX:e,maxY:o})),t[r]=a}x=t;const n=s*w.getCoveredLength();Number.isNaN(n)||(y+=n)}w.update(a,i,t===o?1:-1,n,r),k=e}u.rects=E,u.totalArea=y})(),function(){const e=1-u.totalArea/_.totalArea;m=Number.isNaN(e)?1:e**1500}(),b=!1})))}function f(e){const t=[];let n=-1/0;for(const[o,r]of e)o!==n?t.push([o,r]):t[t.length-1][1]=r,n=r;return t}unsafeWindow.scheduleSpawnAreasUpdate=h;class v{constructor(e){if(this.coords=[...new Set(e)].sort(((e,t)=>e-t)),this.coords.length<2)throw new Error("Cannot create interval tree for less than 2 unique coordinates");this.coordIndexes=Object.fromEntries(this.coords.map(((e,t)=>[e,t]))),this.leaves=this.coords.length-1,this.leftHasFloorCount=new Uint8Array(4*this.leaves),this.centerHasFloorCount=new Uint8Array(4*this.leaves),this.rightHasFloorCount=new Uint8Array(4*this.leaves),this.leftBlockedCount=new Uint8Array(4*this.leaves),this.centerBlockedCount=new Uint8Array(4*this.leaves),this.rightBlockedCount=new Uint8Array(4*this.leaves),this.bubblingBlockedCount=new Uint16Array(4*this.leaves),this.covered=new Float32Array(4*this.leaves)}getNodeDataArray(e,t){switch(t){case s:return e===a?this.leftHasFloorCount:this.leftBlockedCount;case l:return e===a?this.centerHasFloorCount:this.centerBlockedCount;case c:return e===a?this.rightHasFloorCount:this.rightBlockedCount;default:throw new Error(`what the fuck is the interval pos "${t}"?`)}}leftChild(e){return 2*e}rightChild(e){return 2*e+1}update(e,t,n,o,r){if(!(e in this.coordIndexes)||!(t in this.coordIndexes))throw new Error("Start or end value is not in original coordinate set.");if(e>=t)throw new Error("Start must be less than end");const a=this.coordIndexes[e],i=this.coordIndexes[t];this._update(1,0,this.leaves,a,i,n,o,r)}_update(e,t,n,o,r,a,s,l){if(!(n<=o||r<=t)){if(o<=t&&n<=r&&(this.getNodeDataArray(s,l)[e]+=a),s===i&&(this.bubblingBlockedCount[e]+=a),n-t>1){const i=Math.floor((t+n)/2);this._update(this.leftChild(e),t,i,o,r,a,s,l),this._update(this.rightChild(e),i,n,o,r,a,s,l)}this.leftBlockedCount[e]>0||this.centerBlockedCount[e]>0||this.rightBlockedCount[e]>0?this.covered[e]=0:this.bubblingBlockedCount[e]>0?this.covered[e]=this.covered[this.leftChild(e)]+this.covered[this.rightChild(e)]:this.leftHasFloorCount[e]>0&&this.centerHasFloorCount[e]>0&&this.rightHasFloorCount[e]>0?this.covered[e]=this.coords[n]-this.coords[t]:this.covered[e]=n-t==1?0:this.covered[this.leftChild(e)]+this.covered[this.rightChild(e)]}}getSpawnableSegments(){const e=[];return this._getSpawnableSegments(1,0,this.leaves,e),e}_getSpawnableSegments(e,t,n,o){if(this.leftBlockedCount[e]<=0&&this.centerBlockedCount[e]<=0&&this.rightBlockedCount[e]<=0)if(this.leftHasFloorCount[e]>0&&this.centerHasFloorCount[e]>0&&this.rightHasFloorCount[e]>0&&this.bubblingBlockedCount[e]<=0)o.push([this.coords[t],this.coords[n]]);else if(n-t>1){const r=Math.floor((t+n)/2);this._getSpawnableSegments(this.leftChild(e),t,r,o),this._getSpawnableSegments(this.rightChild(e),r,n,o)}}getCoveredLength(){return this.covered[1]}}},5146:(e,t,n)=>{"use strict";n.d(t,{p3:()=>f,o5:()=>m,yb:()=>g,yD:()=>p,Rd:()=>h,PS:()=>b,yR:()=>u});var o=n(3987),r=n(2946),a=n(3797),i=n(7918),s=n(7085);function l(e,t,n){const o=function(e){const t=e.pm.uid;return void 0!==t&&i.SH.has(t)?new Set(i.SH.get(t).keys()):new Set}(e);o.size>0&&t.set(e,o),o.forEach((t=>{n.has(t)||n.set(t,new Set),n.get(t).add(e)}))}function c(e,t,n){const o=d(e);o.size>0&&n.set(e,o),o.forEach((n=>{t.has(n)||t.set(n,new Set),t.get(n).add(e)}))}function d(e){let t=[];for(const n in e.pm)"uid"!=n&&"object"!=typeof e.pm[n]&&t.push(e.pm[n]);const n=r.F.extendedTriggers&&e.pm.extended?[...t,...e.pm.additionalParamA??[],...e.pm.additionalParamB??[]]:t,o=new Set;for(const e of n)for(const t of(0,s.xx)(e))a.PZ.get(t)?.forEach((e=>o.add(e)));return o}const _=!1;let u=new Map,m=new Map;function g(){u=new Map,m=new Map;for(const e of es){const t=d(e);t.size>0&&u.set(e,t);for(const n of t)m.has(n)||m.set(n,new Set),m.get(n).add(e)}}function p(e){for(const t of e)c(t,m,u),l(t,m,u);(0,o.Md)(o.dm.VERBOSE,"ocmHandleEntitiesCreation called"),_&&v("ocmHandleEntitiesCreation")}function b(e){!function(e,t,n){const r=t.get(e);void 0!==r&&(t.delete(e),r.forEach((t=>{const r=n.get(t);void 0!==r?(r.delete(e),0===r.size&&n.delete(t)):(0,o.Md)(o.dm.DEBUG,"removeIncomingConnections warning: ocm connections are not symmetrical")})))}(e,m,u),l(e,m,u),(0,o.Md)(o.dm.VERBOSE,"ocmHandleEntityUIDChange called"),_&&v("ocmHandleEntityUIDChange")}function h(e){!function(e,t,n){const r=n.get(e);void 0!==r&&(n.delete(e),r.forEach((n=>{const r=t.get(n);void 0!==r?(r.delete(e),0===r.size&&t.delete(n)):(0,o.Md)(o.dm.DEBUG,"removeOutgoingConnections warning: ocm connections are not symmetrical")})))}(e,m,u),c(e,m,u),(0,o.Md)(o.dm.VERBOSE,"ocmHandleEntityParametersChange called"),_&&v("ocmHandleEntityParametersChange")}function f(){u.clear(),m.clear()}function v(e){const t=function(){const e=u,t=m;g();const n=u,o=m;return u=e,m=t,{outgoing:{valid:w(n,e),originalMap:e,correctMap:n},incoming:{valid:w(o,t),originalMap:t,correctMap:o}}}(),n=[];return 0==t.incoming.valid&&(n.push(`ocm incoming map error (source: ${e})`),n.push("\noriginal incoming map:",t.incoming.originalMap),n.push("\ncorrect incoming map:",t.incoming.correctMap),m=t.incoming.correctMap),0==t.outgoing.valid&&(n.push(`\nocm outgoing map error (source: ${e})`),n.push("\noriginal outgoing map:",t.outgoing.originalMap),n.push("\ncorrect outgoing map:",t.outgoing.correctMap),u=t.outgoing.correctMap),t.incoming.valid&&t.outgoing.valid||(0,o.Md)(o.dm.WARN,...n,"\nThe effects of this problem were fixed automatically."),t.incoming.valid&&t.outgoing.valid}function w(e,t){if(e.size!==t.size)return!1;for(const n of e.keys()){if(!t.has(n))return!1;const o=e.get(n),r=t.get(n);if(o.size!==r.size)return!1;for(const e of o)if(!r.has(e))return!1}return!0}unsafeWindow.ocmHandleEntityUIDChange=b,unsafeWindow.ocmHandleEntityParametersChange=h,unsafeWindow.getIncomingConnections=()=>m,unsafeWindow.getOutgoingConnections=()=>u,unsafeWindow.validateOCM=()=>{!0===v("console")&&(0,o.Md)(o.dm.INFO,"Both object connection maps are correct")}},5332:e=>{e.exports="precision mediump float;\r\n\r\nvarying vec2 vertex_position;\r\n\r\nuniform float hue;\r\n\r\nvec3 hsvToRgb(float h, float s, float v) {\r\n    h /= 60.0;\r\n    float c = v * s;\r\n    float x = c * (1.0 - abs(mod(h, 2.0) - 1.0));\r\n    float m = v - c;\r\n    vec3 rgb;\r\n\r\n    if (h < 1.0) {\r\n        rgb = vec3(c, x, 0.0);\r\n    } else if (h < 2.0) {\r\n        rgb = vec3(x, c, 0.0);\r\n    } else if (h < 3.0) {\r\n        rgb = vec3(0.0, c, x);\r\n    } else if (h < 4.0) {\r\n        rgb = vec3(0.0, x, c);\r\n    } else if (h < 5.0) {\r\n        rgb = vec3(x, 0.0, c);\r\n    } else {\r\n        rgb = vec3(c, 0.0, x);\r\n    }\r\n\r\n    return rgb + m;\r\n}\r\n\r\nvoid main() {\r\n    // saturation is from x coordinate and value is from y coordinate\r\n    float saturation = vertex_position.x * 0.5 + 0.5; // range [-1, 1] -> [0, 1]\r\n    float value = vertex_position.y * 0.5 + 0.5;\r\n    vec3 rgb = hsvToRgb(hue, saturation, value);\r\n\r\n    gl_FragColor = vec4(rgb, 1.0);\r\n}"},5338:(e,t,n)=>{"use strict";function o(e){let t=0;return(!isNaN(Number(e))&&" "!==e||"."==e)&&(t=1),t}function r(e){return"+-*/%^SCANRF".includes(e)}function a(e){return"()".includes(e)}function i(e){let t=0;return"+-".includes(e)&&(t=1),"*/%".includes(e)&&(t=2),"^SCANRF".includes(e)&&(t=3),t}function s(e,t,n){let o;return e=Number(e),n=Number(n),"+"==t&&(o=e+n),"-"==t&&(o=e-n),"*"==t&&(o=e*n),"/"==t&&(o=e/n),"%"==t&&(o=e%n),"^"==t&&(o=e**n),"S"==t&&(o=Math.sin(e)*n),"C"==t&&(o=Math.cos(e)*n),"A"==t&&(o=Math.atan2(e,n)),"N"==t&&(o=n?Math.floor(Math.random()*e):Math.random()*e),"R"==t&&(o=Math.round(e/n)*n),"F"==t&&(o=Math.floor(e/n)*n),o}function l(e,t){""==e&&(e="0"),"-"==e[0]&&(e="0"+e),function(e){let t="";for(let n=0;n<e.length;n++)o(e[n])?t+=e[n]:0!=t.length&&(e.splice(n-t.length,t.length,t),n-=t.length-1,t="");0!=t.length&&e.splice(e.length-t.length,t.length,t)}(e=function(e){return e.replaceAll(" ","").split("")}(e)),function(e,t){for(let n=0;n<e.length;n++)for(let o=0;o<t.length;o++)e[n]==t[o].from&&(e[n]=t[o].to)}(e,[{from:"p",to:String(Math.PI)},{from:"x",to:String(t[0])},{from:"y",to:String(t[1])},{from:"w",to:String(t[2])},{from:"h",to:String(t[3])},{from:"i",to:String(t[4])}]);try{!function(e){for(let t=0;t<e.length;t++)"-"==e[t]&&"("==e[t-1]&&e.splice(t,0,"0")}(e),function(e){for(let t=0;t<e.length;t++)"("==e[t-1]&&")"==e[t+1]&&e.splice(t,0,"0","+")}(e),function(e){for(let t=0;t<e.length;t++)e[t]={chr:e[t]}}(e),function(e){let t=1;for(let n=0;n<e.length;n++)"("==e[n].chr&&t++,")"==e[n].chr&&t--,e[n].groupOrder=t}(e),function(e){for(let t=0;t<e.length;t++)a(e[t].chr)&&(e.splice(t,1),t--)}(e),function(e){for(let t=0;t<e.length;t++)if(r(e[t].chr)){let n=i(e[t].chr);e[t].operatorOrder=n,e[t+1].groupOrder==e[t].groupOrder&&(e[t+1].operatorOrder=n),(!e[t-1].operatorOrder||e[t-1].operatorOrder<e[t].operatorOrder&&e[t-1].groupOrder==e[t].groupOrder)&&(e[t-1].operatorOrder=n)}}(e),function(e){for(let t=0;t<e.length;t++)e[t].order=10*e[t].groupOrder+e[t].operatorOrder}(e),function(e){let t=function(e){let t=[];for(let n=0;n<e.length;n++)t.push(e[n].order);return t}(e),n=function(e){let t=[],n=1;e.sort(((e,t)=>t-e)),t.push({from:e[0],to:n});for(let o=1;o<e.length;o++)e[o]!=e[o-1]&&n++,t.push({from:e[o],to:n});return t}(t);for(let t=0;t<e.length;t++)for(let o=0;o<n.length;o++)e[t].order==n[o].from&&(e[t].order=n[o].to)}(e),function(e){let t=function(e){let t=0;for(let n=0;n<e.length;n++)e[n].order>t&&(t=e[n].order);return t}(e);for(let n=1;n<=t;n++){let t=0,o=!0;for(;o;){o=!1;let r,a,i=[],l=-1;for(;t<e.length;t++)if(e[t].order==n)i.push(e[t]),-1==l&&(l=t);else if(0!=i.length){o=!0;break}if(r=i.length,r){for(;1!=i.length;)i.splice(0,3,{chr:s(i[0].chr,i[1].chr,i[2].chr)});a=e[l].order,e.splice(l,r,i[0]),t-=r-1,e[l]={chr:e[l].chr,order:a+1}}}}}(e)}catch{return"error"}return Number(Number(e[0].chr).toFixed(10))}n.d(t,{q:()=>l})},5740:(e,t,n)=>{"use strict";function o(e){const t=document.getElementById(`pm_actions_${e}_type`)?.parentElement.parentElement??null;return null!==t&&t.classList.contains("trigger-action")?t:null}function r(e){if(!e.classList.contains("pa1"))return!1;const t=e.parentElement,n=t.parentElement;return!(!t.classList.contains("p_i")||!n.classList.contains("trigger-action"))}function a(e){const t=e.parentElement.parentElement,n=parseInt(t.dataset.actionNum);return Number.isNaN(n)?null:n}n.d(t,{Cb:()=>o,HQ:()=>a,zm:()=>r})},6113:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>makeTriggerActionsInteractable,v:()=>patchForInteractableTriggerActions});var _entity_entity_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3150),_interactions_copypaste_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(583),_interactions_delete_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6360),_interactions_dragndrop_dragndrop_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8050),_interactions_hover_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1869),_interactions_selection_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9929),_elements_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5740),_log_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3987);function makeTriggerActionsInteractable(e){1===_entity_entity_js__WEBPACK_IMPORTED_MODULE_0__.sf.length&&"trigger"===_entity_entity_js__WEBPACK_IMPORTED_MODULE_0__.sf[0]._class&&(e.addEventListener("click",(e=>{if(_interactions_dragndrop_dragndrop_js__WEBPACK_IMPORTED_MODULE_3__.mY.wasDragging)return;if(!(0,_elements_js__WEBPACK_IMPORTED_MODULE_6__.zm)(e.target))return;const t=(0,_elements_js__WEBPACK_IMPORTED_MODULE_6__.HQ)(e.target);null!==t&&(0,_interactions_selection_js__WEBPACK_IMPORTED_MODULE_4__.yp)(t)})),e.addEventListener("mouseover",(e=>{if(!(0,_elements_js__WEBPACK_IMPORTED_MODULE_6__.zm)(e.target))return;const t=(0,_elements_js__WEBPACK_IMPORTED_MODULE_6__.HQ)(e.target);null!==t&&(0,_interactions_hover_js__WEBPACK_IMPORTED_MODULE_7__.v)(t,!0)})),e.addEventListener("mouseout",(e=>{if(!(0,_elements_js__WEBPACK_IMPORTED_MODULE_6__.zm)(e.target))return;const t=(0,_elements_js__WEBPACK_IMPORTED_MODULE_6__.HQ)(e.target);null!==t&&(0,_interactions_hover_js__WEBPACK_IMPORTED_MODULE_7__.v)(t,!1)})),e.addEventListener("mousedown",(e=>{if(!(0,_elements_js__WEBPACK_IMPORTED_MODULE_6__.zm)(e.target))return;const t=(0,_elements_js__WEBPACK_IMPORTED_MODULE_6__.HQ)(e.target);null!==t&&(0,_interactions_dragndrop_dragndrop_js__WEBPACK_IMPORTED_MODULE_3__.J)(e,t)})))}function patchForInteractableTriggerActions(){let oldCode,newCode;if(unsafeWindow.deleteObjectsOrActions=function(){0===_interactions_selection_js__WEBPACK_IMPORTED_MODULE_4__.Vf.size?DeleteSelection():(0,_interactions_delete_js__WEBPACK_IMPORTED_MODULE_2__.D)()},unsafeWindow.tryToCopyObjectsOrActions=function(){0===_interactions_selection_js__WEBPACK_IMPORTED_MODULE_4__.Vf.size?"undefined"!=typeof Storage?(CopyToClipBoard("clipboard"),NewNote("Objects copied to the clipboard.",note_passive)):NewNote("Oops! Your browser seem not to have sessionStorage (localStorage) support.",note_bad):(0,_interactions_copypaste_js__WEBPACK_IMPORTED_MODULE_1__.$)()},unsafeWindow.tryToPasteObjectsOrActions=function(){0===_interactions_selection_js__WEBPACK_IMPORTED_MODULE_4__.Vf.size?"undefined"!=typeof Storage?PasteFromClipBoard("clipboard")?NewNote("Objects pasted from the clipboard.",note_passive):NewNote("Clipboard is empty. Nothing to paste.",note_passive):NewNote("Oops! Your browser seem not to have sessionStorage (localStorage) support.",note_bad):(0,_interactions_copypaste_js__WEBPACK_IMPORTED_MODULE_1__.D)()},oldCode=unsafeWindow.k_down.toString(),newCode=oldCode.replace(/DeleteSelection\s*\(\s*\)\s*;?/,"deleteObjectsOrActions();"),newCode===oldCode&&(0,_log_js__WEBPACK_IMPORTED_MODULE_5__.Md)(_log_js__WEBPACK_IMPORTED_MODULE_5__.dm.WARN,"k_down direct code replacement failed (interactable trigger actions #1)"),oldCode=newCode,newCode=oldCode.replace(/if\s*\(\s*typeof(?:(?:\s*\(\s*Storage\s*\))|(?:\s+Storage))\s*!={1,2}\s*(?<quote>['"`])undefined\k<quote>\s*\)\s*\{\s*CopyToClipBoard.*?else.*?\}/s,"tryToCopyObjectsOrActions();"),newCode===oldCode&&(0,_log_js__WEBPACK_IMPORTED_MODULE_5__.Md)(_log_js__WEBPACK_IMPORTED_MODULE_5__.dm.WARN,"k_down direct code replacement failed (interactable trigger actions #2)"),oldCode=newCode,newCode=oldCode.replace(/if\s*\(\s*typeof(?:(?:\s*\(\s*Storage\s*\))|(?:\s+Storage))\s*!={1,2}\s*(?<quote>['"`])undefined\k<quote>\s*\)\s*\{\s*if\s*\(\s*PasteFromClipBoard.*?else.*?else.*?\}/s,"tryToPasteObjectsOrActions();"),newCode===oldCode&&(0,_log_js__WEBPACK_IMPORTED_MODULE_5__.Md)(_log_js__WEBPACK_IMPORTED_MODULE_5__.dm.WARN,"k_down direct code replacement failed (interactable trigger actions #3)"),newCode!==unsafeWindow.k_down.toString()){const old_k_down=unsafeWindow.k_down,new_k_down=eval(`(${newCode})`);unsafeWindow.removeEventListener("keydown",old_k_down,!0),unsafeWindow.addEventListener("keydown",new_k_down,!0),unsafeWindow.k_down=new_k_down}(0,_log_js__WEBPACK_IMPORTED_MODULE_5__.Md)(_log_js__WEBPACK_IMPORTED_MODULE_5__.dm.DEBUG,"Patched to make trigger actions interactable.")}},6178:(e,t,n)=>{"use strict";n.d(t,{U:()=>f,l:()=>h});var o=n(3797),r=n(7918),a=n(7218);const i={playerExists:{description:"Map has at least 1 player",check:e=>e.some((e=>"player"===e._class||"enemy"===e._class))},wallExists:{description:"Map has at least 1 wall",check:e=>e.some((e=>"box"===e._class))}};function s(e){const t={};for(const n in i)t[n]=i[n].check(e);return t}const l=new Set(["string","value+round10","value","value>0","int","value>0+round10","value>=0","value>0+round1","value>=0+round1"]);function c(e){const t=new Map;return e.forEach((e=>{for(const{paramName:n,paramValue:o,paramType:r}of u(e))l.has(r)||"nochange"!==r&&null!==r&&special_value(r,o)===ERROR_VALUE&&(t.has(e)||t.set(e,new Set),t.get(e).add(n))})),t}function d(){const e=new Set([...o.PZ.entries()].filter((([e,t])=>[...t].filter((e=>e.exists)).length>=2)).map((([e,t])=>e))),t=new Map;for(const n of e)for(const[e,o]of r.SH.get(n)?.entries()??[])if(e.exists&&0!==o.size){t.set(e,new Set);for(const n of o)t.get(e).add(n)}return t}const _=new Set(["vehicle+none+any","trigger","trigger+none","song+none","vehicle","timer","pushf","door","door+none","barrel","decor","lamp","gun","gun+none","region","water","character"]);function*u(e){for(const t in e.pm){const n=e.pm[t],o=g(e,t);yield{paramName:t,paramValue:n,paramType:o}}for(let t=0;t<(e.pm.additionalActions?.length??0);t++){const n=e.pm.additionalActions[t];for(const o of["A","B"]){const r=`actions_${t+(a.Wx+1)} }_target${o}`,i=e.pm[`additionalParam${o}`][t],s=mark_pairs[`trigger_type_${o}${n}`]??null;yield{paramName:r,paramValue:i,paramType:s}}}}const m=/^actions_(\d+)_(type|targetA|targetB)$/;function g(e,t){const n=t.match(m);if(null!==n&&"type"!==n[2]){const t=n[1],o=e.pm[`actions_${t}_type`];return"targetA"===n[2]?mark_pairs["trigger_type_A"+o]??null:mark_pairs["trigger_type_B"+o]??null}{const n=FindMatchingParameterID(t,e._class);return-1===n?null:param_type[n][1]}}var p=n(3150);const b="Find errors result";function h(){unsafeWindow.CheckForErrors=function(){const e=es.filter((e=>e.exists)),t=s(e),n=c(e),o=d(),r=function(e){const t=new Map;return e.forEach((e=>{for(const{paramName:n,paramValue:o,paramType:r}of u(e)){if(!_.has(r))continue;const a=parseInt(o);Number.isFinite(a)&&a>=0&&a.toString()===o.toString()&&(t.has(e)||t.set(e,new Set),t.get(e).add(n))}})),t}(e);Object.values(t).includes(!1)||n.size>0||o.size>0||r.size>0?function(e,t,n,o){const r=Object.values(e).filter((e=>!1===e)).length,s=t.values().reduce(((e,t)=>e+t.size),0),l=n.values().reduce(((e,t)=>e+t.size),0),c=o.values().reduce(((e,t)=>e+t.size),0),d=r>0,_=s>0,u=l>0,m=c>0,g='\n        <table class="params-table">\n            <thead>\n                <tr>\n                    <th>Name</th>\n                    <th>Parameter</th>\n                    <th>Value</th>\n                </tr>\n            </thead>\n            <tbody></tbody>\n        </table>\n    ',h=document.createElement("draggable-window");h.setAttribute("data-title",b),h.style.left="500px",h.style.top="300px",h.setDimensions(650,450),h.insertAdjacentHTML("beforeend",`\n        <div slot="content">\n            <div class="tab-view-container">\n                <div class="tablist">\n                    <div class="tab-label" data-tab="requirements">\n                        <div class="tab-label-text">\n                            <div class="tab-label-icon-container">\n                                <span class="${d?"error-icon":"checkmark-icon"}"></span>\n                            </div>\n                            Requirements\n                        </div>\n                        <span class="tab-label-info">${r}</span>\n                    </div>\n                    <div class="tab-label" data-tab="errors">\n                        <div class="tab-label-text">\n                            <div class="tab-label-icon-container">\n                                <span class="${_?"error-icon":"checkmark-icon"}"></span>\n                            </div>\n                            Errors\n                        </div>\n                        <span class="tab-label-info">${s}</span>\n                    </div>\n                    <div class="tab-label" data-tab="ambiguous-refs">\n                        <div class="tab-label-text">\n                            <div class="tab-label-icon-container">\n                                <span class="${u?"error-icon":"checkmark-icon"}"></span>\n                            </div>\n                            Ambiguous references\n                        </div>\n                        <span class="tab-label-info">${l}</span>\n                    </div>\n                    <div class="tab-label" data-tab="numerical-refs">\n                        <div class="tab-label-text">\n                            <div class="tab-label-icon-container">\n                                <span class="${m?"warning-icon":"checkmark-icon"}"></span>\n                            </div>\n                            Numerical references\n                        </div>\n                        <span class="tab-label-info">${c}</span>\n                    </div>\n                </div>\n                <div class="tabpanel">\n                    <div class="basic-tab hidden-tab" data-tab="requirements">\n                        <span class="tab-text">These are the requirements for the map to be playable.</span>\n                        <div>${function(e){return Object.entries(e).map((([e,t])=>`<div class="requirement-text">${i[e].description}<span class="${t?"checkmark-icon":"error-icon"}"></span></div>`)).join("")}(e)}</div>\n                    </div>\n                    <div class="basic-tab hidden-tab" data-tab="errors">\n                        <span class="tab-text">These are all the <span class="error" style="font-size: 12px">ERROR!</span>'s on the map.</span>\n                        ${_?g:'<span class="tab-text">(no errors to show)</span>'}\n                    </div>\n                    <div class="basic-tab hidden-tab" data-tab="ambiguous-refs">\n                        <span class="tab-text">\n                            These are all the ambiguous references on the map.\n                            <span class="more-info" title="An ambiguous reference is when a parameter refers to an object by a name that multiple objects have. It likely makes the map not work as intended. Fix it by renaming the objects that share a name."></span>\n                        </span>\n                        ${u?g:'<span class="tab-text">(no ambiguous references to show)</span>'}\n                    </div>\n                    <div class="basic-tab hidden-tab" data-tab="numerical-refs">\n                        <span class="tab-text">\n                            These are all the numerical references on the map.\n                            <span class="more-info" title="A numerical reference is when a parameter refers to an object using its number id instead of its uid (name). Numerical references aren't necessarily errors but they can cause bugs that are hard to find."></span>\n                        </span>\n                        ${m?g:'<span class="tab-text">(no numerical references to show)</span>'}\n                    </div>\n                </div>\n            </div>\n        </div>\n    `);const f=h.querySelector('div[slot="content"]'),v={requirements:{label:f.querySelector('.tab-label[data-tab="requirements"]'),tab:f.querySelector('.basic-tab[data-tab="requirements"')},errors:{label:f.querySelector('.tab-label[data-tab="errors"]'),tab:f.querySelector('.basic-tab[data-tab="errors"')},ambiguousRefs:{label:f.querySelector('.tab-label[data-tab="ambiguous-refs"]'),tab:f.querySelector('.basic-tab[data-tab="ambiguous-refs"')},numericalRefs:{label:f.querySelector('.tab-label[data-tab="numerical-refs"]'),tab:f.querySelector('.basic-tab[data-tab="numerical-refs"')}};let w=null;function y(e){v[e].label.classList.add("tab-label--selected"),v[e].tab.classList.remove("hidden-tab")}function E(e){null!==w&&function(e){v[e].label.classList.remove("tab-label--selected"),v[e].tab.classList.add("hidden-tab")}(w),y(e),w=e}function x(e,t){const n=p.sf.slice();(0,p.XV)(),n.forEach((e=>e.selected=!1)),e.selected=!0,need_redraw=!0,UpdateGUIParams();const o=document.getElementById(`pm_${t}`);if(null!==o){const e=o.parentElement;e.scrollIntoView({behavior:"instant",block:"center"}),(r=e).classList.contains("highlighted-param")||(r.classList.add("highlighted-param"),r.addEventListener("animationend",(()=>{r.classList.remove("highlighted-param")}),{once:!0}))}var r}function k(e,t){const n=document.createElement("td");n.textContent=t,e.appendChild(n)}function A(e,t){const n=e.querySelector("tbody");for(const{entity:e,paramName:o,displayedEntityName:r,displayedParamName:i,paramValue:s}of function*(e){const t=/^actions_(\d+)_(type|targetA|targetB)$/;function n(e){if(void 0!==e.pm.uid)return e.pm.uid;let t=known_class2known_class_title(e._class);return t.charAt(0).toUpperCase()+t.slice(1)}function o(e,n){const o=n.match(t);if(null!==o)return`Act. ${o[1]} ${{type:"Type",targetA:"A",targetB:"B"}[o[2]]}`;{const t=FindMatchingParameterID(n,e._class);return-1===t?n:param_type[t][2]}}function r(e,n){if(void 0!==e.pm[n])return e.pm[n];const o=n.match(t);if(null===o)return;const r=Number(o[1]),i={type:"additionalActions",targetA:"additionalParamA",targetB:"additionalParamB"}[o[2]];return e.pm[i]?.[r-(a.Wx+1)]??void 0}for(const[t,a]of e){const e=n(t);for(const n of a){const a=o(t,n),i=r(t,n);yield{entity:t,paramName:n,displayedEntityName:e,displayedParamName:a,paramValue:i}}}}(t)){const t=document.createElement("tr");k(t,r),k(t,i),k(t,s),t.addEventListener("click",(()=>x(e,o))),n.appendChild(t)}}d?w="requirements":_?w="errors":u?w="ambiguousRefs":m&&(w="numericalRefs"),null!==w&&y(w),v.requirements.label?.addEventListener("click",(()=>E("requirements"))),v.errors.label?.addEventListener("click",(()=>E("errors"))),v.ambiguousRefs.label?.addEventListener("click",(()=>E("ambiguousRefs"))),v.numericalRefs.label?.addEventListener("click",(()=>E("numericalRefs"))),v.ambiguousRefs.tab?.querySelector(".more-info")?.addEventListener("dblclick",(e=>alert(e.currentTarget.title))),v.numericalRefs.tab?.querySelector(".more-info")?.addEventListener("dblclick",(e=>alert(e.currentTarget.title)));const C=v.errors.tab.querySelector(".params-table");null!==C&&A(C,t);const M=v.ambiguousRefs.tab.querySelector(".params-table");null!==M&&A(M,n);const D=v.numericalRefs.tab.querySelector(".params-table");null!==D&&A(D,o),document.body.appendChild(h)}(t,n,o,r):alert("No errors were found")}}function f(){var e;unsafeWindow.SaveThisMap=(e=unsafeWindow.SaveThisMap,function(...t){if(e.call(this,...t),aleiSettings.errorCheckOnSave){const e=es.filter((e=>e.exists)),t=s(e),n=c(e),o=d();let r='Errors were found. Click "Find Errors" for more information.',a=0;Object.values(t).includes(!1)&&(a++,r+=`<br>${a}. Some requirements for the map to be playable are not met.`),n.size>0&&(a++,r+=`<br>${a}. Some objects have red errors.`),o.size>0&&(a++,r+=`<br>${a}. Some object references are ambiguous due to objects having shared names.`),a>0&&NewNote(r,note_bad)}})}},6223:(e,t,n)=>{"use strict";function o(){const e=[],t=/^\<span.+?\>(.+?)\<\/span\>/,n=Object.keys(special_values_table.trigger_type);for(let o=0;o<n.length;o++){const r=n[o],a=special_values_table.trigger_type[r].match(t);"Experimental"===a?.[1]&&e.push(o)}const o=unsafeWindow.letedit;unsafeWindow.letedit=function(t,n){if(o(t,n),"trigger_type"===n){const t=ff_drop.firstElementChild;t.firstElementChild.style.color="#ffffff",t.lastElementChild.style.color="#ffffff";for(const e of t.children)e.getAttribute("onclick").startsWith("MaskTriggerActions(")&&("Everything"===e.textContent?e.setAttribute("onclick","MaskTriggerActions('')"):e.setAttribute("onclick",`MaskTriggerActions('${e.textContent}')`));t.nextElementSibling.firstElementChild.setAttribute("onkeyup","MaskTriggerActions(this.value)");const n=[...ff_drop.children].slice(2,-1),o=ff_drop.lastElementChild;for(const t of e)ff_drop.insertBefore(n[t],o)}}}function r(){unsafeWindow.MaskTriggerActions=function(e){e=e.toLowerCase();for(let t=2;t<ff_drop.children.length-1;t++){const n=ff_drop.children[t];n.textContent.toLowerCase().includes(e)?n.style.display="inline-block":n.style.display="none"}}}n.d(t,{c:()=>r,n:()=>o})},6314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(o)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(i[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);o&&i[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},6360:(e,t,n)=>{"use strict";n.d(t,{D:()=>s});var o=n(3150),r=n(9929),a=n(8050),i=n(3338);function s(){if(1!==o.sf.length||"trigger"!==o.sf[0]._class)return;if(0===r.Vf.size)return;const e=o.sf[0];let t=(0,i.Q1)(e);const n=(0,r.sH)();for(let e=n.length-1;e>=0;e--){const o=n[e]-1;t.splice(o,1),t.push({type:-1,targetA:0,targetB:0})}const s=t.slice(n[0]-1),l=n[0];(0,i.A)(s,l),NewNote("Deleted trigger actions.",note_passive),(0,r.EQ)(),need_GUIParams_update=!0,(0,a.jg)()}},6378:(e,t,n)=>{"use strict";n.d(t,{AY:()=>C,Er:()=>M,H8:()=>k,MB:()=>m,dE:()=>u,jo:()=>P,nk:()=>A,ss:()=>h,xP:()=>x,yF:()=>D});var o=n(3987),r=n(2946),a=n(7085),i=n(5146),s=n(3797),l=n(7918),c=n(2839),d=n(5129),_=n(7218);let u;function m(){function e(e,t,n,o){param_type[param_type.length]=[e,t,n,"",o]}e("moving","bool","Is moving","door"),e("tarx","value","Target X","door"),e("tary","value","Target Y","door"),e("mute","bool","Is muted","door"),e("__id","value","Object ID","*"),e("__priority","value","Object priority","*"),e("execute","bool","Executes directly","trigger"),e("uses_timer","bool","Calls timer","region"),e("text","string","Placeholder text","decor"),e("attach","door+none","Attach to","water"),param_type[0]=["uid","string","Name","Object Name","*"];for(let e=0;e<param_type.length;e++){let t=param_type[e],n=t[0],o=t[4];"use_target"!=n||"region"!=o?-1==["w","h"].indexOf(n)||(param_type[e][1]="value+round10"):u=e}special_values_table["timer+none"]=new Array,special_values_table["timer+none"][-1]="- No timer -",special_values_table["timer+none"]["[listof]"]="timer"}const g=/^actions_(\d+)_(targetA|targetB|type)$/,p=new Set(["flare","vis","enabled","friction","loop","s","moving","mute","execute","uses_timer"]),b=new Set(["uid","c","url","text"]);function h(){unsafeWindow.UpdatePhysicalParam=f,unsafeWindow.UpdatePhysicalParams=v}function f(e,t,n=!0){v([e],[t],!1,n)}function v(e,t,n,o=!0){ACTION_cancel();let r=!1,i="";for(let o=0;o<es.length;o++){const l=es[o];if(l.exists&&l.selected)for(let c=0;c<e.length;c++){const d=e[c];let _=t[c];if(!w(l,d)&&!n)continue;if(!MatchLayer(l)){r=!0;break}if("string"==typeof _)_=y(d,_);else if("number"!=typeof _&&"boolean"!=typeof _){alert("Unknown value type: "+typeof _);continue}const m=E(o,d,(0,a.A6)(_));ACTION_add_undo(m.undo),ACTION_add_redo(m.redo),"__id"==d?NewNote("ALEI: Changing Object ID does not do anything, don't expect that to apply.","#FFFFFF"):"__priority"==d?-1!=["bg","decor"].indexOf((s=l)._class)&&s.aleiPriority!==s.pm.__priority&&(s.aleiPriority=s.pm.__priority,M=!0):"uses_timer"==d&&([!0,"true"].includes(l.pm.uses_timer)?param_type[u][1]="timer+none":param_type[u][1]="trigger+none",need_GUIParams_update=!0),i+=`Parameter "${d}" of object "${void 0!==l.pm.uid?l.pm.uid:l._class}" was set to "${_}"<br>`}}var s;need_redraw=!0,o&&NewNote("Operation complete:<br><br>"+i,note_passive),r&&NewNote("Note: Some changes weren't made due to mismatch of active layer and class of selected objects",note_neutral),ACTION_finalize(!1)}function w(e,t){if(e.pm.hasOwnProperty(t))return!0;if(e.pm.extended&&unsafeWindow.ExtendedTriggersLoaded){const n=t.match(g);return null!==n&&Number(n[1])<=e.pm.totalNumOfActions}return!1}function y(e,t){if(p.has(e)){const e={true:!0,false:!1}[t];return void 0!==e?e:t}if(!b.has(e)){const e=parseFloat(t);return Number.isFinite(e)&&e.toString()===t?e:t}return t}function E(e,t,n){let u,m,p="",b="";const h=t.match(g);if(h&&Number(h[1])>_.Wx){const t=Number(h[1])-(_.Wx+1),o={type:"additionalActions",targetA:"additionalParamA",targetB:"additionalParamB"}[h[2]];u=es[e].pm[o][t],m=`es[${e}].pm["${o}"][${t}]`,es[e].pm[o][t]=n}else u=es[e].pm[t],m=`es[${e}].pm["${t}"]`,es[e].pm[t]=n;const f="string"==typeof u?`"${u}"`:u,v="string"==typeof n?`"${n}"`:n;if(p+=`${m} = ${f};`,b+=`${m} = ${v};`,n!==u)if("uid"==t){const t=n.toString(),c=u.toString();if((0,s.Wm)(es[e],c,t),p+=`updateUIDMap(es[${e}], "${t}", "${c}");`,b+=`updateUIDMap(es[${e}], "${c}", "${t}");`,r.F.ocmEnabled&&((0,i.PS)(es[e]),p+=`ocmHandleEntityUIDChange(es[${e}]);`,b+=`ocmHandleEntityUIDChange(es[${e}]);`),r.F.rematchUID){const e=function(e,t){if(1!=(0,a.xx)(e).length||1!=(0,a.xx)(t).length)return{undo:"",redo:""};if(!l.SH.has(e))return{undo:"",redo:""};(0,o.Md)(o.dm.VERBOSE,`Updating UID references from ${o.oH}${e}${o.Sj} to ${o.oH}${t}${o.Sj}`);let n="",r="";for(const[o,i]of l.SH.get(e)){if(!o.exists)continue;const s=es.indexOf(o);for(const l of i){if("uid"==l)continue;let i;const c=l.match(g);if(c&&Number(c[1])>_.Wx){const e={type:"additionalActions",targetA:"additionalParamA",targetB:"additionalParamB"}[c[2]];i=o.pm[e][Number(c[1])-(_.Wx+1)]}else i=o.pm[l];const d=E(s,l,(0,a.tO)(i,e,t));n+=d.undo,r+=d.redo}}return unsafeWindow.need_GUIParams_update=!0,{undo:n,redo:r}}(c,t);p+=e.undo,b+=e.redo}}else(0,l.zC)(es[e],t,u,n),p+=`updateParameterMap(es[${e}], "${t}", ${v}, ${f});`,b+=`updateParameterMap(es[${e}], "${t}", ${f}, ${v});`,r.F.ocmEnabled&&((0,i.Rd)(es[e]),p+=`ocmHandleEntityParametersChange(es[${e}]);`,b+=`ocmHandleEntityParametersChange(es[${e}]);`),d.Ly.has(es[e]._class)&&d.tz.has(t)&&(r.F.renderSpawnAreas&&d.lA(),p+="if (aleiSettings.renderSpawnAreas) scheduleSpawnAreasUpdate();",b+="if (aleiSettings.renderSpawnAreas) scheduleSpawnAreasUpdate();"),c.tz.has(t)&&(c.BC(),p+="wallTexturesSetDirty();",b+="wallTexturesSetDirty();");return{undo:p,redo:b}}function x(){let e={};for(let t of es)t.exists&&(void 0===e[t._class]&&(e[t._class]=-1),e[t._class]+=1,t.aleiID=e[t._class])}function k(){for(let e of es)e.exists&&null==e.aleiPriority&&(e.aleiPriority=1)}let A=[];function C(e){null==e.aleiID&&x(),null==e.aleiPriority&&k(),-1==A.indexOf(e)&&A.push(e);let t=Object.entries(e.pm);t.splice(0,0,["__id",e.aleiID]),-1!==["bg","decor"].indexOf(e._class)&&t.splice(1,0,["__priority",e.aleiPriority]),e.pm=Object.fromEntries(t)}let M=!1;function D(){es=es.sort((function(e,t){return t.aleiPriority-e.aleiPriority}))}function P(e){delete e.pm.__id,delete e.pm.__priority}},6383:(e,t,n)=>{"use strict";n.d(t,{a:()=>_,l:()=>u});var o=n(2946),r=n(1329),a=n(3987),i=n(5146),s=n(5129),l=n(2839);let c,d;function _(){c=document.createElement("div"),c.className="mrpopup",c.innerHTML='\n        <div id="mrtitle">ALEI Settings</div>\n        <div id="mrbox">\n            <p class="settings-text">NOTE: Settings in yellow text require page refresh to be applied.</p>\n            <button class="settings-button settings-button--width-auto" data-action="clear backups">Clear Backups</button>\n            <div class="vertical-gap"></div>\n            <div class="settings-item" data-key="logLevel">\n                <div class="settings-label" title="Specified which log messages are displayed in the console.">Log Level:</div>\n                <button class="settings-button" data-value="0">INFO</button>\n                <button class="settings-button" data-value="1">DEBUG</button>\n                <button class="settings-button" data-value="2">VERBOSE</button>\n            </div>\n            <div class="settings-item settings-item--requires-refresh" data-key="showTriggerIDs">\n                <div class="settings-label" title="Show or hide numerical IDs for trigger actions. Requires a page refresh.">Action IDs:</div>\n                <button class="settings-button" data-value="true">Show</button>\n                <button class="settings-button" data-value="false">Hide</button>\n            </div>\n            <div class="settings-item settings-item--requires-refresh" data-key="enableTooltips">\n                <div class="settings-label" title="Enable or disable fancier tooltips. Requires a page refresh.">Tooltips:</div>\n                <button class="settings-button" data-value="true">Show</button>\n                <button class="settings-button" data-value="false">Hide</button>\n            </div>\n\n            \x3c!--\n            <div class="settings-item" data-key="showIDs">\n                <div class="settings-label" title="placeholder tooltip">Object IDs:</div>\n                <button class="settings-button" data-value="true">Show</button>\n                <button class="settings-button" data-value="false">Hide</button>\n            </div>\n            <div class="settings-item" data-key="showZIndex">\n                <div class="settings-label" title="placeholder tooltip">Z-Index:</div>\n                <button class="settings-button" data-value="true">Show</button>\n                <button class="settings-button" data-value="false">Hide</button>\n            </div>\n            --\x3e\n\n            <div class="settings-item" data-key="showSameParameters">\n                <div class="settings-label" title="Show or hide identical parameters when multiple objects are selected.">Same Parameters:</div>\n                <button class="settings-button" data-value="true">Show</button>\n                <button class="settings-button" data-value="false">Hide</button>\n            </div>\n            <div class="settings-item" data-key="gridBasedOnSnapping">\n                <div class="settings-label" title="Specifies if grid size is determined by the snapping setting.">Grid by snap:</div>\n                <button class="settings-button" data-value="true">Yes</button>\n                <button class="settings-button" data-value="false">No</button>\n            </div>\n            <div class="settings-item" data-key="renderObjectNames">\n                <div class="settings-label" title="Enable or disable rendering of object names.">Show object names: </div>\n                <button class="settings-button" data-value="true">Yes</button>\n                <button class="settings-button" data-value="false">No</button>\n            </div>\n            <div class="settings-item" data-key="rematchUID">\n                <div class="settings-label" title="Automatically update object UID references when a UID is changed.">Remap UID: </div>\n                <button class="settings-button" data-value="true">Enabled</button>\n                <button class="settings-button" data-value="false">Disabled</button>\n            </div>\n            <div class="settings-item settings-item--requires-refresh" data-key="extendedTriggers">\n                <div class="settings-label" title="Enable or disable triggers with more than 10 actions (100 if in HTML5 mode). Requires a page refresh.">Extended triggers:</div>\n                <button class="settings-button settings-button--disabled" data-value="true">Enabled</button>\n                <button class="settings-button settings-button--disabled" data-value="false">Disabled</button>\n                <div style="font-size: 12px; opacity: 0.8;" title="(due to severe bugs)">Temporarily disabled</div>\n            </div>\n            <div class="settings-item" data-key="orderedNaming">\n                <div class="settings-label" title="Ensure similar object names are numbered sequentially.">Ordered Naming:</div>\n                <button class="settings-button" data-value="true">Yes (Slow)</button>\n                <button class="settings-button" data-value="false">No (Fast)</button>\n            </div>\n            <div class="settings-item settings-item--requires-refresh" data-key="customRenderer">\n                <div class="settings-label" title="Enable or disable The Official ALEI-branded Renderer (it\'s faster!). Requires a page refresh.">Custom Renderer:</div>\n                <button class="settings-button" data-value="true">Enabled</button>\n                <button class="settings-button" data-value="false">Disabled</button>\n            </div>\n            <div class="settings-item" data-key="cartoonishEdges">\n                <div class="settings-label" title="Render cartoonish edges (custom renderer setting).">[R] Cartoonish Edges:</div>\n                <button class="settings-button" data-value="true">Yes</button>\n                <button class="settings-button" data-value="false">No</button>\n            </div>\n            <div class="settings-item" data-key="originalSelectOverlay">\n                <div class="settings-label" title="Use the original selection indicator (custom renderer setting).">[R] Original Select:</div>\n                <button class="settings-button" data-value="true">Yes</button>\n                <button class="settings-button" data-value="false">No</button>\n            </div>\n            <div class="settings-item" data-key="boxRendering">\n                <div class="settings-label" title="Render preview for floors and ceilings (custom renderer setting). Work-in-progress.">[R] Preview walls:</div>\n                <button class="settings-button" data-value="true">Yes</button>\n                <button class="settings-button" data-value="false">No</button>\n            </div>\n            <div class="settings-item" data-key="showTextPlaceholderDecors">\n                <div class="settings-label" title="Render the text of a text decor instead of the placeholder image (custom renderer setting).">[R] Render placeholders:</div>\n                <button class="settings-button" data-value="true">Yes</button>\n                <button class="settings-button" data-value="false">No</button>\n            </div>\n            <div class="settings-item" data-key="renderSpawnAreas">\n                <div class="settings-label" title="Render valid DM/TDM spawn areas (custom renderer setting).">[R] Render spawn areas:</div>\n                <button class="settings-button" data-value="true">Yes</button>\n                <button class="settings-button" data-value="false">No</button>\n            </div>\n            <div class="settings-item settings-item--requires-refresh" data-key="html5Mode">\n                <div class="settings-label" title="Hide options and features not available on the HTML5 port of PB2. Requires a page refresh.">HTML5 mode:</div>\n                <button class="settings-button" data-value="true">Yes</button>\n                <button class="settings-button" data-value="false">No</button>\n            </div>\n            <div class="settings-item" data-key="errorCheckOnSave">\n                <div class="settings-label" title="Automatically check for errors when saving the map.">Check errors on save:</div>\n                <button class="settings-button" data-value="true">Yes</button>\n                <button class="settings-button" data-value="false">No</button>\n            </div>\n            <div class="settings-item settings-item--requires-refresh" data-key="experimentalExtTriggers">\n                <div class="settings-label" title="Enable the experimental rewritten extended triggers (incomplete and may have bugs).">Exp. extended triggers:</div>\n                <button class="settings-button" data-value="true">Yes</button>\n                <button class="settings-button" data-value="false">No</button>\n            </div>\n        </div>\n    ';const e=c.getElementsByClassName("settings-item"),t=90+20*e.length;function n(e,t){return"true"===t||"false"!==t&&("logLevel"===e?parseInt(t)||0:t)}t>300&&(c.querySelector("#mrbox").style.height=`${t}px`),c.querySelector('[data-action="clear backups"]').addEventListener("click",(()=>{if(!confirm("This will remove map backups from the browser data. Continue?"))return;let e=[];for(let t of Object.keys(localStorage))"pb2_map"==t.slice(0,7)&&(e.push(t),localStorage.removeItem(t));NewNote(`ALEI: Cleared backup, removed total ${e.length} backups.`,"#00FFFF"),(0,a.Md)(a.dm.VERBOSE,`Removed backup of: ${e}`)}));const _={renderObjectNames:e=>{ENABLE_TEXT=e,need_redraw=!0,UpdateTools()},rematchUID:e=>UpdateTools(),ocmEnabled:e=>{e?(0,i.yb)():(0,i.p3)()},showSameParameters:()=>{need_GUIParams_update=!0},renderSpawnAreas:e=>{e&&s.lA()},boxRendering:e=>{e&&l.BC()}};function u(e,t,n,a){(0,r.P)(t,n),o.F[e]=n,null!==a&&a(n);for(const t in d[e])d[e][t].classList.remove("settings-button--toggled");d[e][n].classList.add("settings-button--toggled")}d={};for(const t of e){const e=t.dataset.key,r=o.K[e],a=_[e]||null;d[e]={};for(const o of t.getElementsByClassName("settings-button")){const t=n(e,o.dataset.value);o.classList.contains("settings-button--disabled")||o.addEventListener("click",(()=>u(e,r,t,a))),d[e][t]=o}}unsafeWindow.ALEI_settingsMenu=c,document.body.appendChild(c),(0,a.Md)(a.dm.DEBUG,"Created settings window.")}function u(){void 0===c&&_(),function(){for(const e in d){for(const t in d[e])d[e][t].classList.remove("settings-button--toggled");const t=o.F[e],n=d[e][t];void 0!==n&&n.classList.add("settings-button--toggled")}}(),mrdimlights.style.display="block",c.style.display="block",dim_undo="ALEI_settingsMenu.style.display = 'none'"}},6586:(e,t,n)=>{"use strict";n.d(t,{F:()=>d});var o=n(2946),r=n(3987),a=n(1271),i=n(1329),s=n(5129);function l(e){o.F.rematchUID=e,(0,i.P)("ALEI_RemapUID",e),unsafeWindow.UpdateTools()}function c(e){o.F.renderObjectNames=e,(0,i.P)("ALEI_RenderObjectNames",e),unsafeWindow.ENABLE_TEXT=e,unsafeWindow.need_redraw=!0,unsafeWindow.UpdateTools()}function d(){let e=unsafeWindow.UpdateTools;unsafeWindow.UpdateTools=function(){e(),function(){const e=document.querySelector("a[onmousedown=\"EvalSet('param_panel_size',0);SaveBrowserSettings();UpdateCSS();\"]");e.previousElementSibling.remove(),e.previousElementSibling.remove(),e.previousElementSibling.remove(),e.nextElementSibling.remove(),e.nextElementSibling.remove(),e.nextElementSibling.remove(),e.nextElementSibling.remove(),e.nextElementSibling.remove(),e.nextElementSibling.remove(),e.remove()}(),function(){document.querySelector('a[onmousedown="GridSnappingSet(50);"]').remove(),document.querySelector('a[onmousedown="GridSnappingSet(100);"]').remove();let e="",t=[1,2,5,10,20,40,50,100,"C"];for(let n in t){let o=t[n];n%3==0&&0!=n&&(e+="<br>");let r=document.createElement("a");r.innerHTML="C"!=o?o/10:"C";let a="tool_btn";GRID_SNAPPING==o&&(a="tool_btn2"),t.includes(GRID_SNAPPING)||"C"!=o||(a="tool_btn2"),r.setAttribute("class",`${a} tool_wid`),r.setAttribute("style","width: 21px;"),"C"!=o?r.setAttribute("onmousedown",`GridSnappingSet(${o}); Render();`):r.setAttribute("onmousedown","ALEI_CustomSnapping(); Render();"),e+=r.outerHTML}document.querySelector('a[onmousedown="GridSnappingSet(10);"]').outerHTML=e}(),function(){const e=o.F.rematchUID?"tool_btn":"tool_btn2",t=o.F.rematchUID?"tool_btn2":"tool_btn",n=document.querySelector("a[onmousedown=\"EvalSet('FORCE_TEXT_OPTIONS',true);EvalSet('need_GUIParams_update',true);\"]").nextElementSibling.nextElementSibling;n.insertAdjacentHTML("afterend",`\n        <br>\n        <span class="gui_sel_info">\n            Remap UID:\n            <br>\n        </span>\n        <div style="height:5px"></div>\n        <a class="${e} tool_wid" style="width:32px;">No</a\n        ><a class="${t} tool_wid" style="width:32px;">Yes</a\n        ><br>\n        <div class="q"></div>\n    `);const r=n.nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling,a=r.nextElementSibling;r.addEventListener("click",(()=>l(!1))),a.addEventListener("click",(()=>l(!0)))}(),function(){const e=o.F.renderObjectNames?"tool_btn":"tool_btn2",t=o.F.renderObjectNames?"tool_btn2":"tool_btn",n=document.querySelector('a[onmousedown="ShowTexturesSet(true);"]').nextElementSibling.nextElementSibling;n.insertAdjacentHTML("afterend",`\n        <br>\n        <span class="gui_sel_info">\n            Object names:\n            <br>\n        </span>\n        <div style="height:5px"></div>\n        <a class="${e} tool_wid" style="width:32px;">Hide</a\n        ><a class="${t} tool_wid" style="width:32px;">Show</a\n        ><br>\n        <div class="q"></div>\n    `);const r=n.nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling,a=r.nextElementSibling;r.addEventListener("click",(()=>c(!1))),a.addEventListener("click",(()=>c(!0)))}(),function(){const e=document.querySelector('a[onmousedown="ThemeSet(THEME_GREEN);"]'),t=e.parentElement,n=e.nextElementSibling;let o=0;for(let e=4;e<4+a.dp;e++){if(o%2==0){const e=document.createElement("br");t.insertBefore(e,n)}const r=document.createElement("a");e!=THEME?r.className="tool_btn tool_wid":r.className="tool_btn2 tool_wid",r.setAttribute("onmousedown",`ThemeSet(${e});`),r.style.width="32px",r.textContent=a.sK[e],t.insertBefore(r,n),o++}}(),function(){const e=o.F.renderSpawnAreas?"tool_btn":"tool_btn2",t=o.F.renderSpawnAreas?"tool_btn2":"tool_btn",n=document.querySelector('a[onmousedown="PreviewQualitySet(true);"]').nextElementSibling.nextElementSibling;n.insertAdjacentHTML("afterend",`\n        <br>\n        <span class="gui_sel_info">\n            Spawn areas:\n            <br>\n        </span>\n        <div style="height:5px"></div>\n        <a class="${e} tool_wid" style="width:32px;">Hide</a\n        ><a class="${t} tool_wid" style="width:32px;">Show</a\n        ><br>\n        <div class="q"></div>\n    `);const r=n.nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling,a=r.nextElementSibling;function l(e){o.F.renderSpawnAreas=e,(0,i.P)("ALEI_Renderer_SpawnAreas",e),e&&s.lA(),unsafeWindow.UpdateTools()}r.addEventListener("click",(()=>l(!1))),a.addEventListener("click",(()=>l(!0)))}()},unsafeWindow.UpdateTools(),(0,r.Md)(r.dm.DEBUG,"Patched updateTools.")}unsafeWindow.ALEI_CustomSnapping=()=>{let e=prompt("Enter snapping:","");if(e){if(!isNaN(Number(e)))return e<.1?(e=.1,void NewNote("ALEI: Snapping can't be less than 0.1","#FF0000")):e>100?(e=100,void NewNote("ALEI: Snapping can't be greater than 100","#FF0000")):void GridSnappingSet(Math.round(10*e));NewNote("Invalid snapping.","#FF0000")}}},7062:(e,t,n)=>{"use strict";n.d(t,{q:()=>D});var o=n(3150),r=n(6378),a=n(3987),i=n(4168);const s={box:"wall",door:"movable object",region:"region",pushf:"pushing area",bg:"background",water:"water area",player:"player",enemy:"enemy",vehicle:"vehicle",decor:"decoration",gun:"gun",lamp:"lamp",barrel:"barrel",trigger:"trigger",timer:"timer",inf:"engine mark",song:"song",image:"Image info"};var l=n(2946);const c=new Set(["string","value+round10","value","value>0","int","value>0+round10","value>=0","value>0+round1","value>=0+round1"]);function d(e,t){if(FORCE_TEXT_OPTIONS||c.has(e))return t;let n;return n="nochange"==e?"- not used -":special_value(e,t),"string"==typeof t&&(t=t.replaceAll('"',"&quot;")),`<pvalue real="${t}">${n}</pvalue>`}function _(e){let t=new Map;const n=new Set;for(const o of e)for(const e in o.pm){const r=FindMatchingParameterID(e,o._class);if(-1!==r&&!n.has(r))if(t.has(r)){const a=t.get(r);a.multiple=!0,a.value!==o.pm[e]&&(a.same=!1,n.add(r))}else t.set(r,{value:o.pm[e],multiple:!1,same:!0})}return t}function u(e){let t=[];return unsafeWindow.ExtendedTriggersLoaded&&e.filter((e=>e.pm.extended)).forEach((e=>{for(let n=0;n<e.pm.additionalActions.length;n++)if(n>=t.length)t.push({type:{value:e.pm.additionalActions[n],same:!0},targetA:{value:e.pm.additionalParamA[n],same:!0},targetB:{value:e.pm.additionalParamB[n],same:!0},multiple:!1});else{const o=t[n];o.multiple=!0,o.type.same&&o.type.value!==e.pm.additionalActions[n]&&(o.type.same=!1),o.targetA.same&&o.targetA.value!==e.pm.additionalParamA[n]&&(o.targetA.same=!1),o.targetB.same&&o.targetB.value!==e.pm.additionalParamB[n]&&(o.targetB.same=!1)}})),t}var m=n(7163),g=n(4161),p=n(6113),b=n(7218);const h=/^actions_(\d+)_(type|targetA|targetB)$/;const f='<a class="tool_btn tool_wid" style="width:100%;display:block;" onclick="edit_triggers_as_text=true;UpdateGUIParams()">Edit triggers as text</a>',v='<a onclick="getImageSize();" class="tool_btn tool_wid" style="display: block; width: 100%; margin-top: 4px;">Get image size</a>',w='<a onclick="centerImageX();" class="tool_btn tool_wid" style="display: block; width: 100%; margin-top: 4px;">Center decoration X</a>',y='<a onclick="centerImageY();" class="tool_btn tool_wid" style="display: block; width: 100%; margin-top: 4px;">Center decoration Y</a>',E='\n    <div class="two-element-grid">\n        <a onclick="addTriggerActionCount(1)" class="tool_btn tool_wid" style="display: block; width: 95%; margin-top: 4px;">(+) Extend trigger action list.</a>\n        <a onclick="addTriggerActionCount(-1)" class="tool_btn tool_wid" style="display: block; width: 95%; margin-top: 4px;">(-) Shrink trigger action list.</a>\n    </div>\n\n    <div class="two-element-grid">\n        <div class="two-element-grid">\n            <a onclick="addTriggerActionCount(5)" class="tool_btn tool_wid" style="display: block; width: 90%; margin-top: 4px;">(+5)</a>\n            <a onclick="addTriggerActionCount(10)" class="tool_btn tool_wid" style="display: block; width: 90%; margin-top: 4px;">(+10)</a>\n        </div>\n\n        <div class="two-element-grid">\n            <a onclick="addTriggerActionCount(-5)" class="tool_btn tool_wid" style="display: block; width: 90%; margin-top: 4px;">(-5)</a>\n            <a onclick="addTriggerActionCount(-10)" class="tool_btn tool_wid" style="display: block; width: 90%; margin-top: 4px;">(-10)</a>\n        </div>\n    </div>\n';function x(){function e(e){const t=e.querySelector("pvalue");return null!==t?t.getAttribute("real").replaceAll("<","&lt;").replaceAll(">","&gt;"):null!==e.querySelector("nochange")||e.innerHTML.includes("&lt;nochange&gt;...&lt;/nochange&gt;")?"<nochange>...</nochange>":e.innerHTML.replaceAll("<","&lt;").replaceAll(">","&gt;")}function t(t,n){const o=document.getElementById(t);if(null===o)return;o.setAttribute("onclick",`letedit(this, '${n}')`),o.setAttribute("onmouseover",`letover(this, '${n}')`);const r=e(o);o.innerHTML="<nochange>...</nochange>"===r?"<nochange>...</nochange>":d(n,r)}let n=document.getElementById("pm_mark");null!==n&&t("pm_forteam",mark_pairs["mark_"+e(n)]??"nochange");let o=1;for(;null!==(n=document.getElementById(`pm_actions_${o}_type`));){for(const r of["A","B"])t(`pm_actions_${o}_target${r}`,mark_pairs[`trigger_type_${r}${e(n)}`]??"nochange");o++}}var k=n(7085),A=n(9929),C=n(8050);const M={none:0,normal:1,textedit:2};function D(){!function(){let e={};for(const t of known_class){e[t]={};for(let n=0;n<param_type.length;n++){const o=param_type[n][4];if("*"===o||o===t){const o=param_type[n][0];e[t][o]=n}}}unsafeWindow.FindMatchingParameterID=(t,n)=>e[n]?.[t]??-1}(),unsafeWindow.UpdateGUIParams=P,unsafeWindow.StreetMagic=x,unsafeWindow.GenParamVal=d,(0,a.Md)(a.dm.DEBUG,"Patched parameters GUI")}function P(){for(let e of r.nk)e.selected||((0,r.jo)(e),r.nk.splice(r.nk.indexOf(e),1));o.sf.forEach((e=>(0,r.AY)(e))),1==o.sf.length&&"region"==o.sf[0]._class&&([!0,"true"].includes(o.sf[0].pm.uses_timer)?param_type[r.dE][1]="timer+none":param_type[r.dE][1]="trigger+none"),unfocusedit(),ff.style.display="none",(0,i.AL)(),(0,A.EQ)(),(0,C.jg)();const e=document.getElementById("rparams")?.scrollTop??0,t=document.getElementById("opcode_field")?.scrollTop??0;gui_params.innerHTML=`\n        <div id="gui_sel_info" class="gui_sel_info">${function(e){if(0===e.length)return"Nothing selected";{let t={};for(const n of e)n._class in t||(t[n._class]=0),t[n._class]++;const n=Object.keys(t);let o=n.map((e=>{const n=t[e];return`${n} ${tonumerous(s[e],n)}`})).join(", ");if(1===n.length){const t=e.filter((e=>void 0!==e.pm.uid)).map((e=>`"${e.pm.uid}"`)).join(", ");t.length>0&&(o+=": "+t)}const r=e.length>1;return`${e.length} object${r?"s":""} selected (${o}) <a href="#" onclick="ForceDeselect()"><img src="noap.png" width="11" height="11" border="0"></a>`}}(o.sf)}</div>\n        <br>\n        <div class="q"></div>\n        <br>\n    `;const n=function(e){return 0===e.length?M.none:edit_triggers_as_text&&1===e.length&&"trigger"===e[0]._class?M.textedit:M.normal}(o.sf);if(n===M.normal){const t=document.createElement("div");t.id="rparams",gui_params.appendChild(t),function(e,t){const n=function(e){return{normal:_(e),additional:u(e)}}(t);let o="";o+=function(e){let t="",n="pa1 p_u1 r_lt",o="pa2 p_u2 r_rt",r=0,a=0;const i=e.normal.size-1;for(const[s,c]of e.normal.entries()){1===r&&(n="pa1 p_u1",o="pa2 p_u2"),r===i&&0===e.additional.length&&(n+=" p_u0 r_lb",o+=" p_u0 r_rb");const _=param_type[s][0],u=param_type[s][1],m=param_type[s][2],g=!c.multiple||c.same&&l.F.showSameParameters?d(u,c.value):"<nochange>...</nochange>";if("trigger_type"===u){const e=_.match(h);if(null!==e&&"type"===e[2]){const n=e[1];a=n,n<=b.Wx&&(t+=`<div class="trigger-action" data-action-num="${n}">`)}}("trigger_type"===u&&a<=b.Wx||_.startsWith("actions_")&&"nochange"===u&&a<=b.Wx||!_.startsWith("actions_"))&&(t+=`\n                <div class="p_i">\n                    <span class="${n}">${m}:</span\n                    ><span class="${o}" onclick="letedit(this, '${u}')" onmouseover="letover(this, '${u}')" id="pm_${_}">${g}</span>\n                </div>\n            `),_.endsWith("_targetB")&&(t+="</div>"),r++}return t}(n),o+=function(e){let t="";if(e.additional.length>0){const n=e.additional.length-1;e.additional.forEach(((e,o)=>{const r=o+(b.Wx+1),a=!e.multiple||e.type.same&&l.F.showSameParameters?d("trigger_type",e.type.value):"<nochange>...</nochange>",i=!e.multiple||e.targetA.same&&l.F.showSameParameters?d("nochange",e.targetA.value):"<nochange>...</nochange>",s=!e.multiple||e.targetB.same&&l.F.showSameParameters?d("nochange",e.targetB.value):"<nochange>...</nochange>";t+=`\n                <div class="trigger-action" data-action-num="${r}">\n                    <div class="p_i">\n                        <span class="pa1 p_u1">Action '${r}' type:</span\n                        ><span class="pa2 p_u2" onclick="letedit(this, 'trigger_type')" onmouseover="letover(this, 'trigger_type')" id="pm_actions_${r}_type">${a}</span>\n                    </div>\n                    <div class="p_i">\n                        <span class="pa1 p_u1">- parameter A:</span\n                        ><span class="pa2 p_u2" onclick="letedit(this, 'nochange')" onmouseover="letover(this, 'nochange')" id="pm_actions_${r}_targetA">${i}</span>\n                    </div>\n                    <div class="p_i">\n                        <span class="${o!==n?"pa1 p_u1":"pa1 p_u1 p_u0 r_lb"}">- parameter B:</span\n                        ><span class="${o!==n?"pa2 p_u2":"pa2 p_u2 p_u0 r_rb"}" onclick="letedit(this, 'nochange')" onmouseover="letover(this, 'nochange')" id="pm_actions_${r}_targetB">${s}</span>\n                    </div>\n                </div>\n            `}))}return t}(n),o+=function(e){if(1===e.length){if("bg"==e[0]._class)return v;if("decor"==e[0]._class)return v+w+y;if("trigger"==e[0]._class)return unsafeWindow.ExtendedTriggersLoaded?f+E:f}return""}(t),e.insertAdjacentHTML("beforeend",o),1===t.length&&"trigger"==t[0]._class&&function(e,t){(0,g.Gg)(t),(0,g.gI)(e);const n=(0,m.Wq)(t);for(const e of n){const t=e+1,n=document.getElementById(`pm_actions_${t}_type`)?.parentElement?.parentElement??null;if(null===n||!n.classList.contains("trigger-action"))continue;const o=(0,g.Db)(e);n.insertAdjacentElement("beforebegin",o),(0,g.Fd)(o)}}(e,t[0]),(0,i.Zt)(e),(0,p.A)(e),x()}(t,o.sf),t.scrollTop=e}else if(n===M.textedit){const n=document.createElement("div");n.id="rparams",gui_params.appendChild(n),function(e,t){let n="";const o=e=>{n+=e+"\n"},r=e=>trigger_opcode_aliases[e]??`op${e}`;o(`uid: ${t.pm.uid}`),o(`enabled: ${t.pm.enabled}`),o(`maxcalls: ${t.pm.maxcalls}`),o(`execute: ${t.pm.execute}`),o("");for(let e=1;e<=b.Wx;e++){const n=t.pm[`actions_${e}_type`];if(-1==n)continue;const a=(0,k.A6)(t.pm[`actions_${e}_targetA`]),i=(0,k.A6)(t.pm[`actions_${e}_targetB`]);o(`${r(n)}( "${a}", "${i}" );`)}if(unsafeWindow.ExtendedTriggersLoaded&&t.pm.extended)for(let e=0;e<t.pm.additionalActions.length;e++){const n=t.pm.additionalActions[e];if(-1==n)continue;const a=(0,k.A6)(t.pm.additionalParamA[e]),i=(0,k.A6)(t.pm.additionalParamB[e]);o(`${r(n)}( "${a}", "${i}" );`)}e.insertAdjacentHTML("beforeend",'\n        <div style="width:220px;white-space:normal;">This feature should not give you much more freedom, yet you might find it useful to copy/paste/cut trigger actions here.</div>\n        <br>\n        <textarea id="opcode_field" class="opcode_field" style="display:block;width:100%;height:400px" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"></textarea\n        ><a class="tool_btn tool_wid" style="width:100%;height:50px;display:block;line-height:50px;" onclick="if ( CompileTrigger() ) UpdateGUIParams();">Apply</a>\n        <br\n        ><a class="tool_btn tool_wid" style="width:100%;display:block;" onclick="edit_triggers_as_text=false;UpdateGUIParams()">Edit triggers as param list</a>\n    '),document.getElementById("opcode_field").value=n}(n,o.sf[0]),n.scrollTop=e,document.getElementById("opcode_field").scrollTop=t}r.Er&&(0,r.yF)()}},7085:(e,t,n)=>{"use strict";function o(e){let t=[e];if("string"==typeof e){const n=e.split(",");2==n.length&&(" "==n[1].charAt(0)&&(n[1]=n[1].substring(1)),n[0].length>0&&n[1].length>0&&t.push(...n))}return t}function r(e,t,n){if("string"!=typeof e)return e;const r=o(e);return 1===r.length?e===t?n:e:r.slice(1).map((e=>e===t?n:e)).join(", ")}function a(e){return"string"!=typeof e?e:e.replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;")}n.d(t,{A6:()=>a,tO:()=>r,xx:()=>o})},7163:(e,t,n)=>{"use strict";n.d(t,{Ah:()=>a,E1:()=>o,Wq:()=>l,fL:()=>r,oU:()=>c,rw:()=>s,wI:()=>i});const o="";function r(e,t,n){void 0===e.comments&&(e.comments={}),e.comments[t]=n}function a(e,t,n){c(e,t)&&(e.comments[t]=n)}function i(e,t){delete e.comments[t],0==Object.keys(e.comments).length&&delete e.comments}function s(e,t){return e.comments[t]}function l(e){return function(e){return void 0!==e.comments}(e)?Object.keys(e.comments).map((e=>parseInt(e))):[]}function c(e,t){return void 0!==e.comments&&void 0!==e.comments[t]}},7218:(e,t,n)=>{"use strict";n.d(t,{Em:()=>s,Wx:()=>l,xZ:()=>c});var o=n(3987);const r=new Set(["mute","marine","cs","ghost","usurpation","usurpation_destroyer","android","hum_droid","proxy","proxy_helmetless","silk","noir_lime","grub","falkok","falkok_phoenix","star_defender","mine_droid","reakhohsha","hexagon","civilian_male","vulture","crossfire_sentinel"]),a=new Set(["am_base","am_wind","android_die","android_die_1","android_enemy_down1","android_hurt","android_miner_die","android_miner_enemy_down","android_miner_hurt","android_miner_welcome2","android_welcome","android_welcome1","android_welcome2","android_welcome3","android2_die","android2_hurt","android2_welcome2","badge_earned","barrel","barrel2","beam1","beam1_recharge","beam1_rechargeB","beam5","beam5_recharge","beam5_rechargeB","explode_bfg","sou_blade_swing1","sou_blade_swing2","sou_blade_swing3","blood_body","blood_body2","blood_head","blood_head2","blood_hit","blood_hit_sword","blood_leg_arm","body_fall","body0","body1","body2","body3","bounce_bullet","box_die","box_hor","box_ver1","box_ver2","box_ver3","capsule_hit1","capsule_hit2","charged_explosion","chat","civilian_male_celebrate1","civilian_male_celebrate2","civilian_male_death1","civilian_male_death2","civilian_male_dying1","civilian_male_dying2","civilian_male_hurt1","civilian_male_hurt2","civilian_male_hurt3","civilian_male_hurt4","civilian_male_welcome1","civilian_male_welcome2","civilian_male_welcome3","coolbuddy2","coop_defeat","coop_draw","coop_time_warning","coop_victory","corvett_die","crossfire_sentinel_celebrate1","crossfire_sentinel_celebrate2","crossfire_sentinel_death1","crossfire_sentinel_death2","crossfire_sentinel_death3","crossfire_sentinel_dying","crossfire_sentinel_hurt1","crossfire_sentinel_hurt2","crossfire_sentinel_hurt3","crossfire_sentinel_welcome1","crossfire_sentinel_welcome2","crossfire_sentinel_welcome3","dart4","wea_ditzy_cs_ik","wea_ditzy_cs_ik2","drone_die","drone_hurt","enemy_alert","enemy_die_1","enemy_die_2","enemy_die_3","enemy_die_4","enemy_die1","enemy_hurt_1","enemy_hurt_2","enemy_hurt_3","enemy_hurt1","exp_event_stop","exp_level","exp_tick","explode_underwater","explode1","explode2","f_death1","f_death2","f_death3","f_pain2","f_pain3","f_pain4","f_welcome1","fail_shot","fp_death1","fp_death2","fp_death3","fp_pain2","fp_pain3","fp_pain4","fp_welcome1","g_death1","g_death2","g_death3","g_pain1","g_pain2","g_pain3","g_welcome1","glass1","glass2","gravitator2","grenade","grenade_act","wea_gl","grenade_wet","s_gun_rayrifle","helm_proxy_alert_over_hereB","helm_proxy_alert_take_coverB","helm_proxy_alert_up_thereA","helm_proxy_death3","helm_proxy_death4","helm_proxy_death5","helm_proxy_death6","helm_proxy_dyingC","helm_proxy_dyingF","helm_proxy_enemy_down_fantasticA","helm_proxy_enemy_down_got_oneD","helm_proxy_enemy_down_niceA","helm_proxy_enemy_down_niceC","helm_proxy_hurt11","helm_proxy_hurt12","helm_proxy_hurt13","helm_proxy_hurt14","helm_proxy_hurt15","helm_proxy_hurt17","helm_proxy_hurt4","helm_proxy_hurt5","helm_proxy_hurt8","helm_proxy_hurt9","hero_death1","hero_death2","hero_pain1","hero_pain2","hero_pain3","hero_pain4","hero_welcome1","hero_welcome2","hero_welcome3","hexagon_death1","hexagon_death2","hexagon_pain1","hexagon_pain2","hexagon_pain4","hexagon_pain3","hexagon_welcome1","hexagon_welcome2","hexagon_welcome3","hint_appear","hint_disappear","hit_dmg","hit_dmg2","hit_dmg3","hit_frag","s_info","s_info_act","s_info_off","gameplay_song","last_teleport","marine_alert","marine_alert2","marine_alert3","marine_alert4","marine_death1","marine_death2","marine_death3","marine_dying","marine_hurt1","marine_hurt2","marine_hurt3","metal_gib","metal_hit","metal_hor","metal_ver1","metal_ver2","metal_ver3","mission_done","wea_moonhawk_smg2","nade_throw","noir_die","noir_hurt1","noir_hurt2","main_song","plasma_explosion","portnade_act2","portnade_explode","proxy_alert_over_hereB","proxy_alert_take_coverB","proxy_alert_up_thereA","proxy_death3","proxy_death4","proxy_death5","proxy_death6","proxy_dyingC","proxy_dyingF","proxy_enemy_down_fantasticA","proxy_enemy_down_got_oneD","proxy_enemy_down_niceA","proxy_enemy_down_niceC","proxy_hurt11","proxy_hurt12","proxy_hurt13","proxy_hurt14","proxy_hurt15","proxy_hurt17","proxy_hurt4","proxy_hurt5","proxy_hurt8","proxy_hurt9","wea_railgun","reakhohsha_death3","reakhohsha_hurt1","reakhohsha_hurt2","reakhohsha_hurt3","reakhohsha_welcome1","reakhohsha_welcome2","rl_reload","robo_bug_hit","robo_bug_jump","robo_bug_launch","robo_step1","robo_step2","robo_step3","robo_step4","wea_rocket_launch","reload","sd_death","sd_hurt1","sd_hurt2","sd_welcome2","ship_explosion","ship_incoming","shnade_act","shnade_explode","shnade_hit","shnade_hit_low","shnade_offline","silenced","silk_alert_contactA","silk_alert_i_see_oneA","silk_alert_there_is_oneA","silk_death1B","silk_death2B","silk_dyingB","silk_enemy_down_brilliantC","silk_enemy_down_eliminatedB","silk_enemy_down_hell_yeahB","silk_enemy_down_ive_got_oneB","silk_enemy_down_minus_oneB","silk_enemy_down_no_kicking_for_youB","silk_hurt1B","silk_hurt2B","silk_hurt5","silk_hurt6","slicer_alert","slicer_die","slow_down","slow_up","steel_hard","steel_hor","steel_low","steel_med","step1","step2","step3","step4","t_door1_start","t_door1_stop","t_switch_denied","t_switch1","t_switch2","team_switch","teleport_spawn","test_sound","usurpation_alert","usurpation_death2","usurpation_death3","usurpation_dying","usurpation_hurt","wea_vehcannon","vulture_celebrate1","vulture_celebrate2","vulture_celebrate3","vulture_death1","vulture_death2","vulture_dying","vulture_hurt1","vulture_hurt2","vulture_hurt3","vulture_hurt4","vulture_welcome1","vulture_welcome2","vulture_welcome3","walker_die","walker_phase1","walker_phase2","walker_step","warmup","warmup_ping","water_splash1","water_splash2","water_splash3","wea_acid_gl3","wea_alien_rail_sg","wea_android_railgun","wea_android_shotgun","wea_android_sniper","wea_apistol","wea_auto_sg2","wea_bison","wea_crossfire2","wea_darkstar_rl3","wea_defibrillator","wea_ditzy_energy_rifle","wea_energy","wea_evil_shot","wea_glhf","wea_impulse","wea_incompetence_archetype_27xx_fire","wea_lazyrain_gravy_rl","wea_lmg","wea_m202","wea_mingun","wea_mingun2","wea_moonhawk_railgun","wea_plasmagun","wea_ph01","wea_phanx","wea_pistol","wea_pistol2","wea_plasma_shotgun","wea_plasma_smg","wea_rail_alt","wea_rail_alt2","wea_rail_toxic2","wea_real_rifle","wea_real_shotgun","wea_real_shotgun_r","wea_revolver5","wea_rifle","wea_rifle_alt","wea_rifle_nade","wea_roxxar_rifle","wea_shotgun","wea_shotgun_alt","wea_sniper","wea_thetoppestkek_shotgun_nxs25","wea_vehminigun","wea1","wea2","wea_pickup","hp_dead","hp_warn"]),i=e=>e<=150;let s=!1,l=100;function c(){!function(){let e=0;for(const t of Object.keys(special_values_table.voice_preset))r.has(t)||(delete special_values_table.voice_preset[t],e++);(0,o.Md)(o.dm.INFO,`Unregistered ${e} voice presets`)}(),function(){let e=0;for(const t of Object.keys(special_values_table.sound))"null"===t||a.has(t)||(delete special_values_table.sound[t],e++);(0,o.Md)(o.dm.INFO,`Unregistered ${e} sounds`)}(),function(){let e=0;for(const t of Object.keys(special_values_table.char))i(t)||(delete special_values_table.char[t],delete img_chars_full[t],e++);(0,o.Md)(o.dm.INFO,`Unregistered ${e} chars`)}(),special_values_table.sound.coop_defeat="coop_defeat (HTML5 only)",special_values_table.sound.coop_draw="coop_draw (HTML5 only)",special_values_table.sound.coop_time_warning="coop_time_warning (HTML5 only)",special_values_table.sound.coop_victory="coop_victory (HTML5 only)",special_values_table.sound.warmup="warmup (HTML5 only)",special_values_table.sound.warmup_ping="warmup_ping (HTML5 only)",(0,o.Md)(o.dm.INFO,"Registered 6 sounds"),s=!0,l=100,(0,o.Md)(o.dm.INFO,"HTML5 mode active")}},7311:(e,t,n)=>{"use strict";n.d(t,{L:()=>Z});var o=n(5146),r=n(2946),a=n(3987);const i=function(){const e=Math.PI/180;return function(t){return t*e}}(),s={wall_lamp_right:{x:-1,y:-16,w:17,h:32},wall_lamp_right_on:{x:-1,y:-16,w:17,h:32},wall_lamp_left:{x:-16,y:-16,w:17,h:32},wall_lamp_left_on:{x:-16,y:-16,w:17,h:32},wall_lamp_up:{x:-16,y:-16,w:32,h:17},wall_lamp_up_on:{x:-16,y:-16,w:32,h:17},wall_lamp_down:{x:-16,y:-1,w:32,h:17},wall_lamp_down_on:{x:-16,y:-1,w:32,h:17},back_lamp_vertical:{x:-10,y:-16,w:21,h:32},back_lamp_vertical_on:{x:-10,y:-16,w:21,h:32},back_lamp_horizontal:{x:-16,y:-10,w:32,h:21},back_lamp_horizontal_on:{x:-16,y:-10,w:32,h:21},column_red:{x:-20,y:-60,w:40,h:120},column_green:{x:-20,y:-60,w:40,h:120},column_blue:{x:-20,y:-60,w:40,h:120},mined_barrel:{x:-21,y:-49,w:42,h:51},darkstar_device:{x:-129,y:-157,w:257,h:160},darkstar_device_destroyed:{x:-129,y:-142,w:257,h:145},antigravity_right:{x:-3,y:-56,w:19,h:112},antigravity_left:{x:-16,y:-56,w:19,h:112},darkstar_camera_left:{x:-55,y:-13,w:56,h:23},darkstar_camera_right:{x:-1,y:-13,w:56,h:23},ditzy_flag_blue:{x:-36,y:0,w:72,h:110},ditzy_flag_red:{x:-36,y:0,w:72,h:110},ditzy_flag_dark:{x:-36,y:0,w:72,h:110},ditzy_flag_empty:{x:-36,y:0,w:72,h:110},darkstar_healing_kit:{x:-21,y:-27,w:42,h:28},darkstar_holo_on:{x:-33,y:-58,w:66,h:59},darkstar_holo_on_red:{x:-33,y:-58,w:66,h:59},darkstar_holo_off:{x:-33,y:-35,w:66,h:36},darkstar_holo_earth:{x:-23,y:-23,w:46,h:46},darkstar_holo_c9:{x:-25,y:-24,w:50,h:49},static_barrel1:{x:-39,y:-39,w:78,h:78},static_barrel2:{x:-39,y:-39,w:79,h:79},static_barrel3:{x:-39,y:-39,w:79,h:79},fttp_vehicle:{x:-139,y:-70,w:237,h:122},fttp_vehicle2:{x:-98,y:-70,w:237,h:122},fttp_wheel:{x:-33,y:-33,w:67,h:67},fttp_drone:{x:-25,y:-21,w:50,h:41},doomwrath_rapier_idle:{x:-266,y:-44,w:468,h:95},doomwrath_rapier_active:{x:-266,y:-44,w:468,h:145},doomwrath_rapier_idle2:{x:-202,y:-44,w:468,h:95},doomwrath_rapier_active2:{x:-202,y:-44,w:468,h:145},falkok_ship1:{x:-133,y:-38,w:266,h:76},falkok_ship2:{x:-133,y:-38,w:266,h:76},falkok_ship3:{x:-133,y:-38,w:266,h:76},falkok_ship4:{x:-133,y:-38,w:266,h:76},falkok_ship5:{x:-133,y:-38,w:266,h:76},falkok_ship6:{x:-133,y:-38,w:266,h:76},darkstar_crate:{x:-41,y:-41,w:82,h:81},darkstar_weapon_crate:{x:-24,y:-20,w:48,h:21},darkstar_portable_fission:{x:-21,y:-21,w:42,h:43},darkstar_portable_fission_brk:{x:-21,y:-3,w:42,h:24},darkstar_ceiling_camera:{x:-15,y:0,w:30,h:12},doomzerker_locker:{x:-16,y:-50,w:32,h:91},doomzerker_locker2:{x:-16,y:-50,w:32,h:91},doomzerker_locker3:{x:-16,y:-51,w:32,h:93},darkstar_tree1:{x:-37,y:-114,w:82,h:129},darkstar_tree2:{x:-67,y:-171,w:136,h:186},darkstar_pot:{x:-19,y:-31,w:38,h:32},darkstar_pot_tree1:{x:-23,y:-100,w:51,h:101},darkstar_pot_tree2:{x:-42,y:-135,w:84,h:136}};function l(e={}){const t={backgroundColor:"#5880AB",gridColor:"#FFFFFF",selectOutlineColor:"#A5A500",selectEdgeOpacityFactor:1,selectTextColor:"#FF0",selectionColor:"#FFF",selectionCtrlColor:"#AFA",selectionAltColor:"#FAA",selectionOpacity:.1,selectionEdgeOpacity:.8,highLightedObjEdgeColor:void 0,highLightedObjEdgeOpacity:1,objectConnectionDash:[4,4],objectConnectionOutgoingColor:"#66ff66",objectConnectionIncomingColor:"#ffffff",objectConnectionOpacityFactor:1,objectColors:{box:{col:"#FFF",edgeCol:"#FFF"},door:{col:"#000",edgeCol:"#000",invisibleOpacityFactor:.05},water:{col:"#3592B9",edgeCol:"#91EAFF",opacityFactor:.24,acidCol:"#BBFB59",acidEdgeCol:"#91EAFF",acidOpacityFactor:.81},pushf:{col:"#2BFF40",edgeCol:"#3CFF4F"},region:{col:"#FFD52B",edgeCol:"#FFB03C",edgeOpacityFactor:.5,buttonOpacityFactor:.5},bg:{col:"#000",edgeCol:"#910000",edgeOpacityFactor:.3,coloredOpacityFactor:.22}},spawnAreaValidColor:"#00ff00",spawnAreaValidOpacity:.5,spawnAreaBorderColor:"#ff0000",spawnAreaBorderOpacity:.8},n=e=>null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype;return function e(t,o){for(const r in o)n(t[r])&&n(o[r])?e(t[r],o[r]):t[r]=o[r]}(t,e),t}const c={0:l(),1:l({backgroundColor:"#222222",gridColor:"#888888",selectOutlineColor:"#FFFF00"}),2:l({backgroundColor:"#222222",gridColor:"#888888",selectOutlineColor:"#FFFF00"}),3:l({backgroundColor:"#222222",gridColor:"#888888",selectOutlineColor:"#FFFF00"}),4:l({backgroundColor:"#161616",gridColor:"#FFFFFFA0",selectOutlineColor:"#FFE554",selectTextColor:"#FFE554",objectColors:{box:{col:"#FFF",edgeCol:"#FFF"},door:{col:"#000",edgeCol:"#000",invisibleOpacityFactor:.05},water:{col:"#3592B9",edgeCol:"#91EAFF",opacityFactor:.24,acidCol:"#BBFB59",acidEdgeCol:"#91EAFF",acidOpacityFactor:.81},pushf:{col:"#2BFF40",edgeCol:"#3CFF4F"},region:{col:"#FFD52B",edgeCol:"#FFB03C",edgeOpacityFactor:.5,buttonOpacityFactor:.5},bg:{col:"#000",edgeCol:"#910000",edgeOpacityFactor:.6,coloredOpacityFactor:.22}}}),5:l({backgroundColor:"#161616",gridColor:"#FFFFFFA0",selectOutlineColor:"#FFE554",selectTextColor:"#FFE554",objectColors:{box:{col:"#FFF",edgeCol:"#FFF"},door:{col:"#000",edgeCol:"#000",invisibleOpacityFactor:.05},water:{col:"#3592B9",edgeCol:"#91EAFF",opacityFactor:.24,acidCol:"#BBFB59",acidEdgeCol:"#91EAFF",acidOpacityFactor:.81},pushf:{col:"#2BFF40",edgeCol:"#3CFF4F"},region:{col:"#FFD52B",edgeCol:"#FFB03C",edgeOpacityFactor:.5,buttonOpacityFactor:.5},bg:{col:"#000",edgeCol:"#910000",edgeOpacityFactor:.6,coloredOpacityFactor:.22}}}),6:l({backgroundColor:"#161616",gridColor:"#FFFFFFA0",selectOutlineColor:"#FFE554",selectTextColor:"#FFE554",objectColors:{box:{col:"#FFF",edgeCol:"#FFF"},door:{col:"#000",edgeCol:"#000",invisibleOpacityFactor:.05},water:{col:"#3592B9",edgeCol:"#91EAFF",opacityFactor:.24,acidCol:"#BBFB59",acidEdgeCol:"#91EAFF",acidOpacityFactor:.81},pushf:{col:"#2BFF40",edgeCol:"#3CFF4F"},region:{col:"#FFD52B",edgeCol:"#FFB03C",edgeOpacityFactor:.5,buttonOpacityFactor:.5},bg:{col:"#000",edgeCol:"#910000",edgeOpacityFactor:.6,coloredOpacityFactor:.22}}}),7:l({backgroundColor:"#2A2F33",gridColor:"#FFFFFFA0",selectOutlineColor:"#FFE554",selectTextColor:"#FFE554"})};var d=n(5129),_=n(2839),u=n(3569);let m=unsafeWindow;m.canvasThemes=c;let g,p,b,h,f,v,w,y,E,x,k,A,C,M,D,P,O,S,I,T,F,L=[],B=[],R=!1,N=0,U=0,j=0,W=0,H="1",z={};function G(e,t,n,o,a,i,s){f.globalAlpha=t,s?(r.F.cartoonishEdges?f.strokeColor=e:f.strokeStyle=e,p(n,o,a,i)):(f.fillStyle=e,g(n,o,a,i))}function K(e,t){if(!m.m_drag_selection)return;if(m.m_mistake_drag)return;if(!m.MatchLayer(e))return;let n=C(Math.min(E,k)),o=M(Math.min(x,A)),r=S(Math.abs(k-E)),a=O(Math.abs(A-x)),i=t.x,s=t.y,l=t.w,c=t.h;return!(i+l<n||n+r<i||s+c<o||o+a<s)}function q(e){let t,n,o,r,a=e.pm;if(e._isresizable)t=C(a.x),n=M(a.y),o=S(a.w),r=O(a.h);else{let i=m.ThinkOfBBoxClass(e._class,e);n=M(a.y+m.bbox_y[i]),r=O(m.bbox_h[i]),-1!=a.side?(t=C(a.x+m.bbox_x[i]),o=S(m.bbox_w[i])):(t=C(a.x-m.bbox_x[i]),o=S(-m.bbox_w[i]),t+=o,o=-o)}return{x:t,y:n,w:o,h:r}}function $(e,t){if(!m.SHOW_CONNECTIONS)return;if(!e.exists)return;if(!e.selected)return;if(!r.F.ocmEnabled)return;if(!o.yR.has(e)&&!o.o5.has(e))return;let n,a,i,s,l=m.MatchLayer(e)?1:.3;f.globalAlpha=l*F.objectConnectionOpacityFactor,f.lineWidth=1,f.setLineDash(F.objectConnectionDash),f.strokeStyle=F.objectConnectionOutgoingColor,n=t.x+t.w/2,i=t.y+t.h/2;for(let t of o.yR.get(e)||[]){if(!t.exists)continue;let e=q(t);a=e.x+e.w/2,s=e.y+e.h/2,f.beginPath(),f.moveTo(n,i),f.lineTo(a,s),f.stroke()}f.strokeStyle=F.objectConnectionIncomingColor,a=n,s=i;for(let t of o.o5.get(e)||[]){if(!t.exists)continue;let e=q(t);n=e.x+e.w/2,i=e.y+e.h/2,f.beginPath(),f.moveTo(n,i),f.lineTo(a,s),f.stroke()}f.setLineDash([])}function Y(e,t){e._isresizable?function(e,t){let n=e._class,o=F.objectColors[n];if(void 0===o)return;let a=m.MatchLayer(e)?1:.3,i=e.pm,s=C(i.x),l=M(i.y),c=S(i.w),d=O(i.h),u=o.col,g=o.edgeCol,p=o.opacityFactor?o.opacityFactor:.2,b=o.edgeOpacityFactor?o.edgeOpacityFactor:1;if("bg"==n&&null==m.CACHED_BGS[i.m]&&-1==B.indexOf(i.m)&&(m.ServerRequest(`a=get_images&for_class=bg_model&update_const=${i.m}`,"request_consts"),B.push(i.m)),"door"!=n||0!==i.vis&&!1!==i.vis&&"false"!==i.vis)if("water"==n&&e.pm.damage>0)u=o.acidCol,g=o.acidEdgeCol,p=o.acidOpacityFactor;else if("region"==n&&-1!==[1,9,10].indexOf(parseInt(i.use_on))){f.globalAlpha=a*o.buttonOpacityFactor;let e=z[i.use_on];h(e,C(i.x+Math.round((i.w-41)/2)),M(i.y+Math.round((i.h-51)/2)),S(41),O(31))}else"bg"==n&&7==i.c.length&&(u=i.c,p=o.coloredOpacityFactor);else p=o.invisibleOpacityFactor;if(m.SHOW_TEXTURES)if("box"!=n||r.F.boxRendering){if("box"==n&&r.F.boxRendering)_.b6(f);else if("bg"==n&&void 0!==m.CACHED_BGS[i.m]&&m.CACHED_BGS[i.m].loaded){-1!==B.indexOf(i.m)&&B.splice(B.indexOf(i.m),1),f.globalAlpha=1;let e=m.CACHED_BGS[i.m];if(null==e.pattern&&(e.pattern=f.createPattern(e,"repeat")),f.save(),f.beginPath(),f.rect(s,l,c,d),f.closePath(),f.clip(),f.translate(C(0),M(0)),f.scale(C(1)-C(0),M(1)-M(0)),f.translate(i.u,i.v),f.beginPath(),f.fillStyle=e.pattern,f.rect(D(0),P(0),T(w),I(v)),f.fill(),f.restore(),7==i.c.length){let e=f.globalCompositeOperation;f.globalCompositeOperation="multiply",G(i.c,1,s,l,c,d,!1),f.globalCompositeOperation="lighter",f.drawImage(f.canvas,s,l,c,d,s,l,c,d),f.globalCompositeOperation=e}}}else u="#000",p=1,g="#333";K(e,t)&&(g=F.highLightedObjEdgeColor,b=F.highLightedObjEdgeOpacity/a),e.selected&&!r.F.originalSelectOverlay&&(g=F.selectOutlineColor,b=F.selectEdgeOpacityFactor),m.SHOW_TEXTURES&&("bg"==n||"box"==n&&r.F.boxRendering)||G(u,a*p,s,l,c,d,!1),m.SHOW_TEXTURES||G(g,a*b,s,l,c,d,!0)}(e,t):function(e,t){let n=e._class,o=m.MatchLayer(e)?1:.3,a=e.pm,s=a.x,l=a.y,c="#000",d=.1;K(e,t)&&(c=F.highLightedObjEdgeColor,d=F.highLightedObjEdgeOpacity/o),e.selected&&!r.F.originalSelectOverlay&&(c=F.selectOutlineColor,d=F.selectEdgeOpacityFactor),f.globalAlpha=o;let _=!1;if("decor"==n){let e=a.model;null==m.special_values_table.decor_model[e]&&-1==L.indexOf(e)&&(m.ServerRequest(`a=get_images&for_class=decor_model&update_const=${e}`,"request_consts"),L.push(e)),0==a.r&&1==a.sx&&1==a.sy||(f.save(),f.translate(C(s),M(l)),f.rotate(i(a.r)),f.scale(a.sx,a.sy),f.translate(-C(s),-M(l)),_=!0)}let g=m.ThinkOfOffsetClass(n,e),p=-1!=a.side?1:-1,b=C(s+p*m.offset_x[g]),v=M(l+m.offset_y[g]),w=S(p*m.offset_w[g]),y=O(m.offset_h[g]);if(-1==p&&(f.save(),f.translate(2*b+w,0),f.scale(-1,1)),["player","enemy"].includes(n)){let e=m.img_char_custom;"string"==typeof a.char&&"c"===a.char.charAt(0)?void 0!==m.CACHED_CHARS[a.char]?m.CACHED_CHARS[a.char].loaded&&(e=m.CACHED_CHARS[a.char]):(0,u.b)(a.char):a.char in m.img_chars_full&&(e=m.img_chars_full[a.char]),h(e,C(a.x-36),M(a.y-104),S(110),O(130))}else if("decor"!=n||void 0===m.CACHED_DECORS[a.model]||m.CACHED_DECORS[a.model].native)if(!r.F.showTextPlaceholderDecors||"text"!==a.model&&"text2"!==a.model&&"text3"!==a.model)h(m.img_decide(e),b,v,w,y);else{let e=16/zoom;switch(a.model){case"text":f.font=`${e}px EuropeExt Regular`;break;case"text2":f.font=`${e}px DejaVu Sans Mono`;break;default:f.font=`bold ${e}px Tahoma`}f.fillStyle="white",f.textAlign="center",f.fillText(a.text??"Hello World!",C(a.x+2),M(a.y+4)),f.textAlign="start"}else{-1!==L.indexOf(a.model)&&L.splice(L.indexOf(a.model),1);let e=m.CACHED_DECORS[a.model];h(e,C(a.x+a.u),M(a.y+a.v),S(e.width),O(e.height))}_&&f.restore(),-1==p&&f.restore(),function(e,t,n){let o,r,a=e.pm,i=a.x,s=a.y,l=m.ThinkOfBBoxClass(e._class,e),c=m.bbox_x[l],d=m.bbox_y[l],_=m.bbox_w[l],u=m.bbox_h[l],g=M(s+d),p=O(u);-1!=a.side?(o=C(i+c),r=S(_)):(o=C(i-c),r=S(-_),o+=r,r=-r),G(t,n,o,g,r,p,!0)}(e,c,o*d)}(e,t),function(e,t){e.selected&&r.F.originalSelectOverlay&&(f.globalAlpha=.2,f.fillStyle=m.selgrd2,g(t.x,t.y,t.w,t.h),f.globalAlpha=1,f.fillStyle="#FFF",m.MyDrawSelection(t.x-2,t.y-2,t.w+4,t.h+4))}(e,t),function(e,t){if(!m.quick_pick||-1==m.quick_pick_classes.indexOf(e._class))return;let n=t.x,o=t.y,r=n+t.w/2,a=o+t.h/2,i=Math.sin((new Date).getTime()/100);f.globalAlpha=.75-i/4;let s=27+5*i,l=!1;(m.es[m.quick_pick_fake_over]==e||m.Dist2D(r,a,m.mouse_x,m.mouse_y)<20*m.quick_pick_hit_scale)&&(l=!0),h(l?m.img_quickpick2:m.img_quickpick,r-s,a-s,2*s,2*s)}(e,t),function(e,t){let n=m.quick_pick&&-1!==m.quick_pick_classes.indexOf(e._class);if(!m.ENABLE_TEXT)return;if(null==e.pm.uid)return;if(!n&&!m.MatchLayer(e))return;null==m.last_title_density&&(m.last_title_density=0);let o=t.x+t.w/2,r=t.y+t.h/2,a=e.selected&&e.hit(!1);f.font="normal 10px Arial";let i=e.pm.uid,s=f.measureText(i);if(s.height=10,a&&(s.height=12),m.mouse_x>o-30&&m.mouse_x<o+30&&m.mouse_y>r-30&&m.mouse_y<r+30&&title_density++,f.globalAlpha=1,m.last_title_density>1&&!a){let t=Math.sqrt(Math.pow(m.mouse_x-o,2)+Math.pow(m.mouse_y-r,2));t<60&&(e.selected?f.globalAlpha=Math.max(.3,1/m.last_title_density):(o-=(m.mouse_x-o)*Math.pow((60-t)/60,2)*(4+Math.min(6,.1*m.last_title_density)),r-=(m.mouse_y-r)*Math.pow((60-t)/60,2)*(4+Math.min(6,.1*m.last_title_density)),m.last_title_density>1&&(f.globalAlpha=Math.max(.4,1-.1*m.last_title_density))))}let l=Math.round(o-s.width/2),c=Math.round(r-s.height/2);m.ENABLE_SHADOWS&&(f.fillStyle="rgba(0,0,0,0.1)",f.fillRect(l-2,c-2,s.width+4,s.height+4),f.fillRect(l-4,c-4,s.width+8,s.height+8)),f.fillStyle="#FFF",a&&(f.fillStyle="#fffb91"),e.selected&&(f.fillStyle=F.selectTextColor),f.fillText(i,l,c+8+(s.height-10)/2),m.last_title_density=m.title_density}(e,t),$(e,t),function(e,t){if(!e.selected)return;if(!e._isresizable)return;if(!m.MatchLayer(e))return;t.x,t.y,t.w,t.h;let n=e.pm.x,o=e.pm.y,r=e.pm.w,a=e.pm.h,i=k,s=A,l=m.borderwidth;if(i<n-l)return;if(n+r+l<i)return;if(s<o-l)return;if(o+a+l<s)return;let c,d,_,u=!1;n-l<=i&&i<=n+l&&(_=!0),n+r-l<=i&&i<=n+r+l&&(u=!0),o-l<=s&&s<=o+l&&(c=!0),o+a-l<=s&&s<=o+a+l&&(d=!0);let g="default";c&&_||d&&u?g="nwse-resize":c&&u||d&&_?g="nesw-resize":c||d?g="ns-resize":(_||u)&&(g="ew-resize"),m.canv.style.cursor!=g&&(m.canv.style.cursor=g)}(e,t)}function X(e,t,n,o,r){const a=e.pm;if(e._isresizable)return a.x+a.w<t||a.x>n||a.y+a.h<o||a.y>r;const l=ThinkOfBBoxClass(e._class,e),c=bbox_w[l],d=bbox_h[l],_=-1!=a.side?a.x+bbox_x[l]:a.x-bbox_x[l]-c,u=a.y+bbox_y[l];return(_+c<t||_>n||u+d<o||u>r)&&("decor"!==e._class||!m.CACHED_DECORS[a.model]?.loaded||function(e,t,n,o,r){const a=e.pm,l=m.CACHED_DECORS[a.model],c=a.r,d=a.sx,_=a.sy;let u,g,p,b;if(l.native)if(a.model in s){const e=s[a.model];u=e.x*d,g=e.y*_,p=e.w*d,b=e.h*_}else{const t=ThinkOfOffsetClass("decor",e);u=offset_x[t]*d,g=offset_y[t]*_,p=offset_w[t]*d,b=offset_h[t]*_}else u=a.u*d,g=a.v*_,p=l.width*d,b=l.height*_;return c%90==0?function(e,t,n,o,r,a,i,s,l,c){let d,_,u,m;switch((Math.floor(a/90)%4+4)%4){case 0:d=e.x+t,_=e.y+n,u=o,m=r;break;case 1:d=e.x-n-r,_=e.y+t,u=r,m=o;break;case 2:d=e.x-t-o,_=e.y-n-r,u=o,m=r;break;case 3:d=e.x+n,_=e.y-t-o,u=r,m=o;break;default:return!0}return d+u<i||d>s||_+m<l||_>c}(a,u,g,p,b,c,t,n,o,r):function(e,t,n,o,r,a,s,l,c,d){const _=i(a),u=Math.cos(_),m=Math.sin(_),g=t+.5*o,p=n+.5*r,b=g*u-p*m,h=g*m+p*u,f=e.x+b,v=e.y+h,w=.5*(Math.abs(o*u)+Math.abs(r*m)),y=.5*(Math.abs(r*u)+Math.abs(o*m));return f+w<s||f-w>l||v+y<c||v-y>d}(a,u,g,p,b,c,t,n,o,r)}(e,t,n,o,r))}function V(e){return Math.round(e/m.GRID_SNAPPING)*m.GRID_SNAPPING}function J(){return(new Date).getTime()}function Q(){if(m.requestAnimationFrame(Q),function(){let e=m.k_shift?5:1,t=!1;if(0!==m.speed_x){let n=10*m.zoom*e*m.speed_x;m.dis_from_x+=n,m.dis_to_x+=n,t=!0}if(0!==m.speed_y){let n=10*m.zoom*e*m.speed_y;m.dis_from_y+=n,m.dis_to_y+=n,t=!0}t&&(m.zoom_validate(),m.need_redraw=!0,m.m_mistake_drag=!1,m.mouse_wx=D(m.mouse_x),m.mouse_wy=D(m.mouse_y))}(),m.need_redraw&&(w=m.screenX,v=m.screenY,F=c[m.THEME]??c[m.THEME_BLUE],y=m.GRID_ALPHA,E=m.m_drag_wx,x=m.m_drag_wy,k=m.mouse_wx,A=m.mouse_wy,m.canv.style.cursor="default",f.globalAlpha=1,UpdateStars(),m.SHOW_TEXTURES?h(m.CACHED_SKY[H],0,0,w,v):(f.fillStyle=F.backgroundColor,g(0,0,w,v)),y<=0||(f.fillStyle=F.gridColor,b(10,.08*y),b(100,.32*y),b(300,.64*y),f.globalAlpha=.7*y,g(0,M(0),w,1),g(C(0),0,1,v)),function(){j=0;let e=m.left_panel.getBoundingClientRect(),t=m.right_panel.getBoundingClientRect(),n=m.top_panel.getBoundingClientRect(),o=Math.round(D(e.width+e.x)),r=Math.round(P(n.height+n.y)),a=o+Math.round(T(t.x-(e.width+e.x))),i=r+Math.round(I(v-(n.height+n.y)));for(let e of m.es){if(!e.exists)continue;if(!e._isphysical)continue;let t;e.selected&&(t=q(e),$(e,t)),X(e,o,a,r,i)||(null==t&&(t=q(e)),Y(e,t),j++)}}(),function(){if(!m.m_drag_selection)return;if(m.m_mistake_drag)return;let e=C(E),t=M(x),n=S(k-E),o=O(A-x),r=F.selectionColor;m.ctrl?r=F.selectionCtrlColor:m.alt&&(r=F.selectionAltColor),G(r,F.selectionOpacity,e,t,n,o),G(r,F.selectionEdgeOpacity,e,t,n,o,!0)}(),"edit"!=m.active_tool&&(f.globalAlpha=1,h(m.img_put,C(V(k))-15,M(V(A))-15,31,31)),r.F.renderSpawnAreas&&(function(){const{minX:e,minY:t,maxX:n,maxY:o}=d.O7.bounds,r=C(e),a=M(t),i=S(n-e),s=O(o-t);G(F.spawnAreaBorderColor,F.spawnAreaBorderOpacity,r,a,i,s,!0)}(),function(){for(const e of d.$j.rects){const t=C(e.minX),n=M(e.minY),o=S(e.maxX-e.minX),r=O(e.maxY-e.minY);G(F.spawnAreaValidColor,F.spawnAreaValidOpacity,t,n,o,r,!1)}}())),m.need_GUIParams_update&&(m.need_GUIParams_update=!1,m.UpdateGUIParams(),m.UpdateGUIObjectsList()),U++,J()-W>=1e3&&(W=J(),N=U,U=0),function(){let e,t,n,o=document.getElementById("gui-render-info");if(null!==o?(e=o.children[0],t=o.children[1],n=o.children[2]):(o=document.createElement("div"),o.id="gui-render-info",e=document.createElement("p"),e.className="gui-render-info__text",t=document.createElement("p"),t.className="gui-render-info__text",n=document.createElement("p"),n.className="gui-render-info__text",n.title="The approximated probability of getting a fully random (failed) spawn in DM or TDM modes",n.innerHTML='Random spawn chance: <span color="rgb(0, 255, 0)">0%</span>',o.appendChild(e),o.appendChild(t),o.appendChild(n),m.right_panel.childNodes[0].insertBefore(o,document.getElementById("gui_params"))),e.textContent=`Renderer FPS: ${N}`,t.textContent=`Rendered Object: ${j} / ${m.es.length}`,r.F.renderSpawnAreas){n.style.display="initial",n.firstElementChild.textContent=Math.round(100*d.dQ)+"%";const e=255*function(e,t=5){return e>=1?1:1-Math.E**(-t*e)}(d.dQ,5),t=255-e;n.firstElementChild.style.color=`rgb(${e}, ${t}, 0)`}else n.style.display="none"}(),!R){if(null==document.getElementById("rparams"))return;m.ShowHideObjectBox(),m.ShowHideObjectBox(),R=!0}}function Z(){f=m.ctx,p=(e,t,n,o)=>f.strokeRect(e,t,n,o),g=m.MyFillRect,b=m.Grid,h=(e,t,n,o,r)=>m.MyDrawImage(e,t,n,o,r),z={1:m.img_region,9:m.img_region_red,10:m.img_region_blue},function(){const e=()=>{for(const e in c)void 0===c[e].highLightedObjEdgeColor&&(c[e].highLightedObjEdgeColor=unsafeWindow.selgrd3)};if(unsafeWindow.selgrd3 instanceof CanvasPattern)e();else{const t=unsafeWindow.img_slct3.onload;unsafeWindow.img_slct3.onload=()=>{t(),e()}}}(),C=m.w2s_x,M=m.w2s_y,D=m.s2w_x,P=m.s2w_y,O=m.w2s_h,S=m.w2s_w,I=m.s2w_h,T=m.s2w_w;let e=m.ShowTexturesSet;m.ShowTexturesSet=t=>{!function(e){if(e)for(let e of m.es){if("inf"!=e._class)continue;let t=e.pm;if("sky"==t.mark)return void(H=t.forteam)}}(t),e(t)},m.Render=()=>{},m.ani=()=>{},m.requestAnimationFrame(Q),W=J(),(0,a.Md)(a.dm.INFO,"[ALEI Renderer]: Active.")}},7571:(e,t,n)=>{"use strict";n.d(t,{U:()=>a});var o=n(3987),r=n(8351);async function a(){let e=await GM.xmlHttpRequest({url:GM_info.script.updateURL}).catch((e=>console.error(e)));if(void 0===e)return void(0,o.Md)(o.dm.SWARN,"Update check request failed");let t=function(e){const t=e.split("\n").find((e=>e.includes("@version")));return void 0!==t?t.split(" ").at(-1):null}(e.responseText);if(null!==t)if(parseInt(t.replaceAll(".",""))>parseInt(GM_info.script.version.replaceAll(".",""))){const e=(0,r.t)("Update ALEI",(()=>unsafeWindow.open(GM_info.script.downloadURL)));e.classList.add("update-button"),e.addEventListener("mouseover",(()=>{e.classList.add("update-button--seen")}),{once:!0}),(0,o.Md)(o.dm.INFO,`New update: ${t}`),NewNote(`ALEI: There is new update: ${t}, you are currently in ${GM_info.script.version}<br>Click "Update ALEI" to update`,"#FFFFFF")}else(0,o.Md)(o.dm.INFO,`REMOTE: ${t}, LOCAL: ${GM_info.script.version} => No update detected.`);else(0,o.Md)(o.dm.SWARN,"Failed to find version line in update check response")}},7606:(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var o=n(2186);function r(){const e=unsafeWindow.SaveThisMap;unsafeWindow.SaveThisMap=function(t="",n=null){(0,o.nG)(),(0,o.jY)(),e(t,n)}}},7659:e=>{"use strict";var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},7825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},7900:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(1601),r=n.n(o),a=n(6314),i=n.n(a)()(r());i.push([e.id,'body, td, th {\n    color: var(--body-td-th-color);\n}\n\n.objbox {\n    background-color: var(--objbox-background-color);\n}\n\n.selline1 {\n    background-color: var(--selline1-background-color);\n}\n\n@keyframes blnk {\n    0% {\n        background-color: var(--blnk-0-background-color);\n    }\n\n    100% {\n        background-color: var(--blnk-100-background-color);\n    }\n}\n\n@-webkit-keyframes blnk {\n    0% {\n        background-color: var(--blnk-0-background-color);\n    }\n\n    100% {\n        background-color: var(--blnk-100-background-color);\n    }\n}\n\n.selline0bl {\n    background-color: var(--selline0bl-background-color);\n}\n\n.topui {\n    background-color: var(--topui-background-color);\n    background-image: var(--topui-background-image);\n}\n\n.leftui {\n    background-color: var(--leftui-background-color);\n    border-right-color: var(--leftui-border-right-color);\n    background-image: var(--leftui-background-image);\n}\n\n.rightui {\n    background-color: var(--rightui-background-color);\n    border-left-color: var(--rightui-border-left-color);\n    background-image: var(--rightui-background-image);\n}\n\n.field_dis_left {\n    background-color: var(--field_dis_left-background-color);\n    color: var(--field_dis_left-color);\n}\n\n.field_dis_right {\n    background-color: var(--field_dis_right-background-color);\n    color: var(--field_dis_right-color);\n}\n\n.field_btn {\n    background-color: var(--field_btn-background-color);\n    color: var(--field_btn-color);\n}\n\n.field_btn:hover {\n    background-color: var(--field_btn-hover-background-color);\n    color: var(--field_btn-hover-color);\n}\n\n.field_btn:active {\n    background-color: var(--field_btn-active-background-color);\n    color: var(--field_btn-active-color);\n}\n\n.tool_btn {\n    border-color: var(--tool_btn-border-color);\n    background-color: var(--tool_btn-background-color);\n    color: var(--tool_btn-color);\n}\n\n.tool_btn:hover {\n    background-color: var(--tool_btn-hover-background-color);\n    color: var(--tool_btn-hover-color);\n    border-color: var(--tool_btn-hover-border-color);\n}\n\n.tool_btn:active {\n    background-color: var(--tool_btn-active-background-color);\n    color: var(--tool_btn-active-color);\n    border-color: var(--tool_btn-active-border-color);\n}\n\n.tool_btn2 {\n    border-color: var(--tool_btn2-border-color);\n    background-color: var(--tool_btn2-background-color);\n    color: var(--tool_btn2-color);\n}\n\n.tool_btn2:hover {\n    background-color: var(--tool_btn2-hover-background-color);\n    color: var(--tool_btn2-hover-color);\n    border-color: var(--tool_btn2-hover-border-color);\n}\n\n.tool_btn2:active {\n    background-color: var(--tool_btn2-active-background-color);\n    color: var(--tool_btn2-active-color);\n    border-color: var(--tool_btn2-active-border-color);\n}\n\n.c {\n    color: var(--c-color);\n}\n\n.p_u1 {\n    border-bottom-color: var(--p_u1-border-bottom-color);\n}\n\n.p_u2 {\n    border-bottom-color: var(--p_u2-border-bottom-color);\n}\n\n.pa1 {\n    color: var(--pa1-color);\n    background-color: var(--pa1-background-color);\n}\n\n.pa2 {\n    color: var(--pa2-color);\n    background-color: var(--pa2-background-color);\n}\n\n.pa2:hover {\n    background-color: var(--pa2-hover-background-color);\n}\n\n.pa2edit {\n    color: var(--pa2edit-color);\n    background-color: var(--pa2edit-background-color);\n    border-color: var(--pa2edit-border-color);\n}\n\n.opcode_field {\n    color: var(--opcode_field-color);\n    background-color: var(--opcode_field-background-color);\n    border-color: var(--opcode_field-border-color);\n}\n\n.gui_sel_info {\n    color: var(--gui_sel_info-color);\n}\n\n.parambox {\n    background-color: var(--parambox-background-color);\n    border-color: var(--parambox-border-color);\n}\n\n.paramactive:link, .paramactive:visited {\n    background-color: var(--paramactive-link-visited-background-color);\n    color: var(--paramactive-link-visited-color);\n}\n\n.paramactive:hover {\n    background-color: var(--paramactive-hover-background-color);\n}\n\n.paramactive:active {\n    background-color: var(--paramactive-active-background-color);\n}\n\n.paraminbox:link, .paraminbox:visited {\n    background-color: var(--paraminbox-link-visited-background-color);\n    color: var(--paraminbox-link-visited-color);\n}\n\n.paraminbox:hover {\n    background-color: var(--paraminbox-hover-background-color);\n}\n\n.paraminbox:active {\n    background-color: var(--paraminbox-active-background-color);\n}\n\n::-webkit-scrollbar-track {\n    background-color: var(--webkit-scrollbar-track-color);\n}\n\n::-webkit-scrollbar-thumb {\n    background-color: var(--webkit-scrollbar-thumb-color);\n}\n\n#rparams, #gui_objbox, #tools_box, #parambox {\n    scrollbar-color: var(--scrollbar-color-thumb) var(--scrollbar-color-track);\n}\n\n.notediv {\n    background-color: var(--notediv-background-color);\n}\n\n.notediv_term_strict {\n    background-color: var(--notediv_term_strict-background-color);\n}\n\n.notediv_term_nonstrict {\n    background-color: var(--notediv_term_nonstrict-background-color);\n}\n\n.error {\n    color: var(--error-color);\n    text-shadow: var(--error-text-shadow-color) 0px 0px 5px;\n}\n\n#mrdimlights {\n    background-color: var(--mrdimlights-background-color);\n}\n\n#mrtitle {\n    background-color: var(--mrtitle-background-color);\n}\n\nclosebox {\n    background-color: var(--closebox-background-color);\n    color: var(--closebox-color);\n}\n\n#mrbox {\n    background-color: var(--mrbox-background-color);\n}\n\n.field_input {\n    background-color: var(--field_input-background-color);\n    color: var(--field_input-color);\n}\n\n.btn {\n    background-color: var(--btn-background-color);\n    color: var(--btn-color);\n}\n\n.btn:hover {\n    background-color: var(--btn-hover-background-color);\n    color: var(--btn-hover-color);\n}\n\n.btn:active {\n    background-color: var(--btn-active-background-color);\n    color: var(--btn-active-color);\n}\n\n#game_overlay {\n    background-color: var(--game_overlay-background-color);\n}\n\na.basic:link, a.basic:visited {\n    color: var(--a-basic-link-visited-color);\n}\n\na.basic:hover {\n    color: var(--a-basic-hover-color);\n}\n\na.basic:active {\n    color: var(--a-basic-active-color);\n}\n\n.mobile_panel {\n    background-color: var(--mobile_panel-background-color);\n}\n\n.mobile_btn {\n    background-color: var(--mobile_btn-background-color);\n    color: var(--mobile_btn-color);\n    border-color: var(--mobile_btn-border-color);\n}\n\n.mobile_btn:active, .mobile_btn2 {\n    background-color: var(--mobile_btn-active-btn2-background-color);\n    color: var(--mobile_btn-active-btn2-color);\n    border-color: var(--mobile_btn-active-btn2-border-color);\n}\n\n.img_option {\n    border-color: var(--img_option-border-color);\n    background-color: var(--img_option-background-color);\n}\n\n.img_option_selected {\n    background-color: var(--img_option_selected-background-color);\n}\n\n.img_option:hover {\n    background-color: var(--img_option-hover-background-color);\n    color: var(--img_option-hover-color);\n}\n\n.img_option:active {\n    background-color: var(--img_option-active-background-color);\n    color: var(--img_option-active-color);\n}\n\n.img_option div.imgdiv {\n    background-color: var(--img_option-div-imgdiv-background-color);\n}\n\n.list_group {\n    background-color: var(--list_group-background-color);\n    border-bottom-color: var(--list_group-border-bottom-color);\n}\n\n.list_mod {\n    background-color: var(--list_mod-background-color);\n}\n\n.list_group:hover {\n    background-color: var(--list_group-hover-background-color);\n}\n\n.list_group:active {\n    background-color: var(--list_group-active-background-color);\n}\n\n.image_list_collapsable {\n    background-color: var(--image_list_collapsable-background-color);\n}\n\n#image_context {\n    background-color: var(--image_context-background-color);\n    border-color: var(--image_context-border-color);\n}\n\n#image_context div {\n    color: var(--image_context-div-color);\n}\n\n#image_context div:hover {\n    color: var(--image_context-div-hover-color);\n    background-color: var(--image_context-div-hover-background-color);\n}\n\n#image_context div:active {\n    color: var(--image_context-div-active-color);\n    background-color: var(--image_context-div-active-background-color);\n}\n\n.user_link a:link, .user_link a:visited {\n    color: var(--user_link-link-visited-color);\n}\n\n.user_link a:hover {\n    color: var(--user_link-hover-color);\n}\n\n.user_link a:active {\n    color: var(--user_link-active-color);\n}\n\n.search_bar {\n    background-color: var(--search_bar-background-color);\n}\n\n.search_bar input {\n    background-color: var(--search_bar-input-background-color);\n    color: var(--search_bar-input-color);\n}\n\n.search_bar input[type="text"] {\n    background-color: var(--search_bar-input-text-background-color);\n}\n\n.search_bar input[type="button"]:hover {\n    background-color: var(--search_bar-input-button-hover-background-color);\n}\n\n.search_bar input[type="button"]:active {\n    background-color: var(--search_bar-input-button-active-background-color);\n}\n\n.lin2b, .lin2b:link, .lin2b:visited {\n    color: var(--lin2b-color);\n    background-color: var(--lin2b-background-color);\n    border-color: var(--lin2b-border-color);\n}\n\n.lin2b:hover {\n    color: var(--lin2b-hover-color);\n    background-color: var(--lin2b-hover-background-color);\n    border-color: var(--lin2b-hover-border-color);\n}\n\n.lin2b:focus, .lin2b:active {\n    border-color: var(--lin2b-focus-active-border-color);\n    background-color: var(--lin2b-focus-active-background-color);\n    color: var(--lin2b-focus-active-color);\n}',""]);const s=i},7918:(e,t,n)=>{"use strict";n.d(t,{Ac:()=>c,SH:()=>l,XB:()=>b,mu:()=>u,p2:()=>d,zC:()=>m});var o=n(7085),r=n(2946),a=n(3987),i=n(7218);const s=!1;let l=new Map;function c(){l=new Map,es.forEach(_)}function d(e){e.forEach(_),(0,a.Md)(a.dm.VERBOSE,"addEntitiesToParameterMap called"),s&&h("addEntitiesToParameterMap")}function _(e){for(const t in e.pm)"uid"!=t&&"string"==typeof e.pm[t]&&p(e,t,e.pm[t]);r.F.extendedTriggers&&e.pm.extended&&(e.pm.additionalParamA?.forEach(((t,n)=>{if("string"!=typeof t)return;const o=`actions_${n+(i.Wx+1)}_targetA`;p(e,o,t)})),e.pm.additionalParamB?.forEach(((t,n)=>{if("string"!=typeof t)return;const o=`actions_${n+(i.Wx+1)}_targetB`;p(e,o,t)})))}function u(e,t,n){for(let o=0;o<t.length;o++){const r=t[o],a=n[o];"string"==typeof a&&g(e,r,a)}(0,a.Md)(a.dm.VERBOSE,"parameterMapHandleParametersRemoval called"),s&&h("parameterMapHandleParametersRemoval")}function m(e,t,n,o){"uid"!=t&&("string"==typeof n&&g(e,t,n),"string"==typeof o&&p(e,t,o),(0,a.Md)(a.dm.VERBOSE,"updateParameterMap called"),s&&h("updateParameterMap"))}function g(e,t,n){for(const r of(0,o.xx)(n)){const n=l.get(r);if(n){const o=n.get(e);o&&(o.delete(t),0===o.size&&(n.delete(e),0===n.size&&l.delete(r)))}}}function p(e,t,n){for(const r of(0,o.xx)(n)){l.has(r)||l.set(r,new Map);const n=l.get(r);n.has(e)||n.set(e,new Set),n.get(e).add(t)}}function b(){l.clear()}function h(e){const t=function(){const e=l;c();const t=l;return l=e,{valid:f(e,t),originalMap:e,correctMap:t}}();return t.valid||((0,a.Md)(a.dm.WARN,`parameter map error (source: ${e})`,"\noriginal map:",t.originalMap,"\ncorrect map:",t.correctMap,"\nThe effects of this error were fixed automatically."),l=t.correctMap),t.valid}function f(e,t){if(e.size!==t.size)return!1;for(const n of e.keys()){if(!t.has(n))return!1;const o=e.get(n),r=t.get(n);if(o.size!==r.size)return!1;for(const e of o.keys()){if(!r.has(e))return!1;const t=o.get(e),n=r.get(e);if(t.size!==n.size)return!1;for(const e of t)if(!n.has(e))return!1}}return!0}unsafeWindow.updateParameterMap=m,unsafeWindow.getParameterMap=()=>l,unsafeWindow.validateParameterMap=()=>{h("console")&&(0,a.Md)(a.dm.INFO,"Parameter map is correct")}},7961:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(1601),r=n.n(o),a=n(6314),i=n.n(a)()(r());i.push([e.id,'@font-face {\n    font-family: "EuropeExt Regular";\n    font-display: block;\n    src:\n        local("EuropeExt Regular"),\n        url("https://raw.githubusercontent.com/Molisson/ALEI/refs/heads/main/resources/EuropeExt.woff2") format("woff2"),\n        url("https://raw.githubusercontent.com/Molisson/ALEI/refs/heads/main/resources/EuropeExt.woff") format("woff"),\n        url("https://raw.githubusercontent.com/Molisson/ALEI/refs/heads/main/resources/EuropeExt.otf") format("opentype");\n}\n\n@font-face {\n    font-family: "DejaVu Sans Mono";\n    font-display: block;\n    src: \n        local("DejaVu Sans Mono"),\n        url("https://raw.githubusercontent.com/Molisson/ALEI/refs/heads/main/resources/DejaVuLGCSansMono.woff2") format("woff2"),\n        url("https://raw.githubusercontent.com/Molisson/ALEI/refs/heads/main/resources/DejaVuLGCSansMono.woff") format("woff"),\n        url("https://raw.githubusercontent.com/Molisson/ALEI/refs/heads/main/resources/DejaVuLGCSansMono.ttf") format("truetype");\n}\n\n@font-face {\n    font-family: "JetBrains Mono Italic";\n    font-display: block;\n    src: \n        url("https://raw.githubusercontent.com/Molisson/ALEI/refs/heads/main/resources/JetBrainsMono-Italic.woff2") format("woff2");\n}',""]);const s=i},8050:(e,t,n)=>{"use strict";n.d(t,{mY:()=>b,jg:()=>D,J:()=>y});var o=n(3150);const r=100;let a=null,i=null,s=0;function l(e,t){i=e,s=t,null===a&&d()}function c(){null!==a&&(cancelAnimationFrame(a),a=null)}function d(){const e=i.scrollHeight-i.clientHeight;i.scrollTop+=s,s>0&&i.scrollTop>=e||s<0&&i.scrollTop<=0||(a=requestAnimationFrame(d))}function _(e,t){e.classList.toggle("dragged-item-label--visible",t)}function u(e,t){e.classList.toggle("trigger-action-gap-highlight--visible",t)}var m=n(9929),g=n(5740),p=n(3338);const b=new class{constructor(e={}){this.dragDistanceThreshold=10,this.initializeState(),this.onDragStarted=e.onDragStarted??null}initializeState(e=null,t=null){this.startMouseX=e,this.startMouseY=t,this.savedMouseX=e,this.savedMouseY=t,this.elements=[],this.isDragging=!1,this.wasDragging=!1,this.dropPosition=null}setElements(e){this.elements=e}updateMousePos(e,t){var n,o,r,a;this.savedMouseX=e,this.savedMouseY=t,this.isDragging||(n=this.startMouseX,o=this.startMouseY,r=this.savedMouseX,a=this.savedMouseY,Math.abs(n-r)+Math.abs(o-a)>this.dragDistanceThreshold&&this.dragStarted()),this.recalculateDropPosition()}dragStarted(){this.isDragging=!0,this.wasDragging=!0,this.onDragStarted()}recalculateDropPosition(){this.isDragging&&(this.dropPosition=this.findClosestGap())}findClosestGap(){let e=this.elements,t=null,n=0;for(;e.length>0;){const o=Math.floor(e.length/2),r=e[o].getBoundingClientRect(),a=(r.top+r.bottom)/2;this.savedMouseY<=a?(t=n+o,e=e.slice(0,o)):(t=n+o+1,e=e.slice(o+1),n+=o+1)}return t}resetDropPosition(){this.dropPosition=null}stopDrag(){this.startMouseX=null,this.startMouseY=null,this.isDragging=!1,this.dropPosition=null}}({onDragStarted:function(){const e=[...document.getElementById("rparams").getElementsByClassName("trigger-action")];b.setElements(e),w=m.Vf.has(v)?[...m.Vf]:[v],w.forEach((e=>{const t=(0,g.Cb)(e);t?.classList.add("trigger-action--dragged")})),document.body.appendChild(f),document.body.appendChild(h);const t=w.length;(function(e,t){e.textContent=t})(h,`${t} action${1===t?"":"s"}`),_(h,!0),u(f,!0)}}),h=function(){const e=document.createElement("div");return e.textContent="beans",e.className="dragged-item-label",e}(),f=function(){const e=document.createElement("div");return e.className="trigger-action-gap-highlight",e}();let v=null,w=[];function y(e,t){1===o.sf.length&&"trigger"===o.sf[0]._class&&(v=t,w=[],b.initializeState(e.clientX,e.clientY),function(){const e=document.getElementById("rparams");e.addEventListener("mousemove",E),e.addEventListener("scroll",x),e.addEventListener("mouseleave",k),e.addEventListener("mouseenter",A),document.addEventListener("mouseup",C)}())}const E=P((function(e){b.isDragging&&function(e){const t=document.getElementById("rparams");if(null!==t){const n=t.getBoundingClientRect();e<n.top+r?l(t,(r-(e-n.top))/r*10*-1):e>n.bottom-1-r?l(t,(r-(n.bottom-1-e))/r*10):c()}}(e.clientY),b.updateMousePos(e.clientX,e.clientY),b.isDragging&&M()})),x=P((function(){b.isDragging&&(b.recalculateDropPosition(),M())}));function k(){b.isDragging&&(_(h,!1),u(f,!1),c(),b.resetDropPosition())}function A(){b.isDragging&&(_(h,!0),u(f,!0))}function C(){null!==b.dropPosition&&function(){w.sort(((e,t)=>e-t));const e=b.dropPosition;if((e=>{for(let t=0;t<e.length-1;t++)if(1!=e[t+1]-e[t])return!1;return!0})(w)&&e>=w[0]-1&&e<=w.at(-1))return;const t=o.sf[0];let n=(0,p.Q1)(t);const r=new Set([...m.Vf].map((e=>n[e-1]))),a=w.map((e=>n[e-1]));n.splice(e,0,...a);for(let t=w.length-1;t>=0;t--){let o=w[t]-1;o>=e&&(o+=a.length),n.splice(o,1)}const i={min:Math.min(w[0]-1,e),max:Math.max(w.at(-1)-1,e-1)},s=n.slice(i.min,i.max+1);(0,p.A)(s,i.min+1),UpdateGUIParams(),(0,m.EQ)();for(let e=0;e<n.length;e++)r.has(n[e])&&(0,m.L4)(e+1)}(),D()}function M(){const e=b.savedMouseX,t=b.savedMouseY,n=b.dropPosition;if(function(e,t,n){e.style.transform=`translate(${t}px, ${n}px)`}(h,e,t),null!==n){let e=n+1,t=!1;n===b.elements.length&&(e--,t=!0);const o=(0,g.Cb)(e);if(null!==o){const e=o.getBoundingClientRect(),n=t?e.bottom+1:e.top-1;!function(e,t,n,o){e.style.transform=`translate(${t}px, ${n}px)`,e.style.width=o+"px"}(f,e.left,n,e.width)}}}function D(){!function(){const e=document.getElementById("rparams");null!==e&&[...e.getElementsByClassName("trigger-action--dragged")].forEach((e=>e.classList.remove("trigger-action--dragged")))}(),function(){const e=document.getElementById("rparams");e?.removeEventListener("mousemove",E),e?.removeEventListener("scroll",x),e?.removeEventListener("mouseleave",k),e?.removeEventListener("mouseenter",A),document.removeEventListener("mouseup",C),E.cancel(),x.cancel()}(),c(),h.remove(),f.remove(),b.stopDrag(),v=null,w=[]}function P(e){let t=!1,n=null;function o(){t||(n=requestAnimationFrame((()=>{e.apply(this,arguments),t=!1,n=null})),t=!0)}return o.cancel=function(){null!==n&&(cancelAnimationFrame(n),t=!1,n=null)},o}},8351:(e,t,n)=>{"use strict";n.d(t,{q:()=>i,t:()=>s});var o=n(3987);let r=0,a=!1;function i(){for(const e of[...top_panel.getElementsByClassName("q")])e.remove();for(const e of[...top_panel.getElementsByClassName("q3")])e.previousElementSibling?.classList.add("topui__section-end"),e.remove();for(const e of[...top_panel.getElementsByClassName("field_dis_left")]){const t=e.nextElementSibling;if(t.classList.contains("field_dis_right")){const n=document.createElement("div");n.className="field_dis_container",e.insertAdjacentElement("beforebegin",n),e.remove(),t.remove(),n.appendChild(e),n.appendChild(t)}else(0,o.Md)(o.dm.WARN,"Element to the right of field_dis_left was not field_dis_right")}const e=[...top_panel.getElementsByClassName("field_btn")].find((e=>"Editor Manual"===e.value||"window.open('../level_editor_manual/','_blank');"===e.getAttribute("onclick")));void 0!==e?(e.value="Eagle's Manual",e.setAttribute("onclick","window.open('https://eaglepb2.gitbook.io/pb2-editor-manual/', '_blank');")):(0,o.Md)(o.dm.WARN,"Failed to find manual button to redirect it"),a=!0}function s(e,t){if(!a)throw new Error("Attempted to call addTopButton before patchTopPanel was called");const n=top_panel.getElementsByClassName("field_btn"),o=n[n.length-1];0===r&&o.classList.add("topui__section-end");const i=document.createElement("input");return i.className="field_btn",i.type="button",i.value=e,i.addEventListener("click",t),o.insertAdjacentElement("afterend",i),r++,i}},9508:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(1601),r=n.n(o),a=n(6314),i=n.n(a)()(r());i.push([e.id,"/*\nthese padding and margin changes have almost no visual effect except for allowing comment buttons to bypass overflow: hidden on the x-axis\n*/\n#right_panel .rightui_cntnt {\n    padding-left: 0px; /* normally 14px*/\n}\n\n#objboxhider {\n    margin-left: 18px;\n    width: calc(100% - 18px);\n}\n\n#gui_objbox {\n    margin-left: 18px;\n}\n\n#gui_sel_info {\n    padding-left: 18px;\n}\n\n#rparams {\n    padding-left: 18px;\n    position: relative; /*setting position to relative so the comment elements can be absolutely positioned inside of it*/\n}\n\n\n\n#mrdimlights {\n    z-index: 200;\n}\n\n.mrpopup {\n    z-index: 300;\n}\n\n\n\n/* top panel stuff. improves the way padding and gapping is applied */\n.topui {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 14px;\n    padding: 14px;\n    padding-bottom: 16px;\n    height: 20px;\n}\n\n.field_btn, .field_dis_left, .field_dis_right {\n    margin: 0;\n}\n\n.field_btn {\n    flex: 0 0 auto;\n}\n\n/*this isn't actually an override style but it doesn't make sense to put this elsewhere.\ncontains field_dis_left and field_dis_right so that a gap isn't added between them*/\n.field_dis_container {\n    flex: 0 0 auto;\n}\n\n/*this isn't actually an override style but it doesn't make sense to put this elsewhere.\nthis is applied to the last element of a section (of the top buttons) so that sections have 42px gap*/\n.topui__section-end {\n    margin-right: 28px;\n}\n\n\n\n/* stop version text in the top right from blocking the top buttons */\n#version_rights {\n    pointer-events: none;\n}",""]);const s=i},9929:(e,t,n)=>{"use strict";n.d(t,{EQ:()=>i,L4:()=>l,Vf:()=>r,sH:()=>a,yp:()=>s});var o=n(5740);const r=new Set;function a(){return[...r].sort(((e,t)=>e-t))}function i(){for(const e of r)c(e,!1);r.clear()}function s(e){r.has(e)?(r.delete(e),c(e,!1)):(r.add(e),c(e,!0))}function l(e){r.add(e),c(e,!0)}function c(e,t){const n=(0,o.Cb)(e);n?.classList.toggle("trigger-action--selected",t)}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{"use strict";var main_aleimapdata_aleimapdata_js_WEBPACK_IMPORTED_MODULE_0_=__webpack_require__(2186),main_aleimapdata_aleimapdatapatches_js_WEBPACK_IMPORTED_MODULE_1_=__webpack_require__(7606),main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_=__webpack_require__(3150),main_entity_parameter_js_WEBPACK_IMPORTED_MODULE_3_=__webpack_require__(6378),main_entity_parametermap_js_WEBPACK_IMPORTED_MODULE_4_=__webpack_require__(7918),main_entity_parameterutils_js_WEBPACK_IMPORTED_MODULE_31_=__webpack_require__(7085),main_entity_uidmap_js_WEBPACK_IMPORTED_MODULE_5_=__webpack_require__(3797),main_gui_colorpicker_colorwindow_js_WEBPACK_IMPORTED_MODULE_6_=__webpack_require__(5022),main_gui_colorpicker_opencoloreditorbutton_js_WEBPACK_IMPORTED_MODULE_7_=__webpack_require__(1093),main_gui_css_loadcss_js_WEBPACK_IMPORTED_MODULE_8_=__webpack_require__(2846),main_gui_css_themes_js_WEBPACK_IMPORTED_MODULE_9_=__webpack_require__(1271),main_gui_finderrors_finderrors_js_WEBPACK_IMPORTED_MODULE_10_=__webpack_require__(6178),main_gui_paramsgui_comments_commentbuttons_js_WEBPACK_IMPORTED_MODULE_11_=__webpack_require__(490),main_gui_paramsgui_paramsgui_js_WEBPACK_IMPORTED_MODULE_12_=__webpack_require__(7062),main_gui_renderer_renderer_js_WEBPACK_IMPORTED_MODULE_13_=__webpack_require__(7311),main_gui_actionlist_js_WEBPACK_IMPORTED_MODULE_32_=__webpack_require__(6223),main_gui_draggablewindow_js_WEBPACK_IMPORTED_MODULE_14_=__webpack_require__(834),main_gui_settingsmenu_js_WEBPACK_IMPORTED_MODULE_15_=__webpack_require__(6383),main_gui_toolbar_js_WEBPACK_IMPORTED_MODULE_16_=__webpack_require__(6586),main_gui_topgui_js_WEBPACK_IMPORTED_MODULE_17_=__webpack_require__(8351),main_ocm_ocm_js_WEBPACK_IMPORTED_MODULE_18_=__webpack_require__(5146),main_storage_settings_js_WEBPACK_IMPORTED_MODULE_19_=__webpack_require__(2946),main_storage_storageutils_js_WEBPACK_IMPORTED_MODULE_29_=__webpack_require__(1329),main_triggeractions_interactability_js_WEBPACK_IMPORTED_MODULE_20_=__webpack_require__(6113),main_wall_textures_wall_textures_js_WEBPACK_IMPORTED_MODULE_21_=__webpack_require__(2839),main_alescript_js_WEBPACK_IMPORTED_MODULE_30_=__webpack_require__(5338),main_html5mode_js_WEBPACK_IMPORTED_MODULE_22_=__webpack_require__(7218),main_log_js_WEBPACK_IMPORTED_MODULE_23_=__webpack_require__(3987),main_updates_js_WEBPACK_IMPORTED_MODULE_24_=__webpack_require__(7571),main_skin_preview_js_WEBPACK_IMPORTED_MODULE_25_=__webpack_require__(3569),main_spawn_areas_js_WEBPACK_IMPORTED_MODULE_26_=__webpack_require__(5129),main_extended_triggers_parse_ext_js_WEBPACK_IMPORTED_MODULE_27_=__webpack_require__(826),main_extended_triggers_compile_ext_js_WEBPACK_IMPORTED_MODULE_28_=__webpack_require__(4948);document.fonts.load("16px EuropeExt Regular"),document.fonts.load("16px DejaVu Sans Mono"),document.fonts.load("16px JetBrains Mono Italic");let main_window=unsafeWindow,main_isNative;try{GM_info,main_isNative=!0,main_window.nativeALEIRunning=!0}catch(e){main_isNative=!1}function main_$id(e){return document.getElementById(e)}function main_$query(e){return document.querySelector(e)}main_isNative||1!=main_window.nativeALEIRunning||Hello_IgnoreThisError_ItIsIntentional;let main_ROOT_ELEMENT=document.documentElement,main_stylesheets=document.styleSheets,main_VAL_TABLE={};main_window.ExtendedTriggersLoaded=!1;const main_TEXT_OVERHEAD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAYCAYAAAAxkDmIAAAAAXNSR0IArs4c6QAABHNJREFUaEPtmVvoZWMYxn+PMznEBSGlxAVuJKUcQyTHUCahEZNG43wYx8HIMIjJjPk3MimD0EyMQ0oRrpxKkblwKBdDcoFBktNrPbt3a82atfde/zV/snfru137W+v93ud5n/d5vy26NdEZ0ESfrjscHcATToIO4A7gCc/AhB+vtoIj4gLgEeA9SScMy0FEHAc8AWyQdNB08xURnwC7ABcCezf97qjvRMROwFvAvsA8SU9X90TEAcCLwP7Ao5Lm1r23+J33ngNMSbpy1LfbPC/nQdIbo95RydvSfg6reycWYCcoIh4ArgBWSzqvBuCbgNuAbYHPgNOL331a/l1EHA48A2wHXCTp1VHJb/O8A7hF1iLiZOBx4CfglBrw3i7AP7h49j5wFHCXpHsqAJsEC4rnr0s6tUUYjbaMDcARcQZwJ2C53qpyuj+BLzKRT2aVDZToiDgQuA84Btix8q5I4F4C5koyiJusiHgZOB5YWAYvIk4DHgM+LyT6KWAx8G61JRUtyCQ4BJgPvNk0HuDMbDd/pUJYAfpraB4ssxFxTXG+a4E9i3xWlXZDcZ4tgB+ztbWW6I+KD6wYQcFdAbP8O+BiwP1qB+AWSSsr1eDndwO/AbPzIMMAdn88EVhl0kha339fSuf9gCV0haR5AwC+LMH7sPje0aX9U5ZcYEnG5H69V1mGI8KyvqyI9cskmYnQKB6TJQHeOlVkvkmY3sDgXQ18ayJIWlfpqbvn3l+A6yW5RfRWkt45NEG/2VyAbVSarnXAswV4NwMvSJo1IOEO1uxeJGnhIJOVpHkO+KNOXvOw/SpcL+nQAd/bxGyVzJWrapakdyLiXuAqg9E3W2muzi4MzEPAGqBxPEkcG9WPJR1RjS2V5VjgRknLKnk4C5gDLJV0Xc1em8NXCuJuv7kAT8tFZxIsZduMYIUreLGkBUMAXjTKnTd18AmeK2aNzVZE3FDEd0cSsWe+SmbqV5stYLc0V35sslqVhk4L5XgKU2bCDJxEImI2YEVZK2ltJQ+OyZNML0cDiFtWvtYS3RbgVYWcXtKk9P8jgPtO+HerAfBgSq5lc3lJ/tyve1UFuPLtsK1GJsXIcXA6ANdUZRmw/y3ATST69uwfKyVN/dsSXQLP3sCtwYCeD3xtkMvmLCL6/dr9eOd02L0ZOiIOaynRI4skFaQM8LnpDx5uKNG+q7DCLK9OCjM6BwPuFx5LvOpM1knuKyl/cyQ9P+yiIyJssjzqrE6zUTZZdtg2QB5vBpqsEsB9w2RXa0e+RJIr9Z9VuhzxxceWwAcVY9Y4npLJagPwfunWf25ostyL7Sdeq04TMwqwb7LS3l8O7JNJ2iiHwPd5I3RrDXM3uslKx2iDc2QytPquHwCPSa6y2jGpAqBHHhPiK5uTuhujvBzxbZXNXXW0MqkaxVMak6YNcE4X9giXFrnaY8bHpCa9s/vNeGSg+zdpPHBqHWUHcOvUjcfGDuDxwKl1lB3ArVM3Hhs7gMcDp9ZRdgC3Tt14bOwAHg+cWkf5N7oPsDdbjPHbAAAAAElFTkSuQmCC",main_TEXT_SCORE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHwAAAAYCAYAAAA4e5nyAAAAAXNSR0IArs4c6QAAA0hJREFUaEPtmbuvTUEUxn/TiAbREUElEXqJQiIoNKIRhYQGlUY0HoVCpxGNaFC4EYmKRhQehUShFaKg9AeIimac2Zk5WXfOmsfeZ3Ozc+d29+6ZWbO+bz2+NdfQftYVAmZdeducpRG+zoKgEd4IB2vtWeAe8MwYc0FiYq19DRwALhljVkp4ibM2ibUPlXMfAOfFml+1Nkp30L5ba28BV4H3xphj8RrxfSW+6xB7YY/H76g44wdwzhjztnSutfYI8Bj4aYzZH/ESOPuo+RPWqhk+JuHRpQLIWRD7BlUJqAThWYCstS4A3ZrbxpibQ2yU9lhrPwNbGuE9q0gJ2AThyWxx6xvhHjUt+5Sy/UfLjNoyWZPhPjv2CTK/xGWuFAgyw4AzvqW8cSUx4afLyKxN6SNwUKzvzo0qXjbDFVw/ALvXtKRrvdCDdSgmfSzCPVE7Q48Xvc3hWdUPfRY7PbLX7QFuzPq5661d4MTlttam8NFpkOeh/1trn860z0upe3IlXevXIsgXglsEx1I9XAotGZydoAKc4FgQESlxMQbhqTNqz44yzPXp096Xa8BGYDNwBXC/48lXtYdmU/ztW6niFAhf0BC5s8ciPKvSPXg5Nd9lT1CgtaTkSrrvrR1JUbZUqVRFRF4GHgEngHfASeAJcAr46sv7PDBKNmt99BUmWdI9BjF+OZUevnV3TrWzpVT6DJg9frTZkDCwauSoBaNAuDoWiqqSdVgZZe4AL4DjwHWf2d+Bw2EsTd1Hs1nrYwXhC8FQGMsC4a9yY+SyhLt7qxmeUMZLj2UjZ3ioCp+AbbMWddH38q2zrN8F3HcjWR+bIxI+1xeiQmYni5JI7VpUYUYtlfTQw6uyKjffp3pr/Lgzcg8PAO4QYi2Ub3elu57wIT28+GCjle2AgzYW9tEH/6SkOzJSL1beme1SuORKktJb3SuYClqtYq6JeKF8u9c/4c9vqRNqbfbM8OTjzlqp9Kqn1cTzqToXC0BC31+YT8XIFJ4gF+b6MeZwYWc+QuZGvBqbfQgXfTzM9quek//bHF6TGW3NNBFo/y2bJm+Db90IHwzdNDc2wqfJ2+BbN8IHQzfNjY3wafI2+NaN8MHQTXNjI3yavA2+9V/XCzNGz/W2wgAAAABJRU5ErkJggg==",main_TEXT_CHAT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAAAYCAYAAAAbIMgnAAAAAXNSR0IArs4c6QAAAwZJREFUaEPtma+OFEEQxn9tQKFwoDHwBKAIkPACCAwYcCgUYBAYcgpBCIYz8BKQcARCwhuAxIHDgALTXE26J7W11bM9dzObm0uvup0/W9Xf1/XVV32B9lkkAmGRWbekacQtdBNslbgY4xPgAXAC+BZCuBBjfA9cTfjthhDuLhTLPu0Y41fgPPAP2AkhPPbWpJ77A9wLIbypXbtLXIzxCvAaOGuDm3ujAs5NnAJC1t9vghjjK+BOAuUHcDuE8OEwaxkC+KDEAZKbi7uNd9yI0wTthRCuyYJNVfebLcZ4C3gBnEqgdYTW7vrSc424kQh6FZ2Iy9IlX3v5Ms/3RI8Mu/b4QYkTqax9d9KKMzs4L6jrZQnA6h5X+K1e5go9Q0t892yS+1xV+bWOJCOhWlp1JeZ3VmIbgF8CN1KsXeCi1+OMlOslaBWo6o+TEad2ryS0A3xUep1BvFxjTkwldIAquRvsq7bhA+dSzL/A7wRuNkZrINXGHiDBJc4zIhuuDRqbGuKGlKMD0TRVXWG658iCflYSlwEt9aM+hk3OVlG6L8ZENs9n4Gb6+xHwNBGpDUtV7CFJs/dSDtlN697rxVq75hFQQ9wK854TU7tabL5OTEvjHvBlE3HAJ88wmLhFybR9Ky1axg0dX6rvGXA/GZNcga5Z8WIDz0uW3yHukjfy1FbhtogrVeiUxBXl0oD8fb+qTqrekzeFXHsHXE8zZZbjGuKyyjycibg81w62hFkrzpGxjebksBVnXKQsXkjq+q4MwmqX/9qvmtPGZdYQl/v1XBW3VeL04FgrY8WTk4KEaFCLPc6Z2+SS7pX6pEbuldziYH8d2ePOqAMA7V6r+tlsUpnmj9Lwmy362xHmRFfmKFfpjB1yqWSYVu457xZjjyTOc9hyKpXHFM/kSTrFI8BJpDKfsZn+YjdKtatMAG6cpUrN1JkBtWGyv7sGTs0MOYa4JNE2rpCVx5NpiBvy/+3e0UBgq/8dOBpLPh5ZNOIWymMjrhG3UAQWmnaruEbcQhFYaNqt4hZK3H+hgmxGYcqn0gAAAABJRU5ErkJggg==";(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.INFO,"Starting up...");let main_JS_setTimeout=main_window.setTimeout,main_JS_eval=main_window.eval,main_ALE_Render,main_aleiSessionID=null,main_aleiSessionList=[];function main_updateSounds(){let e=main_VAL_TABLE.sound;e.am_base="Indoor Ambience",e.am_wind="Outdoor Ambience",e.android2_die="DT-148 - Death",e.android2_hurt="DT-148 - Hurt",e.android2_welcome2="DT-148 - Alerted",e.arrin_death1="Arrin - Death",e.arrin_dying="Arrin - Dying",e.arrin_hurt1="Arrin - Hurt 1",e.arrin_hurt2="Arrin - Hurt 2",e.arrin_welcome1="Arrin - Alerted 1",e.arrin_welcome2="Arrin - Alerted 2",e.arrin_welcome3="Arrin - Alerted 3",e.bounce_bullet="Falkonian PSI Cutter - Shot Bounce",e.dart4="Medic Pistol",e.exp_event_stop="EXP - Stop",e.exp_level="EXP - Level Up",e.exp_tick="EXP - Gain",e.gameplay_song="Katharsys - Erges",e.gravitator2="Floor gravitator noice",e.helm_proxy_alert_over_hereB="Proxy - Over here!",e.helm_proxy_alert_take_coverB="Proxy - Take cover!",e.helm_proxy_alert_up_thereA="Proxy - Up there!",e.helm_proxy_death3="Proxy - Death 1",e.helm_proxy_death4="Proxy - Death 2",e.helm_proxy_death5="Proxy - Death 3",e.helm_proxy_death6="Proxy - Death 4",e.helm_proxy_dyingC="Proxy - Help! 1",e.helm_proxy_dyingF="Proxy - Help! 2",e.helm_proxy_enemy_down_fantasticA="Proxy - Fantastic.",e.helm_proxy_enemy_down_got_oneD="Proxy - Got one.",e.helm_proxy_enemy_down_niceA="Proxy - Nice. 1",e.helm_proxy_enemy_down_niceC="Proxy - Nice. 2",e.helm_proxy_hurt11="Proxy - Hurt 1",e.helm_proxy_hurt12="Proxy - Hurt 2",e.helm_proxy_hurt13="Proxy - Hurt 3",e.helm_proxy_hurt14="Proxy - Hurt 4",e.helm_proxy_hurt15="Proxy - Hurt 5",e.helm_proxy_hurt17="Proxy - Hurt 6",e.helm_proxy_hurt4="Proxy - Hurt 7",e.helm_proxy_hurt5="Proxy - Hurt 8",e.helm_proxy_hurt8="Proxy - Hurt 9",e.helm_proxy_hurt9="Proxy - Hurt 10",e.hexagon_death1="Hexagon - Death 1",e.hexagon_death2="Hexagon - Death 2",e.hexagon_pain1="Hexagon - Hurt 1",e.hexagon_pain2="Hexagon - Hurt 2",e.hexagon_pain3="Hexagon - Hurt 3",e.hexagon_pain4="Hexagon - Hurt 4",e.hexagon_welcome1="Hexagon - Alerted 1",e.hexagon_welcome2="Hexagon - Alerted 2",e.hexagon_welcome3="Hexagon - Alerted 3",e.main_song="NPhonix - Antigravity",e.orakin_death1="Orakin - Death 1",e.orakin_death2="Orakin - Death 2",e.orakin_hurt="Orakin - Hurt",e.orakin_welcome="Orakin - Alerted",e.proxy_alert_over_hereB="No Helm Proxy - Over here!",e.proxy_alert_take_coverB="No Helm Proxy - Take cover!",e.proxy_alert_up_thereA="No Helm Proxy - Up there!",e.proxy_death3="No Helm Proxy - Death 1",e.proxy_death4="No Helm Proxy - Death 2",e.proxy_death5="No Helm Proxy - Death 3",e.proxy_death6="No Helm Proxy - Death 4",e.proxy_dyingC="No Helm Proxy - Help! 1",e.proxy_dyingF="No Helm Proxy - Help! 2 ",e.proxy_enemy_down_fantasticA="No Helm Proxy - Fantastic.",e.proxy_enemy_down_got_oneD="No Helm Proxy - Got one.",e.proxy_enemy_down_niceA="No Helm Proxy - Nice. 1",e.proxy_enemy_down_niceC="No Helm Proxy - Nice. 2",e.proxy_hurt11="No Helm Proxy - Hurt 1",e.proxy_hurt12="No Helm Proxy - Hurt 2",e.proxy_hurt13="No Helm Proxy - Hurt 3",e.proxy_hurt14="No Helm Proxy - Hurt 4",e.proxy_hurt15="No Helm Proxy - Hurt 5",e.proxy_hurt17="No Helm Proxy - Hurt 6",e.proxy_hurt4="No Helm Proxy - Hurt 7",e.proxy_hurt5="No Helm Proxy - Hurt 8",e.proxy_hurt8="No Helm Proxy - Hurt 9",e.proxy_hurt9="No Helm Proxy - Hurt 10",e.silk_alert_contactA="Silk - Contact!",e.silk_alert_i_see_oneA="Silk - I see one.",e.silk_alert_there_is_oneA="Silk - There is one...!",e.silk_death1B="Silk - Death 1",e.silk_death2B="Silk - Death 2",e.silk_dyingB="Silk - Not good...",e.silk_enemy_down_brilliantC="Silk - Brilliant.",e.silk_enemy_down_eliminatedB="Silk - Eliminated.",e.silk_enemy_down_hell_yeahB="Silk - Hell yeah!",e.silk_enemy_down_ive_got_oneB="Silk - I got one!",e.silk_enemy_down_minus_oneB="Silk - -1.",e.silk_enemy_down_no_kicking_for_youB="Silk - No kicking for you.",e.silk_hurt1B="Silk - Hurt 1",e.silk_hurt2B="Silk - Hurt 2",e.silk_hurt5="Silk - Hurt 3",e.silk_hurt6="Silk - Hurt 4",e.silk_hurt9B="Silk - Hurt 5",e.wea_crossfire2="Crossfire CR-145 Vortex",e.wea_ditzy_cs_ik="Assault Rifle CS-IK",e.wea_glhf="Grenade Launcher CS-GLHF",e.wea_incompetence_archetype_27xx_fire="Archetype 27XX",e.wea_lazyrain_gravy_rl="Falkonian Anti-Grav Rocket Launcher",e.wea_m202="Rocket Launcher CS-Barrage",e.wea_moonhawk_railgun="Crossfire CR-34 Marauder",e.wea_ph01="Crossfire CR-54 Viper",e.wea_plasma_smg="Plasma Pistol",e.wea_plasma_shotgun="Plasma Shotgun",e.wea_rail_alt2="Falkonian PSI Cutter",e.wea_thetoppestkek_shotgun_nxs25="Shotgun NXS-25",e.xin_celebrate="Xin - Celebrating",e.xin_death="Xin - Death",e.xin_enemy_spotted="Xin - Alerted",e.xin_hit="Xin - Hurt";let t={Grosk:["Grosk",["death","Death",2],["dying","Dying",2],["edown","Celebrating",3],["welcome","Alerted",5],["hurt","Hurt",3]],drohnentroop:["Drohnen Trooper",["welcome","Alerted",3],["hurt","Hurt",3],["edown","Celebrating",3],["dying","Dying",1],["death","Death",3]],drohnenfem:["Drohnen Female",["welcome","Alerted",3],["hurt","Hurt",3],["edown","Celebrating",3],["dying","Dying",1],["death","Death",3]],elurra:["Elurra",["welcome","Alerted",3],["hurt","Hurt",2],["edown","Celebrating",2],["dying","Dying",1],["death","Death",1]],ferro:["Lt. Ferro",["welcome","Alerted",3],["hurt","Hurt",2],["edown","Celebrating",3],["death","Death",2]],serkova:["Serkova",["welcome","Alerted",3],["hurt","Hurt",1],["edown","Celebrating",2],["death","Death",1]],phantom:["Phantom",["edown","Celebrating",1],["welcome","Alerted",2],["death","Death",1]]};for(let n of Object.entries(t)){let t=n[0],o=n[1],r=o[0];for(let n=1;n<o.length;n++){let a=o[n];for(let n=1;n<=a[2];n++)e[`${t}_${a[0]}${n}`]=`${r} - ${a[1]} ${n}`}}}function main_updateVoicePresets(){let e=main_VAL_TABLE.voice_preset;e.proxy_helmetless="Proxy (helmetless)",e.silk="Silk",e.orakin="Orakin",e.arrin="Arrin",e.civilian_male="Civilian Male",e.vulture="Vulture",e.crossfire_sentinel="Crossfire Sentinel",e.xin="Xin",e.grosk="Grosk",e.elurra="Elurra",e.drohnenfem="Drohnen Female",e.serkova="Serkova",e.ferro="Lt. Ferro",e.drohnentroop="Drohnen Trooper",e.phantom="Phantom"}function main_updateStyles(){for(let e=0;e<main_stylesheets.length;e++){let t=main_stylesheets[e];for(let e=0;e<t.rules.length;e++){let n=t.rules[e];switch(n.selectorText){case".p_i":n.style.setProperty("display","flex");break;case".rightui":n.style.setProperty("width",main_storage_settings_js_WEBPACK_IMPORTED_MODULE_19_.F.rightPanelSize);break;case".pa1":n.style.setProperty("flex-grow",0),n.style.setProperty("flex-shrink",0);break;case".pa2":n.style.setProperty("width","100%");break;case".opcode_field":n.style.setProperty("font-size",main_storage_settings_js_WEBPACK_IMPORTED_MODULE_19_.F.triggerEditTextSize);break;case"#rparams":n.style.setProperty("height","var(--ALEI_RPARAMS_HEIGHT)")}}}main_$id("stars").style.setProperty("background-image",`url(${main_storage_settings_js_WEBPACK_IMPORTED_MODULE_19_.F.starsImage})`);let e=THEME;ThemeSet(THEME_BLUE),ThemeSet(e)}function main_updateEngineMarkNames(){main_VAL_TABLE.engine_mark.no_auto_revive="Disable AI actors from reviving allies"}const main_allChars=[{id:-1,name:"Death Match model"},{id:1,name:"Campaign Hero model"},{id:2,name:"Usurpation Soldier Minor"},{id:3,name:"Proxy"},{id:4,name:"Android T-01187"},{id:5,name:"Drone Controller"},{id:6,name:"Advanced Usurpation Soldier"},{id:7,name:"Civil Security Heavy"},{id:8,name:"Civil Security Lite"},{id:9,name:"Android SLC-56"},{id:10,name:"Skin #10",added:!0},{id:11,name:"Civil Security Boss"},{id:12,name:"Civil Security Ghost"},{id:13,name:"Noir Lime"},{id:14,name:"Falkok"},{id:15,name:"Phoenix Falkok"},{id:16,name:"Grub"},{id:17,name:"Civil Security Ghost (visible)"},{id:18,name:"Star Defender (from 'eric gurt-star_defenders')",renamed:!0},{id:19,name:"Raven by A Coniferous Chair"},{id:20,name:"Skin #20",added:!0},{id:21,name:"PB:FTTP Star Defender"},{id:22,name:"PB:FTTP Marine"},{id:23,name:"PB:FTTP Soldier Rank 1"},{id:24,name:"PB:FTTP Soldier Rank 2"},{id:25,name:"PB:FTTP Soldier Rank 3"},{id:26,name:"PB:FTTP Soldier Rank 4"},{id:27,name:"Armored Grub"},{id:28,name:"Elite Grub"},{id:29,name:"Falkok Boss by Mr. Darks"},{id:30,name:"Skin #30",added:!0},{id:31,name:"Reakhohsha Operative by darkstar 1"},{id:32,name:"Civil Protector by darkstar 1"},{id:33,name:"Android ATM-105 by darkstar 1"},{id:34,name:"Android DT-148 by Ditzy"},{id:35,name:"Zephyr by Ditzy"},{id:36,name:"Hermes by darkstar 1"},{id:37,name:"Hexagon by darkstar 1"},{id:38,name:"GoldenKnife Noir Lime",added:!0},{id:39,name:"RootZ Noir Lime",added:!0},{id:40,name:"Lite Hero"},{id:41,name:"Lite Hero 2"},{id:42,name:"Lite Hero 3"},{id:43,name:"Lite Hero 4"},{id:44,name:"Lite Hero 5"},{id:45,name:"Lite Hero 6"},{id:46,name:"Lite Hero 7"},{id:47,name:"Lite Hero 8"},{id:48,name:"Lite Hero 9"},{id:49,name:"Heavy Hero"},{id:50,name:"Skin #50",added:!0},{id:60,name:"Skin #60",added:!0},{id:61,name:"Proxy (No helmet)"},{id:62,name:"Skin #62",added:!0},{id:69,name:"Usurpation Ranger"},{id:70,name:"Usurpation Destroyer"},{id:71,name:"Usurpation Soldier Major"},{id:72,name:"Proxy (White)"},{id:73,name:"Blue Player (Noir Lime)"},{id:74,name:"Red Player (Noir Lime)"},{id:75,name:"Blue Proxy"},{id:76,name:"Red Proxy"},{id:77,name:"Blue Civil Security Lite"},{id:78,name:"Red Civil Security Lite"},{id:79,name:"Blue Usurpation Soldier"},{id:80,name:"Red Usurpation Soldier"},{id:81,name:"Blue Android SLC-56"},{id:82,name:"Red Android SLC-56"},{id:83,name:"Blue Lite Hero"},{id:84,name:"Red Lite Hero"},{id:85,name:"Blue Falkok"},{id:86,name:"Red Falkok"},{id:87,name:"Blue Raven by A Coniferous Chair"},{id:88,name:"Red Raven by A Coniferous Chair"},{id:89,name:"Blue Civil Protector by darkstar 1"},{id:90,name:"Red Civil Protector by darkstar 1"},{id:130,name:"Mining Android by darkstar 1"},{id:131,name:"Crossfire Sentinel by Ditzy"},{id:132,name:"Crossfire Headhunter by Ditzy"},{id:133,name:"Federation Soldier by CakeSpider"},{id:134,name:"Vulture by darkstar 1"},{id:135,name:"Silk (armorless) by darkstar 1"},{id:136,name:"Silk by darkstar 1"},{id:137,name:"Civil Security Riot by eru_"},{id:138,name:"Avre by darkstar 1"},{id:139,name:"Civilian (male 1) by mrnat444"},{id:140,name:"Civilian (male 2) by mrnat444"},{id:141,name:"Civilian (male 3) by mrnat444"},{id:142,name:"Civilian (female 1) by mrnat444"},{id:143,name:"Civilian (female 2) by mrnat444"},{id:144,name:"Civilian (female 3) by mrnat444"},{id:145,name:"Civilian (male 1 equipped) by mrnat444"},{id:146,name:"Civilian (male 2 equipped) by mrnat444"},{id:147,name:"Worker (male) by mrnat444"},{id:148,name:"Worker (female) by mrnat444"},{id:149,name:"S.W.A.T (dark) by mrnat444"},{id:150,name:"S.W.A.T (brighter) by mrnat444"},{id:151,name:"Purple Xin",added:!0},{id:152,name:"Golden Xin",added:!0},{id:153,name:"Blue Xin",added:!0},{id:154,name:"Red Xin",added:!0},{id:155,name:"Amber Xin",added:!0},{id:156,name:"Nirvana Noir Lime",added:!0},{id:157,name:"Purple Gallynew",added:!0},{id:158,name:"Golden Gallynew",added:!0},{id:159,name:"Blue Gallynew",added:!0},{id:160,name:"Red Gallynew",added:!0},{id:161,name:"Amber Gallynew",added:!0},{id:162,name:"Pinkine",added:!0},{id:164,name:"Blue Heavy Hero (Flash-only)",renamed:!0},{id:165,name:"Red Heavy Hero (Flash-only)",renamed:!0},{id:198,name:"Blue Civil Security Heavy (Flash-only)",renamed:!0},{id:199,name:"Red Civil Security Heavy (Flash-only)",renamed:!0},{id:166,name:"Orakin (Flash-only)",renamed:!0},{id:167,name:"Husk (Flash-only)",renamed:!0},{id:168,name:"Hex (Flash-only)",renamed:!0},{id:169,name:"Arrin (Flash-only)",renamed:!0},{id:170,name:"Heavy Usurpation Soldier (Flash-only)",renamed:!0},{id:171,name:"Cyber Grub by S1lk (Flash-only)",renamed:!0},{id:172,name:"Grosk (Flash-only)",renamed:!0},{id:173,name:"Futuristic Knight (Flash-only)",renamed:!0},{id:175,name:"Serkova Insertion Unit (Flash-only)",renamed:!0},{id:176,name:"Xenos Scout (Flash-only)",renamed:!0},{id:177,name:"Armored Trooper (Flash-only)",renamed:!0},{id:163,name:"Raider (by Serpent) (Flash-only)",renamed:!0},{id:183,name:"Lt. Ferro (by Serpent) (Flash-only)",renamed:!0},{id:185,name:"Elurra (Masked) (by Lin) (Flash-only)",renamed:!0},{id:184,name:"Xenos Titan (Flash-only)",renamed:!0},{id:195,name:"Wraith (by Ark633) (Flash-only)",renamed:!0},{id:178,name:"New Generation Marine (Flash-only)",renamed:!0},{id:200,name:"Xenos Welder (Flash-only)",renamed:!0},{id:201,name:"Xenos Special Unit (Flash-only)",renamed:!0},{id:193,name:"Xenos Marine (Flash-only)",renamed:!0},{id:203,name:"Serkova Gunner Unit (Flash-only)",renamed:!0},{id:191,name:"Serkova Recon Unit (Flash-only)",renamed:!0},{id:204,name:"Serkova Grenader Unit (Flash-only)",renamed:!0},{id:202,name:"Serkova Assault Unit (Flash-only)",renamed:!0},{id:205,name:"Serkova Team Leader (Flash-only)",renamed:!0},{id:206,name:"Serkova Resource Unit (Flash-only)",renamed:!0},{id:207,name:"Serkova Technician Unit (Flash-only)",renamed:!0},{id:211,name:"XBT-117 Android (Flash-only)",renamed:!0},{id:186,name:"Drohnen Heavy (by Ark633) (Flash-only)",renamed:!0},{id:189,name:"Maroon (by Francis localhost) (Flash-only)",renamed:!0},{id:196,name:"Serkova Armored Unit (Flash-only)",renamed:!0},{id:192,name:"Drohnen Drifter (by Ark633) (Flash-only)",renamed:!0},{id:208,name:"Serkova Grub (Flash-only)",renamed:!0},{id:209,name:"Serkova Reinforced Grub (Flash-only)",renamed:!0},{id:210,name:"Serkova Devastator Grub (Flash-only)",renamed:!0},{id:181,name:"Huntsman (Night) (Flash-only)",renamed:!0},{id:182,name:"Huntsman (Swamp) (Flash-only)",renamed:!0},{id:190,name:"Drohnen Skirmisher (by Ark633) (Flash-only)",renamed:!0},{id:187,name:"Cromastakan (Flash-only)",renamed:!0},{id:212,name:"Teneguilae (Flash-only)",renamed:!0},{id:179,name:"Elurra (by Lin) (Flash-only)",renamed:!0},{id:188,name:"Sgt. Davais (Flash-only)",renamed:!0},{id:213,name:"Walker (by Serpent) (Flash-only)",renamed:!0},{id:214,name:"Space Grub (by Broforce1) (Flash-only)",renamed:!0},{id:180,name:"Dark Proxy (by littlekk) (Flash-only)",renamed:!0},{id:194,name:"Dark Android SLC-56 (by littlekk) (Flash-only)",renamed:!0},{id:174,name:"Uncivil Proxy (Flash-only)",added:!0},{id:197,name:"Phantom (from 'kiriakos gr96-phantom') (Flash-only)",added:!0},{id:215,name:"Blue Phantom (from 'kiriakos gr96-phantom') (Flash-only)",added:!0},{id:216,name:"Red Phantom (from 'kiriakos gr96-phantom') (Flash-only)",added:!0},{id:217,name:"Misfit (Flash-only)",added:!0},{id:218,name:"Kaibil (Flash-only)",added:!0}];function main_updateSkins(){!function e(){Object.keys(img_chars_full).length>0?function(){for(const e of main_allChars){const{id:t,name:n}=e;if(e.added){const e=`chars_full/char${t.toString().padStart(4,"0")}.png`;CACHED_CHARS[t]=new Image,CACHED_CHARS[t].src=e,CACHED_CHARS[t].loaded=!1,CACHED_CHARS[t].native=!0,CACHED_CHARS[t].onload=function(){CACHED_CHARS[t].loaded=!0},CUSTOM_IMAGES_APPROVED[t]=!0,img_chars_full[t]=new Image,img_chars_full[t].src=e,special_values_table.char[t]=`<span style='background:url(${img_chars_full[t].src}); width: 16px; height: 16px; display: inline-block; background-position: center; background-position-x: 30%; background-position-y: 26%; background-size: 67px;vertical-align: -4px;'></span> ${n}`}else e.renamed&&(special_values_table.char[t]=`<span style='background:url(${img_chars_full[t].src}); width: 16px; height: 16px; display: inline-block; background-position: center; background-position-x: 30%; background-position-y: 26%; background-size: 67px;vertical-align: -4px;'></span> ${n}`)}(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"Updated skins")}():setTimeout(e,50)}()}function main_optimize(){main_window.setTimeout=(e,t)=>{if(e!=ani)return main_JS_setTimeout(e,t);main_window.requestAnimationFrame(ani)};let e=main_window.BrowseImages,t={};main_window.BrowseImages=function(n="bg_model",o="",r=null){null==t[n]&&(t[n]="[ALEI] Loading...",(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.INFO,`Will cache response of ${n}`));let a=main_window.setTimeout;main_window.setTimeout=(e,o)=>{main_window.setTimeout=a,main_window.ServerRequest=(e,o,r=null)=>{main_window.ServerRequest=main_ALEI_ServerRequest,ServerRequest(e,o,r).then((()=>{let e=image_list.children[3],o=0;for(const t of e.children){let e=t.children[0];if('url("decors/text.png")'===e.style.backgroundImage||'url("decors/text2.png")'===e.style.backgroundImage||'url("decors/text3.png")'===e.style.backgroundImage){let t=o;switch(o++,t){case 0:e.style.backgroundImage=`url("${main_TEXT_OVERHEAD}")`;break;case 1:e.style.backgroundImage=`url("${main_TEXT_SCORE}")`;break;case 2:e.style.backgroundImage=`url("${main_TEXT_CHAT}")`}}if(3===o)break}t[n]=image_list.innerHTML}))},e()},e(n,o,r),image_list.innerHTML=t[n]}}function main_updateVehicles(){let e=main_VAL_TABLE.vehicle_model,t=[["veh_hh","Grabbable Ledge","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACLSURBVEhLYxhxgBFE2M3/r/vvH0MQWISGgImJYd2hRMbLIDbYYpu5/+t/MzEEf2diuALi0wJw/mPQYf3HsPZIMmMjiA+3+BMLg/olIYblID4tgN47hki+Pww3YRYzgUUHAIxaTDcwajHdwKjFdAOjFtMNjFpMNzBqMd3AqMV0AwPbrh6InsQAAQYGAA8CLDKAAcpOAAAAAElFTkSuQmCC"]];for(let n=0;n<t.length;n++){let o=t[n],r=o[0],a=o[1],i=o[2];e[r]=`<img src='${i}' border=0 height=12 style=vertical-align:middle title='${a}' > ${a}`,img_vehicles[r]=new Image,img_vehicles[r].src=i}}function main_updateGuns(){let e=[["gun_rl0","BETA Rocket Launcher","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAUCAYAAAAa2LrXAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAfeSURBVFhH3VhZaJVHFD53+++SxCRmM4nBmLhUTYtCbCJaSpF0sRTqVmn7UAptsdQuIKXYQqlQ2of60Idai+BToVQNcQNBqCZQipQEEqNRq8E1MYlZzXKT3Nyl33e8c3u9GputCx49mZnzzz9z5pvvnJn/2mQKsnHjxtxQKGSPNsXhcEScTmfH/v37Q1HTlGX9+vXO/v7+0MmTJyNR0/9aJgXgpk2bfDab7QtUt9rt9lAkEhG0JRwOe2D78ODBg3u14xRkw4YNpRjnc4xXhHFHYBpFGWAJDZi6y+UaxdyBkZGRAIXPEhVjBJKSkgLsNzY2FsBmj8E2hmfUIMYIYNMbDhw4MID2tGTCAAK8jSi+xEIey83NFSoBhJNy+/ZtuX79+u+ofwxbCM7qIuH4qNZt9oCtKxySiITEDrVBsRBbj4xFFjlyRkdHd1iW9c68efNcs2fP5obo2Hg/Vjft1tZWGRgYkCVLlkhqaqoEg0HtY/pSaWtpaZGhoSHtg+i4ZxyAzz5vVVZW7tPFTUNiAG7evDkdg2ZigiAWzfAJox7AbuWjvhO2F71er05eUFAg+fn56hTs6mhjY6M6SoE9Ag0BxCDHg9tBABcEP0L4F5Qg2linDZawL5KVnZ+TWVRUpIt9mHAuv98vly5dUsBWrVol9ImgUEx57do1OXPmjMyfP1/95CabZxT6io14/+jRo99FTVMWBXDLli0uOFQNWpehyZAxAIYBahKAcaWkpChAfX19UlhYKDk5OQoghc6dO3dOEDbCfsPDw9LR0SF5eXkSDobk1p0O6fs0S0KznGIbQ9iHMTz+24Jh8e3rlLKkJyQ7L0dB+TshiJzv5s2bcvXqVW0bO4U+0Y/FixfLrFmztK8Bz/RpaGjg+9uOHTu2Ww3TEAf/LFq0aIPP59u+dOlS+5w5cyyAY2VnZ7tRepKTkx0EhDvPnUROkYyMDHXSOAbglZlkIgFkP4YZxgRDfOJvGZDBCq8MF/oklOqUYJpLgukuCWS4xe4IiXXKL1kF2TrWRCUtLU3mzp2ryoiIr5N1Ho8n5l+icHNxUB0Hk2ujpimLOUk/IqMICiemMjSotJeUlAjyk4KHfKWAxQsd5YIINFnE5263WwG12W3i9XjFavJHe5P2YCHesSOOA4+nSIejW/wD6BtlyESEczIikGLuU8PSf0McuDa8AOB2MF8k5goK2wSEzDLMYz0eRDrMNg8TAocDQW0MJ7Iw7IyIv7lH3F2j4qsDM09Df4P+2i/e2kEJtY6K1+WVjMwMHY9+8P14nUlAZpKBjmXLln0PphUTGDpOIFgmitlxE6KJwvfION4syFyCaMLI6XKKNeyU1GanpLVYktrultQuj6T1eiV9AKx3e6S3t1dzFt8nkznW4OAgF6olNyJ+XoJqhHU+mwjI7EsA79y5MzMAIjz9cNoO9iR1d3enMXdxEZyIoMQDSgfHc5J9yLjOzk4FObGfx+sRd4pHrGQwNAnqs8TltcTpcSnYWJBePdra2lTJZo4Fn/TqQn94xaEwTTDnGqYTYL5PEjxM6CM3hwcQUtHxixcvThvA2DbiIpuCRZdAn0bzGbBtBZiUxZ1nWOJQ0ZJO0OlEMGkna86ePatMNX0ops4+3H0CoCd09BSn8O7G8XGIaX8KSyrzLsFdvny55mSysra2VkpLS/Xq09PTo+2ysjJtx49L4byc89atW9Lc3Ezwq+DjNlyk26JdpizjZm0Amo2JV3R1dT1XU1Pz3rp163g6K7sYagSWDDCAkhF0DtecaoD1DYaIoYs+e1AcB5t/xhXiycuXL+8qLy9XdhuQWc/MzNRTNPEE5fhkGJUgcW7eBcnOlStX6oZxbrLWtPm+2QhevaLPm2H75NChQ1X6YAZkXAATZA+uBlsXLFigLKFyEbjixG760cRciVPwDexs7MjFBd2L4gr0VXzq1ahR5DRO9XICZoAia7hBZCbZnigEg6HNeclE9ifrOMbChQuVwfX19cILOQ87jkvm8q5448aNEdwgvsWGfw0f+qNDzojcex8ZX5qQG98EMzx0ND7BkwVHjhxh3vylurr6paamJn5vxgSH1BoUr0F3nj9/fkiNIkNY0CYu1DCYyjDj5jCX8ToSL3xO8Nrb27VO4BgJyGOSlZWlrGX48wDjmLxy1dXVMX+eQP9XDh8+/BPm50fCjMpEAeyDpkCfSk9PVwOBZNgyKXPR+BJJhvkItEc7RAUAfobCj53/4a5FwbiEBb4MBucQlKhNxzSntzkQaKdSGOYECN/dynxuANnKd8hIHn48BJF29KBAbuwDmGuqqqpu6AD/gEw0hClZ0DP4RMp90CnL8EKSPoHq83ctGr7FKBqhDN+javxL3gZQewlCPEgEiKctP8VYp5jnRpkLWfLuyk0kaIwK1MnsNjC5Ga/9AWBPPWDeGZXJAEjZjp3fVVxcrGESLww/JnYsZBuauwEeGVsN7cIiYqAaAZt8eOcDVDOhHIwxS+UvElZFRYULc1lglgWwLNpMH8xtYQNdAKsb5QXYzkEvwH4FfdtxSAyj/a/IZAFkmNZj5xfwAIlnIRnBnIjw6l27du1XYNa7eM6E/SwA7Lzba/qCsW0A1o4NsGPce/LtfyGTBZDyOpQ/AwWh98QxQQRoztWrVw/gOvIjGMZTzxwcj6RMBUAKP1rv/56DIO/YcEXpx12Pvyo/4iLyJ69VPj0rzLmtAAAAAElFTkSuQmCC"]];for(let t=0;t<e.length;t++){let n=e[t],o=n[0],r=n[1],a=n[2];main_VAL_TABLE.gun_model[o]=`<img src='${a}' border=0 width=80 height=20 style=vertical-align:baseline title='${r}'>`,img_guns[o]=new Image,img_guns[o].src=a}}function main_updateDecors(){const e=[{model:"hakase",name:"Hakase",src1:"decors/hakase.png",src2:"pic.php?m=hakase&c=5"}];main_window.ALEI_decors=e;const t=[{model:"text",src:main_TEXT_OVERHEAD},{model:"text2",src:main_TEXT_SCORE},{model:"text3",src:main_TEXT_CHAT}];!function n(){Object.keys(img_decors).length>0?function(){for(const{model:t,name:n,src1:o,src2:r}of e)special_values_table.decor_model[t]=n,CACHED_DECORS[t]=new Image,CACHED_DECORS[t].src=o,CACHED_DECORS[t].native=!0,CACHED_DECORS[t].loaded=!1,CACHED_DECORS[t].onload=function(){CACHED_DECORS[t].loaded=!0},CUSTOM_IMAGES_APPROVED[t]=!0,img_decors[t]=new Image,img_decors[t].src=r;for(const{model:e,src:n}of t)CACHED_DECORS[e].src=n,CACHED_DECORS[e].loaded=!0,img_decors[e].src=n;(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"Updated decors")}():setTimeout(n,50)}()}function main_updateOffsets(){let e=main_window.ThinkOfOffsetClass;main_window.ThinkOfOffsetClass=function(n,o){return"vehicle"==n&&null!=t[o.pm.model]||"decor"==n&&null!=t[o.pm.model]?"alei_"+o.pm.model:"gun"==n&&"gun_rl0"==o.pm.model?"alei_gun_rl0":e(n,o)};let t={veh_hh:{x:-15,y:-15,w:30,h:30},hakase:{x:-400,y:-400,w:800,h:800},text:{x:-56,y:-10,w:120,h:24},text2:{x:-60,y:-10,w:124,h:24},text3:{x:-50,y:-10,w:110,h:24},gun_rl0:{x:-24,y:-6,w:61,h:13}};for(let e in t){let n=t[e];offset_x["alei_"+e]=n.x,offset_y["alei_"+e]=n.y,offset_w["alei_"+e]=n.w,offset_h["alei_"+e]=n.h}}function main_updateTriggers(){addTrigger(175,"Gun &#8250; Change gun 'A' projectile model to 'B'","gun","ALEI_projectileModels"),addTrigger(378,"Gun &#8250; Add hex color 'B' to gun 'A'","gun","string"),addTrigger(332,"Var &#8250; Set variable 'A' to value 1 if Gun 'B' is in owner's active slot, set to value 0 in else case","string","gun"),addTrigger(305,"Gun &#8250; Set Gun 'A' holstered attachment to 'B' (0 = on leg, 1 = on back, 2 = on head)","gun","string"),mark_pairs.trigger_type_B137="nochange",tr_type_tags.Water="#7dd1d1",addTrigger(392,"Water &#8250; Move Water 'A' to Region 'B'","water","region"),addTrigger(395,"Water &#8250; Set water 'A' damage to string-value/variable 'B'","water","string"),addTrigger(409,"Water &#8250; Change water 'A' color to string-value/variable 'B'","water","string"),tr_type_tags.Experimental="#b579e1",addTrigger(422,"Experimental &#8250; Show message 'A' in chat said by Character 'B' (added by ALEI)","string","character"),addTrigger(423,"Experimental &#8250; Draw custom image of decoration 'A' to current graphic at top-left of region 'B' (added by ALEI)","decor","region"),addTrigger(424,"Experimental &#8250; Move region 'A' to lower body of Character slot-value variable 'B' (added by ALEI)","region","string"),special_values_table["gun+none"]=new Array,special_values_table["gun+none"][-1]="- No gun -",special_values_table["gun+none"]["[listof]"]="gun",mark_pairs.trigger_type_B312="gun+none",special_values_table["vehicle+none"]=new Array,special_values_table["vehicle+none"][-1]="- No vehicle -",special_values_table["vehicle+none"]["[listof]"]="vehicle",mark_pairs.trigger_type_B13="vehicle+none"}function main_updateObjects(){main_updateGuns(),main_updateVehicles(),main_updateDecors(),main_updateTriggers()}function main_addClipboardSync(){let e=new BroadcastChannel("ale_clipboard");e.onmessage=t=>{let n=t.data,o=n.kind;if("send"==o){let e=n.recipient,t=n.clip_name,o=n.clip_data;null!=e&&e!=main_aleiSessionID||((0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"/ale_clipboard/ got data for "+t),sessionStorage[t]=o)}if("get"==o){if(main_aleiSessionID>Math.min(...main_aleiSessionList))return;let t=n.session_id;(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"/ale_clipboard/ syncing to "+t);for(let n=0;n<=10;n++){let o="clipboard"+(0==n?"":"_slot"+(n-1)),r=sessionStorage[o];null!=r&&e.postMessage({kind:"send",recipient:t,clip_name:o,clip_data:r})}}},(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"/ale_clipboard/ requesting"),e.postMessage({kind:"get",session_id:main_aleiSessionID});let t=main_window.CopyToClipBoard;main_window.CopyToClipBoard=n=>{t(n);let o=sessionStorage[n];e.postMessage({kind:"send",clip_name:n,clip_data:o})}}async function main_addSessionSync(){let e=new BroadcastChannel("ale_session");e.onmessage=t=>{let n=t.data,o=n.kind;if("start"==o){if(null==main_aleiSessionID)return;e.postMessage({kind:"greet",id:main_aleiSessionID}),(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"/ale_session/ recieved start")}if("greet"==o){let e=n.id;main_aleiSessionList.includes(e)||main_aleiSessionList.push(e),(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"/ale_session/ received greet by "+e)}if("close"==o){let e=n.id;main_aleiSessionList.splice(main_aleiSessionList.indexOf(e),1),(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"/ale_session/ received close by "+e)}},e.postMessage({kind:"start"}),(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"/ale_session/ probing"),await new Promise((e=>{main_JS_setTimeout(e,200)})),main_aleiSessionID=0==main_aleiSessionList.length?0:Math.max(...main_aleiSessionList)+1,(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"/ale_session/ session ID "+main_aleiSessionID),main_window.addEventListener("beforeunload",(t=>{e.postMessage({kind:"close",id:main_aleiSessionID})})),main_addClipboardSync()}function main_addPropertyPanelResize(){let e=!1;const t=document.createElement("div"),n=document.documentElement;t.style.position="absolute",t.style.width="5px",t.style.top="50px",t.style.height="100%",t.style.cursor="w-resize",main_$id("floattag").appendChild(t),t.addEventListener("mousedown",(t=>{e=!0})),n.addEventListener("mouseup",(t=>{e=!1,(0,main_storage_storageutils_js_WEBPACK_IMPORTED_MODULE_29_.P)("ALEI_RightPanelWidth",right_panel.clientWidth+"px")})),n.addEventListener("mousemove",(o=>{e&&function(e){let o=Math.min(n.clientWidth-100,Math.max(100,n.clientWidth-e.clientX));right_panel.style.width=o+"px",t.style.right=o+"px",main_ROOT_ELEMENT.style.setProperty("--param_panel_size",t.style.right),main_updateBoxSplitterSize()}(o)})),t.style.right=main_storage_settings_js_WEBPACK_IMPORTED_MODULE_19_.F.rightPanelSize,main_ROOT_ELEMENT.style.setProperty("--param_panel_size",t.style.right),main_window.splitter=t}function main_addTriggerIDs(){if(!main_storage_settings_js_WEBPACK_IMPORTED_MODULE_19_.F.showTriggerIDs)return;let e=main_VAL_TABLE.trigger_type;for(let t in e)e[t]=t+" "+e[t]}function main_patchShowHideButton(){let e=main_window.ShowHideObjectBox;main_window.ShowHideObjectBox=function(){e();let t=main_$id("rparams"),n={true:270,false:155}[ObjectBox_visible];null!=t&&(n=Math.round(t.getBoundingClientRect().top+13)),document.documentElement.style.setProperty("--ALEI_RPARAMS_HEIGHT",`calc(100vh - ${n}px)`)},ShowHideObjectBox(),ShowHideObjectBox()}function main_tryToNumber(e){return isNaN(Number(e))?e:Number(e)}function main_insertXMLUserInput(){if(confirm("File (OK) or text (Cancel) ?")){let e=document.createElement("input");e.type="file",e.onchange=function(){if(e.files[0])if("xml"==e.files[0].name.split(".")[1]){let t=new FileReader;t.onload=function(){main_insertXML(t.result),e.remove()},t.readAsText(e.files[0])}else alert("Invalid file extension.")},e.click()}else{let e=prompt("Enter XML:","");null!==e&&main_insertXML(e)}}function main_insertXML(e){e="<map>"+e.replaceAll("&","[__Amp]")+"</map>";let t=(new DOMParser).parseFromString(e,"application/xml").querySelectorAll("*"),n=es.length;for(let e=1;e<t.length;e++){let n=t[e];if("map"==n.tagName)continue;let o=new E(n.tagName);o.pm={};for(let e=0;e<n.attributes.length;e++){let t=n.attributes[e].name,r=n.attributes[e].value;o.pm[t]=main_tryToNumber(r.replaceAll("[__Amp]","&"))}es.push(o)}(0,main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_.fd)(es.slice(n)),need_redraw=!0,need_GUIParams_update=!0}function main_exportXML(){let e="",t=document.createElement("a");if(es.some((e=>e.selected))){if(!confirm("Only selection will be exported."))return;for(let t=0;t<es.length;t++)es[t].selected&&(e+=compi_obj(t));mapid?t.download=mapid+" (selection).xml":t.download="newmap (selection).xml"}else{for(let t=0;t<es.length;t++)es[t].exists&&(e+=compi_obj(t));mapid?t.download=mapid+".xml":t.download="newmap.xml"}t.href="data:text,"+escape(e),""!=e?(t.href="data:text,"+escape(e),t.click()):alert("Map is empty."),t.remove()}function main_ImageContextMenu(e,t,n,o,r,a,i=!1,s="?",l="?",c=!1){if(main_window.last_element=r,main_window.last_login=s,n.preventDefault(),"list_native"===r.parentElement.id)return;const d=document.getElementById("image_context");d.style.left=n.clientX+"px",d.style.top=n.clientY+"px",d.style.display="block",image_context_cancel_pad.style.display="block",setTimeout((()=>{const e=d.getBoundingClientRect().height,t=n.clientY+e,o=main_window.innerHeight-10;t>o&&(d.style.top=o-e+"px")}),1);const _="rgba(0,0,0,0.3)";d.innerHTML="",a?d.insertAdjacentHTML("beforeend",`\n            <div data-action="approve">Approve <img src="../images/ap.png" class="appimg"></div>\n            <div data-action="reset approval">Reset approval status</div>\n            <div data-action="search author">Search for other approved images from &quot;${s}&quot;</div>\n            <div style="color:${_}">Last status change by ${l}</div>\n            <div data-action="disapprove unreviewed"\n                >Disapprove all unreviewed from &quot;${s}&quot; <\n                img src="../images/noap.png" class="noappimg"><\n                img src="../images/noap.png" class="noappimg"><\n                img src="../images/noap.png" class="noappimg"\n            ></div>\n            <div data-action="disapprove">Disapprove <img src="../images/noap.png" class="noappimg"></div>\n        `):s===curlogin&&"!"!==l?d.insertAdjacentHTML("beforeend",`\n                <div data-action="rename">Rename</div>\n                ${i?`<div data-action="request approval" style="color:${_}">Request Approval (already done)</div>`:"Untitled"===o?`<div data-action="request approval" style="color:${_}">Request Approval (proper name required)</div>`:'<div data-action="request approval">Request Approval <img src="../images/ap.png" class="appimg"></div>'}\n                ${i?'<div data-action="unrequest approval">Exclude from approval review queue</div>':`<div data-action="unrequest approval" style="color:${_}">Exclude from approval review queue (not in queue)</div>`}\n                <div data-action="delete">Delete <img src="../images/noap.png" class="noappimg"></div>\n            `):d.insertAdjacentHTML("beforeend",`\n                <div data-action="search author">Search for other approved images from &quot;${s}&quot;</div>\n            `),d.insertAdjacentHTML("beforeend",`\n        <span style="display:block;">&nbsp;</span>\n        ${c?'<div data-action="remove fav">Remove from favorites</div>':'<div data-action="add fav">Add to favorites</div>'}\n    `),"char"==last_for_class&&(a||s===curlogin&&"!"!==l)&&d.insertAdjacentHTML("beforeend",`\n            <span style="display:block;">&nbsp;</span>\n            <div data-action="set skin permission" data-value="1">${1==t?"&#9679;":"&#9676;"}&nbsp;&nbsp;Allowed in Custom Maps only</div>\n            <div data-action="set skin permission" data-value="2">${2==t?"&#9679;":"&#9676;"}&nbsp;&nbsp;Allowed in Custom Maps and by players</div>\n            <div data-action="set skin permission" data-value="3">${3==t?"&#9679;":"&#9676;"}&nbsp;&nbsp;Allowed in Custom Maps and by supporters</div>\n            <div data-action="set skin permission" data-value="4">${4==t?"&#9679;":"&#9676;"}&nbsp;&nbsp;Allowed by supporters only</div>\n        `),d.querySelector('[data-action="approve"]')?.addEventListener("click",(()=>{CloseImageContext(),ServerRequest(`a=get_images&for_class=${last_for_class}&approve_for=${e}`,"approve_image")})),d.querySelector('[data-action="reset approval"]')?.addEventListener("click",(()=>{CloseImageContext(),ServerRequest(`a=get_images&for_class=${last_for_class}&reset_status_for=${e}`,"reset_approval_image")})),d.querySelector('[data-action="search author"]')?.addEventListener("click",(()=>{CloseImageContext(),main_window[`open_approved_${last_for_class}`]=!0,SaveFiltering(),search_phrase="*by_login*"+s,UpdateImageList()})),d.querySelector('[data-action="disapprove unreviewed"]')?.addEventListener("click",(()=>{CloseImageContext(),ServerRequest(`a=get_images&for_class=${last_for_class}&disapprove_for_all=${s}`,"disapprove_image")})),d.querySelector('[data-action="disapprove"]')?.addEventListener("click",(()=>{CloseImageContext(),ServerRequest(`a=get_images&for_class=${last_for_class}&disapprove_for=${e}`,"disapprove_image")})),d.querySelector('[data-action="rename"]')?.addEventListener("click",(()=>{const t=prompt("New name:",o);CloseImageContext(),null!==t&&ServerRequest(`a=get_images&for_class=${last_for_class}&set_title_for=${e}&value=${t}`,"rename_image")})),d.querySelector('[data-action="request approval"]')?.addEventListener("click",(()=>{i||("Untitled"===o?alert("Proper name required for custom image - you will not be available to change name once image is approved."):(CloseImageContext(),ServerRequest(`a=get_images&for_class=${last_for_class}&await_approval_for=${e}`,"await_approval_status")))})),d.querySelector('[data-action="unrequest approval"]')?.addEventListener("click",(()=>{i&&(CloseImageContext(),ServerRequest(`a=get_images&for_class=${last_for_class}&deawait_approval_for=${e}`,"await_approval_status"))})),d.querySelector('[data-action="delete"]')?.addEventListener("click",(()=>{const t=confirm(`Are you sure you want to delete "${o}"?`);if(CloseImageContext(),t){r.style.opacity="0.5";const t=last_for_class;ServerRequest(`a=get_images&for_class=${last_for_class}&delete=${e}`,"delete_image",(function(){const n="c"+e;"char"===t&&(URL.revokeObjectURL(CACHED_CHARS[n]?.src),delete CACHED_CHARS[n]),delete CACHED_DECORS[n],delete CACHED_BGS[n]}))}})),d.querySelector('[data-action="remove fav"]')?.addEventListener("click",(()=>{CloseImageContext(),ServerRequest(`a=get_images&for_class=${last_for_class}&favorite_del=${e}`,"favorite_status")})),d.querySelector('[data-action="add fav"]')?.addEventListener("click",(()=>{CloseImageContext(),ServerRequest(`a=get_images&for_class=${last_for_class}&favorite_add=${e}`,"favorite_status")}));for(const t of d.querySelectorAll('[data-action="set skin permission"]'))t.addEventListener("click",(()=>{CloseImageContext(),ServerRequest(`a=get_images&for_class=${last_for_class}&is_skin_set_for=${e}&is_skin_set_to=${t.dataset.value}`,"is_skin_set")}));return!1}function main_findObjects(e){let t=confirm("Exact name?"),n=!0;for(let r=0;r<es.length;r++)es[r].selected=!1,es[r].pm.uid&&(o=es[r].pm.uid,(t?o==e:o.includes(e))&&MatchLayer(es[r])&&(es[r].selected=!0,n=!1));var o;return need_GUIParams_update=!0,need_redraw=!0,n}function main_rotateObjects(){let e,t,n=main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_.sf,o=[],r=[];for(let e=0;e<n.length;e++){if(n[e].pm.w&&n[e].pm.h){let t=n[e].pm.w;n[e].pm.w=n[e].pm.h,n[e].pm.h=t}o.push(n[e].pm.x),r.push(n[e].pm.y)}e=Math.min(...o),t=Math.min(...r);for(let a=0;a<n.length;a++)o[a]-=e,r[a]-=t,n[a].pm.x=e+r[a],n[a].pm.y=t+o[a]}function main_patchRandomizeName(){const e=main_window.RandomizeName;main_window.RandomizeName=function(t){if(main_storage_settings_js_WEBPACK_IMPORTED_MODULE_19_.F.orderedNaming){let e=new Set(es.filter((e=>e.exists)).map((e=>e.pm.uid))),n=t;if(!e.has(n))return n;t.includes("*")&&(n=t.slice(0,t.lastIndexOf("*")));let o=1;for(;e.has(`${n}*${o}`);)o++;return`${n}*${o}`}return e(t)}}function main_patchAllowedCharacters(){allowed_string_chars+="<>"}function main_getObjectBox(e){let t=0,n=0,o=e.pm.w,r=e.pm.h;return e._isresizable||(t=bbox_x[e._class],n=bbox_y[e._class],o=bbox_w[e._class],r=bbox_h[e._class]),["player","enemy"].includes(e._class)&&(t=-15,n=-81,o=30,r=80),"vehicle"==e._class&&(t=bbox_x["vehicle_"+e.pm.model],n=bbox_y["vehicle_"+e.pm.model],o=bbox_w["vehicle_"+e.pm.model],r=bbox_h["vehicle_"+e.pm.model],"veh_hh"==e.pm.model&&(t=offset_x.alei_veh_hh,n=offset_y.alei_veh_hh,o=offset_w.alei_veh_hh,r=offset_h.alei_veh_hh)),{x:t,y:n,w:o,h:r}}function main_getSelectionImage(){let e=main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_.sf,t=1/0,n=1/0,o=-1/0,r=-1/0;for(let a=0;a<e.length;a++){let i=main_getObjectBox(e[a]),s=e[a].pm.x+i.x,l=e[a].pm.y+i.y,c=i.w,d=i.h;s<t&&(t=s),s+c>o&&(o=s+c),l<n&&(n=l),l+d>r&&(r=l+d)}main_window.es=[];for(let t of e)es.push(t);THEME=4,GRID_ALPHA=0,SHOW_CONNECTIONS=!1,zoom=1,zoom_validate();let a=dis_to_x-dis_from_x,i=dis_to_y-dis_from_y;dis_from_x=t-10,dis_from_y=n-10,dis_to_x=t+a-10,dis_to_y=n+i-10,ConsoleTraceMessages=[],Render();let s=o-t+20,l=r-n+20;(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.VERBOSE,"Before GID");let c=ctx.getImageData(0,0,s,l);(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.VERBOSE,"After GID");let d=document.createElement("canvas"),_=d.getContext("2d"),u=document.createElement("canvas"),m=u.getContext("2d");d.width=s,d.height=l,_.beginPath(),_.putImageData(c,0,0),_.closePath();let g=s,p=l;if(s>100||l>100){let e=s/l;e>=1?(s=100,l=s/e):(l=100,s=l*e)}u.width=s,u.height=l,m.beginPath(),m.scale(s/g,l/p),m.drawImage(d,0,0),m.closePath();let b=u.toDataURL();return d.remove(),d=void 0,b}function main_createClipboardDiv(){let e=document.createElement("div"),t=document.getElementById("mrdimlights");e.id="clipboardDiv",e.className="mrpopup",e.style="width: calc(100% - 280px); height: 100%; margin: 0px; padding: 0px; top: 50%; transform: translate(0px, -50%); display: none;",e.addEventListener("contextmenu",(e=>{e.preventDefault()})),t.addEventListener("click",(t=>{e.style.display="none"})),document.body.append(e)}function main_clipboardItemAction(e){let t=JSON.parse(localStorage.clipboardItems);if(confirm("Rename (OK) or delete (Cancel) ?")){let n=prompt("Enter name:",t[e].name);n&&(t[e].name=n,localStorage.clipboardItems=JSON.stringify(t),main_updateClipboardDiv())}else confirm("Are you sure you want to delete?")&&(t.splice(e,1),localStorage.clipboardItems=JSON.stringify(t),main_updateClipboardDiv())}function main_registerClipboardItemAction(){main_window.clipboardItemAction=main_clipboardItemAction,(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"Registered Clipboard Item Action")}function main_updateClipboardDiv(){localStorage.clipboardItems||(localStorage.clipboardItems="[]");let e=JSON.parse(localStorage.clipboardItems),t=document.getElementById("clipboardDiv"),n=document.getElementById("mrdimlights");t.style.display="block",n.style.display="block";let o='\n        <div id="mrtitle">\n            <span>Object clipboard</span>\n            <closebox onclick="document.getElementById(\'clipboardDiv\').style.display = \'none\'; document.getElementById(\'mrdimlights\').style.display = \'none\';">x</closebox>\n        </div>\n\n        <div id="mrbox" class="objbox" style="height: calc(100% - 32px); box-sizing: border-box;">\n    ',r=main_window.es,a={};a.theme=THEME,a.grid_opacity=GRID_ALPHA,a.showConnections=SHOW_CONNECTIONS,a.dtx=dis_to_x,a.dty=dis_to_y,a.dfx=dis_from_x,a.dfy=dis_from_y,a.ctm=ConsoleTraceMessages,a.zoom=zoom,main_window.es=[];for(let t=0;t<e.length;t++)main_pasteObjectClipboard(e[t]),o+='\n            <div class="img_option" style="width: auto;" oncontextmenu="clipboardItemAction('+t+')" onclick="pasteFromPermanentClipboard('+t+');">\n                <img src="'+main_getSelectionImage()+'" style="max-width: 100px; max-height: 100px;">\n                <div>'+e[t].name+"</div>\n            </div>\n        ";t.innerHTML=o+"</div>",main_window.es=r,THEME=a.theme,GRID_ALPHA=a.grid_opacity,SHOW_CONNECTIONS=a.showConnections,dis_to_x=a.dtx,dis_to_y=a.dty,dis_from_x=a.dfx,dis_from_y=a.dfy,ConsoleTraceMessages=a.ctm,zoom=a.zoom,need_redraw=!0,zoom_validate()}function main_pasteObjectClipboard(e){sessionStorage.permanent_clipboard=e.data,main_PasteFromClipBoard("permanent_clipboard")}function main_pasteFromPermanentClipboard(e){let t=JSON.parse(localStorage.clipboardItems);sessionStorage.permanent_clipboard=t[e].data,main_PasteFromClipBoard("permanent_clipboard");let n=document.getElementById("clipboardDiv"),o=document.getElementById("mrdimlights");n.style.display="none",o.style.display="none",NewNote("Objects pasted from permanent clipboard.",note_passive)}function main_copyToPermanentClipboard(){try{if(0!=main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_.sf.length){CopyToClipBoard("permanent_clipboard");let e=JSON.parse(localStorage.clipboardItems);e.push({name:"Selection",data:sessionStorage.permanent_clipboard}),localStorage.clipboardItems=JSON.stringify(e),NewNote("Objects copied to permanent clipboard.",note_passive)}else main_updateClipboardDiv()}catch(e){console.error(e),NewNote("Can't copy objects to permanent clipboard.<br>LocalStorage error?",note_bad)}}function main_addPasteFromPermanentClipboard(){main_window.pasteFromPermanentClipboard=main_pasteFromPermanentClipboard}function main_changeTopRightText(){let e=document.getElementById("version_rights"),t=e.childNodes[0];e.style.width="170px",t.style.width="160px";let n="";main_isNative&&(n=" v"+GM_info.script.version),t.innerHTML=t.innerHTML.replaceAll("<br>"," ")+"<br>ALE Improvements"+n}function main_addTriggerActionCount(e,t=!0){const n=main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_.sf;if(1!=n.length||0===e)return;const o=n[0];if(o.pm.extended||!(e<0)){if(o.pm.extended||(o.pm.additionalActions=new Array,o.pm.additionalParamA=new Array,o.pm.additionalParamB=new Array,o.pm.totalNumOfActions=main_html5mode_js_WEBPACK_IMPORTED_MODULE_22_.Wx,o.pm.extended=!0,o.extendedAndParsed=!0,NewNote("Converted this to an extended trigger.",note_passive),NewNote(`Behind the scenes, this creates 1 trigger for every additional ${main_html5mode_js_WEBPACK_IMPORTED_MODULE_22_.Wx-1} trigger actions. Be mindful about your number of triggers.`,note_neutral)),o.pm.totalNumOfActions+=e,e<0){let t=[],n=[];const r=o.pm.additionalActions.length;for(let a=Math.max(0,r+e);a<r;a++){const e=a+(main_html5mode_js_WEBPACK_IMPORTED_MODULE_22_.Wx+1);t.push(`actions_${e}_type`),n.push(o.pm.additionalActions[a]),t.push(`actions_${e}_targetA`),n.push(o.pm.additionalParamA[a]),t.push(`actions_${e}_targetB`),n.push(o.pm.additionalParamB[a])}(0,main_entity_parametermap_js_WEBPACK_IMPORTED_MODULE_4_.mu)(o,t,n)}if(o.pm.totalNumOfActions<=main_html5mode_js_WEBPACK_IMPORTED_MODULE_22_.Wx||isNaN(o.pm.totalNumOfActions)?(delete o.pm.additionalActions,delete o.pm.additionalParamA,delete o.pm.additionalParamB,delete o.pm.totalNumOfActions,delete o.pm.extended):e>0?(o.pm.additionalActions.push(...Array(e).fill(-1)),o.pm.additionalParamA.push(...Array(e).fill(0)),o.pm.additionalParamB.push(...Array(e).fill(0))):(o.pm.additionalActions.length+=e,o.pm.additionalParamA.length+=e,o.pm.additionalParamB.length+=e),e<0&&(0,main_ocm_ocm_js_WEBPACK_IMPORTED_MODULE_18_.Rd)(o),UpdateGUIParams(),t){let e=document.getElementById("rparams");e.scrollTop=e.scrollHeight}}}function main_getImageSize(){let e,t=main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_.sf;if("bg"==t[0]._class&&(e=t[0].pm.m),"decor"==t[0]._class&&(e=t[0].pm.model),"string"==typeof e){let t=document.createElement("img");t.onload=function(){let e=t.width,n=t.height;t.remove(),alert("W: "+e+"\nH: "+n)},t.onerror=function(){t.remove(),alert("Image not found.")},t.src="https://www.plazmaburst2.com/mimage_cache.php?image_id="+e.slice(1)}else alert("Image not found.")}function main_getImageData(){return new Promise(((e,t)=>{let n,o=main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_.sf;if("bg"==o[0]._class&&(n=o[0].pm.m),"decor"==o[0]._class&&(n=o[0].pm.model),"string"==typeof n){let t=document.createElement("img");t.onload=function(){let n=t.width,o=t.height,r=document.createElement("canvas"),a=r.getContext("2d");r.width=t.width,r.height=t.height,a.beginPath(),a.drawImage(t,0,0),a.closePath(),e([a.getImageData(0,0,n,o).data,n])},t.onerror=function(){t.remove(),alert("Image not found."),e(1)},t.src="https://www.plazmaburst2.com/mimage_cache.php?image_id="+n.slice(1)}else alert("Image not found."),e(1)}))}function main_getImagePosition(e,t){let n,o,r,a,i=[],s=[],l=0,c=0;if(1!=e){for(let n=0;n<e.length;n+=4)if(e[n+3]>=3){let e=n/4%t,o=Math.floor(n/4/t);i.push(e),s.push(o)}n=Math.min(...i),o=Math.min(...s),r=Math.max(...i),a=Math.max(...s),l=(n+r)/2,c=(o+a)/2}return{x:l,y:c}}function main_setDecorOffset(e,t){let n=main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_.sf;n[0].pm.u=e,n[0].pm.v=t}function main_centerImageX(){let e=main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_.sf;1==e.length&&"decor"==e[0]._class&&main_getImageData().then((t=>{1!=t&&main_setDecorOffset(-main_getImagePosition(t[0],t[1]).x,e[0].pm.v)})),need_redraw=!0,need_GUIParams_update=!0}function main_centerImageY(){let e=main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_.sf;1==e.length&&"decor"==e[0]._class&&main_getImageData().then((t=>{if(1!=t){let n=main_getImagePosition(t[0],t[1]).y;main_setDecorOffset(e[0].pm.u,-n)}})),need_redraw=!0,need_GUIParams_update=!0}function main_addFunctionToWindow(){main_window.getImageSize=main_getImageSize,main_window.centerImageX=main_centerImageX,main_window.centerImageY=main_centerImageY,main_window.addTriggerActionCount=main_addTriggerActionCount}let main_targetElement;function main_doTooltip(){let e=document.createElement("p");e.id="alei-tooltip",document.body.append(e),document.addEventListener("mousemove",(t=>{t.target.title&&(t.target.dataset.title=t.target.title,t.target.title=""),t.target.parentElement.title&&(t.target.parentElement.dataset.title=t.target.parentElement.title,t.target.parentElement.title="");let n=150;if(t.target.dataset.title){let o=t.target.dataset.title.length;e.style.left=o+n+t.clientX+20+"px",e.innerHTML=t.target.dataset.title,31!=e.getBoundingClientRect().height&&(e.style.left=o+n+t.clientX-20-e.getBoundingClientRect().width+"px")}else if(t.target.parentElement.dataset.title){let o=t.target.parentElement.dataset.title.length;e.style.left=o+n+t.clientX+20+"px",e.style.top=t.clientY+"px",e.innerHTML=t.target.parentElement.dataset.title,31!=e.getBoundingClientRect().height&&(e.style.left=o+n+t.clientX-20-e.getBoundingClientRect().width+"px")}else e.style.left="50px",e.style.top="-100px"})),(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"Added tooltip.")}function main_handleMultipleImages(e){for(let t of e)handleImage({target:{files:[t]}})}function main_patchDecorUpload(){let e=main_$id("imageLoader");e.setAttribute("multiple",!0),e.removeEventListener("change",handleImage),e.addEventListener("change",(function(e){let t=e.target.files;NewNote(`ALEI: Will upload ${t.length} bg/decor(s).`,"#2595FF"),main_handleMultipleImages(t)}),!1)}function main_patchMrCustomImage(){let e=main_$id("mrcustom_image");e.ondragover=function(e){e.preventDefault()},e.ondragleave=function(t){e.className="mrpopup"},e.ondrop=function(e){e.preventDefault(),main_handleMultipleImages(e.dataTransfer.files)}}function main_updateBoxSplitterSize(){let e=main_$id("gui_objbox").getBoundingClientRect(),t=splitter2.style;t.setProperty("width",e.width),t.setProperty("left",e.x),t.setProperty("top",e.bottom)}function main_addObjBoxResize(){let e=main_$id("gui_objbox"),t=document.createElement("div");main_window.splitter2=t;let n=t.style;main_$id("floattag").appendChild(t),n.setProperty("position","absolute"),n.setProperty("height","5px"),n.setProperty("cursor","s-resize"),main_updateBoxSplitterSize();let o=!1;t.onmousedown=e=>{o=!0},main_ROOT_ELEMENT.addEventListener("mouseup",(e=>{o=!1})),main_ROOT_ELEMENT.addEventListener("mousemove",(t=>{if(!o)return;let n=t.clientY-90;e.style.height=n,main_updateBoxSplitterSize(),ShowHideObjectBox(),ShowHideObjectBox()})),(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"Added splitter for object box.")}function main_patch_m_down(){let oldCode=m_down.toString(),newCode=oldCode.replace(/if\s*\(\s*(['"`])x\1\s*in\s+newbie.pm\s*\)\s*\{(?<indent>\s*)/,"if ('x' in newbie.pm) {$<indent>ACTION_add_undo('es['+newid+'].selected=false;');$<indent>");oldCode===newCode&&(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.WARN,"m_down direct code replacement failed (selected fix)");let og_mdown=eval("("+newCode+")");main_window.m_down=function(e){let t=es.length;og_mdown(e),es.length>t&&((0,main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_.fd)(es.slice(t)),main_window.need_GUIParams_update=!0,UpdateGUIObjectsList())}}function main_patch_m_move(){main_window.m_move=function(e){if(null!=e&&m_update(e),m_mistake_drag)(Math.abs(mouse_x-m_drag_x)>.5*GRID_SNAPPING||Math.abs(mouse_y-m_drag_y)>.5*GRID_SNAPPING)&&(m_mistake_drag=!1);else{var t,n;if(m_drag_screen&&(t=s2w_w(m_drag_x-mouse_x),n=s2w_h(m_drag_y-mouse_y),m_drag_x=mouse_x,m_drag_y=mouse_y,dis_from_x+=t,dis_to_x+=t,dis_from_y+=n,dis_to_y+=n),m_drag_selected&&(t=Math.round((mouse_wx-m_drag_wx)/GRID_SNAPPING)*GRID_SNAPPING,n=Math.round((mouse_wy-m_drag_wy)/GRID_SNAPPING)*GRID_SNAPPING,0!==t||0!==n)){for(var o=0;o<es.length;o++)es[o].exists&&(MatchLayer(es[o])||paint_draw_mode)&&es[o].selected&&es[o]._isphysical&&(es[o].pm.x+=t,es[o].pm.y+=n,main_storage_settings_js_WEBPACK_IMPORTED_MODULE_19_.F.renderSpawnAreas&&main_spawn_areas_js_WEBPACK_IMPORTED_MODULE_26_.Ly.has(es[o]._class)&&main_spawn_areas_js_WEBPACK_IMPORTED_MODULE_26_.lA(),"box"===es[o]._class&&main_wall_textures_wall_textures_js_WEBPACK_IMPORTED_MODULE_21_.BC());m_drag_wx+=t,m_drag_wy+=n}if(m_drag_resize&&(t=Math.round((mouse_wx-m_drag_wx)/GRID_SNAPPING)*GRID_SNAPPING,n=Math.round((mouse_wy-m_drag_wy)/GRID_SNAPPING)*GRID_SNAPPING,0!==t||0!==n)){for(o=0;o<es.length;o++)es[o].exists&&(MatchLayer(es[o])||paint_draw_mode)&&es[o].selected&&es[o]._isphysical&&es[o]._isresizable&&("LT"!=m_drag_moveresize&&"L"!=m_drag_moveresize&&"LB"!=m_drag_moveresize||(es[o].pm.x+=t,es[o].pm.w-=t),"RT"!=m_drag_moveresize&&"R"!=m_drag_moveresize&&"RB"!=m_drag_moveresize||(es[o].pm.w+=t),"LT"!=m_drag_moveresize&&"T"!=m_drag_moveresize&&"RT"!=m_drag_moveresize||(es[o].pm.y+=n,es[o].pm.h-=n),"LB"!=m_drag_moveresize&&"B"!=m_drag_moveresize&&"RB"!=m_drag_moveresize||(es[o].pm.h+=n),es[o].fixPos(),main_storage_settings_js_WEBPACK_IMPORTED_MODULE_19_.F.renderSpawnAreas&&main_spawn_areas_js_WEBPACK_IMPORTED_MODULE_26_.Ly.has(es[o]._class)&&main_spawn_areas_js_WEBPACK_IMPORTED_MODULE_26_.lA(),"box"===es[o]._class&&main_wall_textures_wall_textures_js_WEBPACK_IMPORTED_MODULE_21_.BC());m_drag_wx+=t,m_drag_wy+=n}}need_redraw=!0,UpdateOpacities()}}function main_PasteFromClipBoard(e){var t=new Object;if(null==sessionStorage[e])return!1;t=unserialize(sessionStorage[e]),ACTION_cancel();for(let e=0;e<es.length;e++)es[e].exists&&es[e].selected&&(ACTION_add_redo("es["+e+"].selected=false;"),ACTION_add_undo("es["+e+"].selected=true;"),es[e].selected=!1);var n=0,o=0,r=0,a=0;let i=0;for(var s=es.length;void 0!==t[i];){var l=es.length;ACTION_add_redo("es["+l+"].selected=true;"),ACTION_add_undo("es["+l+"].selected=false;"),ACTION_add_redo("es["+l+"].exists=true;"),ACTION_add_undo("es["+l+"].exists=false;"),es[l]=new E(t[i]._class);for(let e in t[i])es[l][e]=t[i][e];void 0!==es[l].pm.x&&void 0!==es[l].pm.y&&(0==i?(n=es[l].pm.x,r=es[l].pm.y,o=es[l].pm.x,a=es[l].pm.y,void 0!==es[l].pm.w&&void 0!==es[l].pm.h&&(n+=es[l].pm.w/2,o+=es[l].pm.w/2,r+=es[l].pm.h/2,a+=es[l].pm.h/2)):(n=Math.min(n,es[l].pm.x),r=Math.min(r,es[l].pm.y),o=Math.max(o,es[l].pm.x),a=Math.max(a,es[l].pm.y),void 0!==es[l].pm.w&&void 0!==es[l].pm.h&&(o=Math.max(o,es[l].pm.x+es[l].pm.w),a=Math.max(a,es[l].pm.y+es[l].pm.h)))),i++}ACTION_add_redo("m_drag_selected=true;"),ACTION_add_redo("paint_draw_mode=true;"),ACTION_add_redo("quick_pick_ignore_one_click=true;"),ACTION_add_undo("m_drag_selected=false;"),ACTION_add_undo("paint_draw_mode=false;"),ACTION_add_undo("quick_pick_ignore_one_click=false;"),m_drag_selected=!0,paint_draw_mode=!0,quick_pick_ignore_one_click=!0,m_drag_wx=mouse_wx,m_drag_wy=mouse_wy;let c=mouse_wx,d=mouse_wy;m_drag_x=mouse_x,m_drag_y=mouse_y;let _=c,u=d;var m=Math.round(c/GRID_SNAPPING)*GRID_SNAPPING,g=Math.round(d/GRID_SNAPPING)*GRID_SNAPPING,p=Math.round((m-(n+o)/2)/GRID_SNAPPING)*GRID_SNAPPING,b=Math.round((g-(r+a)/2)/GRID_SNAPPING)*GRID_SNAPPING;for(let e=s;e<es.length;e++){if(void 0!==es[e].pm.uid){var h=es[e].pm.uid;es[e].exists=!1,es[e].pm.uid=RandomizeName(es[e].pm.uid),es[e].exists=!0;for(let t=s;t<es.length;t++){const n=es[e].pm.uid;for(const e in es[t].pm)"uid"!=e&&"object"!=typeof es[t].pm[e]&&(es[t].pm[e]=(0,main_entity_parameterutils_js_WEBPACK_IMPORTED_MODULE_31_.tO)(es[t].pm[e],h,n));if(es[t].pm.extended&&main_window.ExtendedTriggersLoaded)for(let e=0;e<es[t].pm.additionalActions.length;e++)es[t].pm.additionalParamA[e]=(0,main_entity_parameterutils_js_WEBPACK_IMPORTED_MODULE_31_.tO)(es[t].pm.additionalParamA[e],h,n),es[t].pm.additionalParamB[e]=(0,main_entity_parameterutils_js_WEBPACK_IMPORTED_MODULE_31_.tO)(es[t].pm.additionalParamB[e],h,n)}}void 0!==es[e].pm.x&&void 0!==es[e].pm.y&&(ACTION_add_undo("es["+e+"].pm.x="+es[e].pm.x+";"),ACTION_add_undo("es["+e+"].pm.y="+es[e].pm.y+";"),es[e].pm.x+=p,es[e].pm.y+=b,es[e].fixPos(),ACTION_add_redo("es["+e+"].pm.x="+es[e].pm.x+";"),ACTION_add_redo("es["+e+"].pm.y="+es[e].pm.y+";"))}(0,main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_.fd)(es.slice(s)),m=Math.round((c-_)/GRID_SNAPPING)*GRID_SNAPPING,g=Math.round((d-u)/GRID_SNAPPING)*GRID_SNAPPING;for(let e=0;e<es.length;e++)es[e]._isphysical&&es[e].exists&&es[e].selected&&(MatchLayer(es[e])||paint_draw_mode)&&(es[e].pm.x+=m,es[e].pm.y+=g);return _+=m,u+=g,ACTION_finalize(!1),(0,main_entity_parameter_js_WEBPACK_IMPORTED_MODULE_3_.xP)(),(0,main_entity_parameter_js_WEBPACK_IMPORTED_MODULE_3_.H8)(),main_window.need_redraw=!0,main_window.need_GUIParams_update=!0,!0}function main_decodeUnicode(e){return"string"!=typeof e?e:e.replaceAll(/\\u([a-zA-Z0-9]{4})/g,((e,t)=>String.fromCharCode(parseInt(t,16))))}function main_ServerRequest_handleMapData(e){(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"Parsing map source now.");const t=/(\w+)=((-?\d+(\.\d+)?)|("[ -~]*")|true|false)/,n=/q=es\[\d+\]=new E\("(\w+)"\)/;let o=e.split(";\n"),r=null;main_window.es=new Array;let a=2;for(;a<o.length;a++){let e=o[a];if(0==e.replaceAll("\n","").replaceAll("\t","").length)continue;if(-1!=e.indexOf("mapid = '")){main_window.mapid=e.split(" = ")[1].slice(1,-1),mapid_field.value=mapid;continue}if("\t\tmapid_field.value = mapid"==e)continue;if(-1!=e.indexOf("maprights.innerHTML='")){let t=e.split(";")[0].split(".innerHTML=")[1].slice(1,-1);maprights.value=t,NewNote(`Map '${mapid}' has been successfully loaded.`,note_good);continue}if(-1!=e.indexOf(";q=q.pm;")){let t=n.exec(e);r=new E(t[1]),es[es.length]=r;let o=e.split(";");if(o.length>3){(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.WARN,`Expected 3 items, got ${o.length} - ${o}`);continue}e=o[2]}let i=t.exec(e);if(null===i){(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.WARN,`Unable to figure out what kind of code is "${e}", you MIGHT have issues.`);continue}let s=i[1],l=i[2].replaceAll("\\/","/");l='"'!=l[0]?"true"==l||"false"!=l&&(-1!=l.indexOf(".")?parseFloat(l):parseInt(l)):l.slice(1,-1).replaceAll("\\'","'"),r.pm[s]=main_decodeUnicode(l)}main_storage_settings_js_WEBPACK_IMPORTED_MODULE_19_.F.extendedTriggers&&(0,main_extended_triggers_parse_ext_js_WEBPACK_IMPORTED_MODULE_27_.j)()}function main_handleServerRequestResponse(e,t,n){let o;if(-1!=n.indexOf("var es = new Array();")){(0,main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_.XV)();try{main_ServerRequest_handleMapData(n)}catch(e){NewNote("ALEI: Failed to load map",note_bad),console.error(e)}main_sortEntitiesBetter(),(0,main_aleimapdata_aleimapdata_js_WEBPACK_IMPORTED_MODULE_0_.Or)(),(0,main_aleimapdata_aleimapdata_js_WEBPACK_IMPORTED_MODULE_0_.zj)(),(0,main_entity_uidmap_js_WEBPACK_IMPORTED_MODULE_5_.V4)(),(0,main_entity_parametermap_js_WEBPACK_IMPORTED_MODULE_4_.Ac)(),main_storage_settings_js_WEBPACK_IMPORTED_MODULE_19_.F.ocmEnabled&&(0,main_ocm_ocm_js_WEBPACK_IMPORTED_MODULE_18_.yb)(),main_storage_settings_js_WEBPACK_IMPORTED_MODULE_19_.F.renderSpawnAreas&&main_spawn_areas_js_WEBPACK_IMPORTED_MODULE_26_.lA()}else if(-1!==n.indexOf("knownmaps = [")){main_window.knownmaps=[];for(let e of n.match(/"(.*?)"/g))knownmaps.push(e.slice(1,-1));(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,`Updated knownmaps with ${knownmaps.length} maps`)}else if(n.startsWith('console.warn("Only custom images can be requested in this way')){const e=n.match(/\\"(.*?)\\" requested\."\);/s);console.warn(`Only custom images can be requested in this way, but "${e?.[1]}" requested.`)}else{(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.VERBOSE,`Evaling for request ${main_log_js_WEBPACK_IMPORTED_MODULE_23_.Dk}"${e}"${main_log_js_WEBPACK_IMPORTED_MODULE_23_.Sj} with operation of ${main_log_js_WEBPACK_IMPORTED_MODULE_23_.Dk}"${t}"${main_log_js_WEBPACK_IMPORTED_MODULE_23_.Sj}: ${n}`);try{o=main_JS_eval(n)}catch(o){NewNote("Eval error!",note_bad),console.error(o),(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.INFO,`Eval Error from ${e}, for op ${t} whose response is ${n}`)}}return o}function main_makeRequest(e,t,n){return new Promise((function(o,r){let a=new XMLHttpRequest;a.open(e,t),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onload=function(){this.status>=200&&this.status<300?o({status:200,response:a.response}):r({status:this.status,statusText:a.statusText})},a.onerror=function(){r({status:this.status,statusText:a.statusText})},a.send(n)}))}function main_updateDecorList(){try{let e=main_$id("list_native");for(const{model:t,name:n,src1:o}of ALEI_decors)e.innerHTML+=`\n                    <div class="img_option" onClick="CustomImageSelected('${t}', '${n}' )">\n                       <div class="imgdiv" style="background:url(${o})"></div>\n                       <div>\n                         ${n}\n                       </div>\n                    </div>\n                    `;(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"Updated decor list.")}catch(e){}}async function main_updateCharList(){const e=document.getElementById("list_native");if(null===e)return;let t="";for(const{id:e,name:n}of main_allChars){const o=n.replaceAll("'","\\'");t+=`\n            <div \n                class="img_option"\n                onclick="CustomImageSelected('${e}', '${o}' )"\n                oncontextmenu="ImageContext(${e},0,event,'${o}',this,false,true,'Eric Gurt','-')"\n            >\n                <div class="skindiv" style="background:url(chars_full/char${e.toString().padStart(4,"0")}.png)"></div>\n                <div>${n}</div>\n            </div>\n        `}e.innerHTML=t;const n=[document.getElementById("list_favorites"),document.getElementById("list_approved"),document.getElementById("list_personal_approved"),document.getElementById("list_personal")];for(const e of n)for(const t of e.getElementsByClassName("custom_skin_div")){const e=t.firstElementChild.style.backgroundImage.slice(-7,-2);t.dataset.charId=e,t.innerHTML="",(0,main_skin_preview_js_WEBPACK_IMPORTED_MODULE_25_.b)(e).then((e=>{t.innerHTML=`<div style="background-image:url(${e.src}); background-position: 0% 50%; background-size: 130%;"></div>`}))}}async function main_ALEI_ServerRequest(e,t,n=null){let o=await main_makeRequest("POST",`e_server.php?a=${request_a}`,e);if(200==o.status){try{main_handleServerRequestResponse(e,t,o.response),"update_images"===t&&("decor_model"===main_window.last_for_class?main_updateDecorList():"char"===main_window.last_for_class&&main_updateCharList(),main_window.ImageContext=main_ImageContextMenu),"save"!=t&&"load"!=t||(changes_made=!1,"load"==t&&(need_redraw=!0,need_GUIParams_update=!0,ClearUndos()))}catch(e){console.error(e),NewNote("Server responds with unclear message. Looks like one of recent actions wasn't successful.",note_bad)}null!=n&&n()}else"save"==t?NewNote("Oops! Error occoured during saving. Usually it may be happening due to connection problems. Map will be temporary saved to your computer's LocalStorage",note_bad):"load"==t&&NewNote("Oops! Error occoured durning loading. Usually it may be happening due to connection problems.",note_bad)}document.addEventListener("mousedown",(e=>{main_targetElement=e.target})),document.addEventListener("keydown",(e=>{if(!letediting&&!ignore_keys){if(e.ctrlKey&&"KeyA"==e.code&&!["TEXTAREA","INPUT"].includes(e.target.nodeName)&&(main_window.es.forEach((e=>{e.exists&&e._isphysical&&MatchLayer(e)&&(e.selected=!0)})),main_window.need_redraw=!0,main_window.need_GUIParams_update=!0),e.ctrlKey&&"KeyS"==e.code&&canvas_focus&&(e.preventDefault(),document.getElementsByClassName("field_btn")[0].click()),e.ctrlKey&&"KeyF"==e.code&&canvas_focus){e.preventDefault();let t=prompt("Find objects:","");null!==t&&""!==t&&main_findObjects(t)&&alert("Nothing found.")}if("KeyR"==e.code&&"[object HTMLInputElement]"!=main_targetElement&&"opcode_field"!=main_targetElement.id&&main_rotateObjects(),("Minus"==e.code||"NumpadSubtract"==e.code)&&e.ctrlKey&&canvas_focus&&(e.preventDefault(),zoom*=2,zoom_validate(),need_redraw=!0),("Equal"==e.code||"NumpadAdd"==e.code)&&e.ctrlKey&&canvas_focus&&(e.preventDefault(),zoom*=.5,zoom_validate(),need_redraw=!0),e.ctrlKey&&e.altKey&&(e.preventDefault(),zoom=1,zoom_validate(),need_redraw=!0),"KeyH"==e.code&&e.ctrlKey&&(e.preventDefault(),"opcode_field"===main_targetElement.id)){let e=main_targetElement.value,t=prompt("Enter string to replace from:","");if(!t)return;let n=prompt("Enter string to replace to:",t);if(!n)return;main_targetElement.value=e.replaceAll(t,n)}if("Enter"==e.code&&"[object HTMLInputElement]"!=main_targetElement&&"opcode_field"!=main_targetElement.id&&canvas_focus){let e=main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_.sf;if(0!=e.length){let t=prompt("Enter parameter name:","");if(t){let n=prompt("Enter expression:","");if(n){t=t.toLowerCase().replace("width","w").replace("height","h");for(let o=0;o<e.length;o++){let r=e[o].pm.x,a=e[o].pm.y,i=e[o].pm.w,s=e[o].pm.h;if(void 0===r&&(r=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0!==e[o].pm[t]){let l=(0,main_alescript_js_WEBPACK_IMPORTED_MODULE_30_.q)(n,[r,a,i,s,o]);if("number"==typeof l){for(let t=0;t<e.length;t++)e[t].selected=!1;e[o].selected=!0,UpdatePhysicalParam(t,l)}for(let t=0;t<e.length;t++)e[t].selected=!0}}need_GUIParams_update=!0}}}}if(e.altKey&&e.preventDefault(),e.altKey&&"[object HTMLInputElement]"==main_targetElement){let e=main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_.sf;if(1==e.length){let t=e[0].pm.x,n=e[0].pm.y,o=e[0].pm.w,r=e[0].pm.h;void 0===t&&(t=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0);let a=(0,main_alescript_js_WEBPACK_IMPORTED_MODULE_30_.q)(main_targetElement.value,[t,n,o,r,i]);"number"==typeof a&&(main_targetElement.value=a)}}e.ctrlKey&&"KeyP"==e.code&&(e.preventDefault(),main_copyToPermanentClipboard())}}));let main_serverRequestPatched=!1;function main_patchServerRequest(){main_serverRequestPatched||(main_serverRequestPatched=!0,main_window.ServerRequest=main_ALEI_ServerRequest,function e(){0===Object.keys(main_window.same_request_blocking).length?(main_window.eval=main_JS_eval,(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"Unpatched eval")):setTimeout(e,50)}(),(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"Patched ServerRequest"))}function main_patchEvalSet(){main_window.EvalSet=function(e,t){main_window[e]=t,UpdateTools()},(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"Patched EvalSet")}function main_patchTeamList(){for(let e of Object.entries(main_VAL_TABLE.team)){let t=parseInt(e[0]),n=e[1];t<0&&(n=n.replace("(no friendly fire)","(No collision, Yes friendly fire)"),main_VAL_TABLE.team[t]=n),-1!==t&&(main_VAL_TABLE["team+any"][t]=n)}(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"Edited team list..")}function main_addProjectileModels(){let e=main_VAL_TABLE.ALEI_projectileModels={1:"https://static.miraheze.org/plazmaburstwiki/6/6a/Lazer_1.png",2:"https://static.miraheze.org/plazmaburstwiki/a/ae/Lazer_2.png",3:"https://static.miraheze.org/plazmaburstwiki/0/06/Lazer_3.png",4:"https://static.miraheze.org/plazmaburstwiki/d/de/Lazer_4.png",5:"https://static.miraheze.org/plazmaburstwiki/8/8f/Lazer_5.png",6:"https://static.miraheze.org/plazmaburstwiki/a/a0/Lazer_6.png",7:"https://static.miraheze.org/plazmaburstwiki/7/71/Lazer_7.png",8:"https://static.miraheze.org/plazmaburstwiki/c/c6/Lazer_8.png",9:"https://static.miraheze.org/plazmaburstwiki/d/d2/Lazer_9.png",10:"https://static.miraheze.org/plazmaburstwiki/5/5b/Lazer_10.png",11:"https://static.miraheze.org/plazmaburstwiki/d/d2/Lazer_11.png",12:"https://static.miraheze.org/plazmaburstwiki/2/2d/Lazer_12.png",13:"https://static.miraheze.org/plazmaburstwiki/b/be/Lazer_13.png",14:"https://static.miraheze.org/plazmaburstwiki/1/14/Lazer_14.png",15:"",16:"https://static.miraheze.org/plazmaburstwiki/7/7f/Lazer_16.png",17:"https://static.miraheze.org/plazmaburstwiki/3/31/Lazer_17.png",18:"https://static.miraheze.org/plazmaburstwiki/8/89/Lazer_18.png",19:"https://static.miraheze.org/plazmaburstwiki/f/fe/Lazer_19.png",20:"https://static.miraheze.org/plazmaburstwiki/1/1a/Lazer_20.png",21:"https://static.miraheze.org/plazmaburstwiki/4/42/Lazer_21.png",22:"https://static.miraheze.org/plazmaburstwiki/c/c0/Lazer_22.png",23:"https://static.miraheze.org/plazmaburstwiki/d/d9/Lazer_23.png",24:"https://static.miraheze.org/plazmaburstwiki/f/f5/Lazer_24.png",25:"https://static.miraheze.org/plazmaburstwiki/7/7c/Lazer_25.png",26:"https://static.miraheze.org/plazmaburstwiki/a/a7/Lazer_26.png",27:"https://static.miraheze.org/plazmaburstwiki/3/30/Lazer_27.png",28:"https://static.miraheze.org/plazmaburstwiki/3/3a/Lazer_28.png",29:"https://static.miraheze.org/plazmaburstwiki/9/90/Lazer_29.png",30:"https://static.miraheze.org/plazmaburstwiki/2/23/Lazer_30.png",31:"https://static.miraheze.org/plazmaburstwiki/3/3a/Lazer_31.png",32:"https://static.miraheze.org/plazmaburstwiki/f/f0/Lazer_32.png",33:"https://static.miraheze.org/plazmaburstwiki/0/0d/Lazer_33.png",34:"https://static.miraheze.org/plazmaburstwiki/c/c8/Lazer_34.png",35:"https://static.miraheze.org/plazmaburstwiki/3/38/Lazer_35.png",36:"https://static.miraheze.org/plazmaburstwiki/6/6d/Lazer_36.png",37:"https://static.miraheze.org/plazmaburstwiki/a/a9/Lazer_37.png",38:"https://static.miraheze.org/plazmaburstwiki/e/e7/Lazer_38.png",39:"https://static.miraheze.org/plazmaburstwiki/6/6c/Lazer_39.png",40:"https://static.miraheze.org/plazmaburstwiki/d/d4/Lazer_40.png",41:"https://static.miraheze.org/plazmaburstwiki/5/5d/Lazer_41.png",42:"https://static.miraheze.org/plazmaburstwiki/9/9d/Lazer_42.png",43:"https://static.miraheze.org/plazmaburstwiki/7/79/Lazer_43.png",44:"https://static.miraheze.org/plazmaburstwiki/6/6d/Lazer_44.png",45:"https://static.miraheze.org/plazmaburstwiki/4/44/Lazer_45.png",46:"https://static.miraheze.org/plazmaburstwiki/3/3b/Lazer_46.png",47:"https://static.miraheze.org/plazmaburstwiki/8/84/Lazer_47.png",48:"https://static.miraheze.org/plazmaburstwiki/7/75/Lazer_48.png",49:"https://static.miraheze.org/plazmaburstwiki/0/08/Lazer_49.png",50:"https://static.miraheze.org/plazmaburstwiki/4/41/Lazer_50.png",51:"https://static.miraheze.org/plazmaburstwiki/9/92/Lazer_51.png",52:"https://static.miraheze.org/plazmaburstwiki/9/92/Lazer_52.png",53:"https://static.miraheze.org/plazmaburstwiki/7/70/Lazer_53.png",54:"https://static.miraheze.org/plazmaburstwiki/e/ee/Lazer_54.png",55:"https://static.miraheze.org/plazmaburstwiki/d/d1/Lazer_55.png"};for(let t=1;t<56;t++)e[t]=`<img src='${e[t]}' style='width: 60px; height: 20px'/>`;(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"Loaded projectile models.")}function main_patchSpecialValue(){{const oldCode=main_window.special_value.toString(),newCode=oldCode.replace("case 'door+none':","case 'door+none': case 'gun+none':");newCode===oldCode?(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.WARN,"special_value direct code replacement failed (gun+none)"):main_window.special_value=eval(`(${newCode})`)}{const oldCode=main_window.special_value.toString(),newCode=oldCode.replace("case 'door+none':","case 'door+none': case 'vehicle+none':");newCode===oldCode?(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.WARN,"special_value direct code replacement failed (vehicle+none"):main_window.special_value=eval(`(${newCode})`)}let _OG=main_window.special_value;main_window.special_value=(e,t)=>{if(-1!==["ALEI_projectileModels"].indexOf(e)){let n=main_VAL_TABLE[e][t];return void 0===n?ERROR_VALUE:n}return"trigger+none"==e?-1==t?main_VAL_TABLE["trigger+none"][-1]:special_value("trigger",t):"timer+none"==e?-1==t?main_VAL_TABLE["timer+none"][-1]:special_value("timer",t):_OG(e,t)},(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"Patched SpecialValue")}function main_ALEI_DoWorldScale(){var e=prompt("Multiply selection size by % (percents)",100);if(null!=e&&100!=e){var t=Math.floor(e)/100;{let o="/GRID_SNAPPING)*GRID_SNAPPING;";var n=!0;ACTION_cancel();for(let e=0;e<es.length;e++)es[e].exists&&es[e].selected&&MatchLayer(es[e])&&(null!=es[e].pm.w&&(ACTION_add_redo("es["+e+"].pm.w=Math.round(es["+e+"].pm.w*"+t+o),ACTION_add_undo("es["+e+"].pm.w="+es[e].pm.w+";"),es[e].pm.w*t!=Math.round(es[e].pm.w*t/GRID_SNAPPING)*GRID_SNAPPING&&(n=!1)),null!=es[e].pm.h&&(ACTION_add_redo("es["+e+"].pm.h=Math.round(es["+e+"].pm.h*"+t+o),ACTION_add_undo("es["+e+"].pm.h="+es[e].pm.h+";"),es[e].pm.h*t!=Math.round(es[e].pm.h*t/GRID_SNAPPING)*GRID_SNAPPING&&(n=!1)),null!=es[e].pm.x&&(ACTION_add_redo("es["+e+"].pm.x=Math.round(es["+e+"].pm.x*"+t+o),ACTION_add_undo("es["+e+"].pm.x="+es[e].pm.x+";"),es[e].pm.x*t!=Math.round(es[e].pm.x*t/GRID_SNAPPING)*GRID_SNAPPING&&(n=!1)),null!=es[e].pm.y&&(ACTION_add_redo("es["+e+"].pm.y=Math.round(es["+e+"].pm.y*"+t+o),ACTION_add_undo("es["+e+"].pm.y="+es[e].pm.y+";"),es[e].pm.y*t!=Math.round(es[e].pm.y*t/GRID_SNAPPING)*GRID_SNAPPING&&(n=!1)));ACTION_finalize(!0),NewNote("Operation complete:<br><br>Selected objects scaled by "+t+" ("+e+"% of original size)",note_passive),n||NewNote("Note: Position and/or dimensions of some objects were not scaled properly due to Level Editor rounding rules",note_neutral),need_GUIParams_update=!0,need_redraw=!0,UpdateTools()}}}function main_patchPercentageTool(){main_window.DoWorldScale=main_ALEI_DoWorldScale,(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"Patched percentage tool")}function main_addUndoRedoErrorReporting(){const e=DO_UNDO,t=DO_REDO;main_window.DO_UNDO=function(){try{e()}catch(e){NewNote("Failed to undo action.",note_bad),console.error(e)}},main_window.DO_REDO=function(){try{t()}catch(e){NewNote("Failed to redo action.",note_bad),console.error(e)}}}function main_patchDrawGrid(){let e=Grid;main_window.Grid=function(t,n){main_storage_settings_js_WEBPACK_IMPORTED_MODULE_19_.F.gridBasedOnSnapping?e(t*(GRID_SNAPPING/10),Math.min(n*Math.max(GRID_SNAPPING/10,1),1)):e(t,n)},(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"Patched LG")}function main_extendTriggerList(){const e=(()=>{const e=unsafeWindow.setletedit,t=new Set([123,361,364,365]),n=/^actions_(\d+)_(targetA|targetB|type)$/;return function(o,r,a){const i=lettarget.id.replace("pm_","").match(n);i&&Number(i[1])%main_html5mode_js_WEBPACK_IMPORTED_MODULE_22_.Wx-1==0&&"type"===i[2]&&t.has(Number(o))?NewNote("Due to how extended triggers are implemented, skip trigger actions are disabled every 99th trigger action. Leave a 'Do Nothing' trigger action here instead.",note_bad):e.call(this,o,r,a)}})();let t=main_window.SaveThisMap;main_window.setletedit=e,main_window.SaveThisMap=function(e="",n=null){(0,main_extended_triggers_compile_ext_js_WEBPACK_IMPORTED_MODULE_28_.j)(),t(e,n),(0,main_extended_triggers_parse_ext_js_WEBPACK_IMPORTED_MODULE_27_.j)(),UpdateGUIObjectsList()},main_window.CompileTrigger=function(){const e=[123,361,364,365],t=main_html5mode_js_WEBPACK_IMPORTED_MODULE_22_.Wx-1;if(1!=main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_.sf.length)return;const n=main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_.sf[0];var o=document.getElementById("opcode_field").value.split("\n"),r=[],a=[],i=[];function s(e,t){a.push(e),i.push(t)}for(var l=0;l<o.length;l++){var c=o[l];let e=c.indexOf('( "'),t=c.indexOf('", "'),n=c.indexOf('" );'),a=c.indexOf(":");if(-1!=e&&-1!=t&&-1!=n){var d=c.indexOf("("),_=c.substring(0,d),u=-1;if("op"!=_.substring(0,2)||isNaN(_.slice(2))){if(-1==(u=trigger_opcode_aliases.indexOf(_)))return NewNote('Error: Changes were not applied because "'+_+'" seems to be an unknown operation code.',note_neutral),!1}else u=parseInt(_.slice(2));var m="",g="";-1!=u&&(m=c.substring(e+3,t),g=c.substring(t+4,n)),r.push([u,m,g])}else if(-1!=a){for(var p=c.substring(0,a),b=c.slice(a+1);" "==p.charAt(0);)p=p.slice(1);for(;" "==p.charAt(p.length-1);)p=p.slice(0,-1);for(;" "==b.charAt(0);)b=b.slice(1);for(;" "==b.charAt(b.length-1);)b=b.slice(0,-1);if("uid"!=p&&"enabled"!=p&&"maxcalls"!=p&&"execute"!=p)return NewNote('Error: Changes were not applied because "'+p+'" seems to be not a default property.',note_neutral),!1;s(p,b)}else if(""!=c)return NewNote('Error: Changes were not applied because line "'+c+"\" wasn't recognized or contains unsupported syntax.",note_neutral),!1}let h=!1;for(let n=0;n<r.length;n++)(n+1)%t==0&&e.includes(r[n][0])&&(r.splice(n,0,[-1,0,0]),h=!0),s("actions_"+(n+1)+"_type",r[n][0]),s("actions_"+(n+1)+"_targetA",r[n][1]),s("actions_"+(n+1)+"_targetB",r[n][2]);h&&NewNote("Skip trigger actions encountered in every 9th trigger action. Inserted an 'Do Nothing' trigger action.",note_neutral);const f=n.pm.extended?n.pm.totalNumOfActions:main_html5mode_js_WEBPACK_IMPORTED_MODULE_22_.Wx;if(r.length>f)main_addTriggerActionCount(r.length-f);else for(let e=r.length+1;e<=f;e++)s("actions_"+e+"_type",-1),s("actions_"+e+"_targetA",0),s("actions_"+e+"_targetB",0);return UpdatePhysicalParams(a,i,!1,!1),NewNote("Trigger updated successfully.",note_good),!0},main_window.serialize=JSON.stringify,main_window.unserialize=JSON.parse}function main_patchRender(){if(main_storage_settings_js_WEBPACK_IMPORTED_MODULE_19_.F.customRenderer)return void(0,main_gui_renderer_renderer_js_WEBPACK_IMPORTED_MODULE_13_.L)();if(THEME<4)return;let e,t;e=main_ALE_Render.toString(),t=e.replaceAll(/for\s*\(\s*property/g,"for (let property"),t===e&&(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.WARN,"Render direct code replacement failed (implicit global fix)"),e=t,t=e.replace(/if\s*\(\s*THEME\s*===\s*THEME_BLUE\s*\)/,"if (THEME > 3 && canvasThemes?.[THEME]) ctx.fillStyle = canvasThemes[THEME].backgroundColor; else if (THEME === THEME_BLUE)"),t===e&&(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.WARN,"Render direct code replacement failed (grid fill color)"),e=t,t=e.replace(/if\s*\(\s*THEME\s*!==\s*THEME_DARK\s*\)/,"if (THEME > 3 && canvasThemes?.[THEME]) ctx.fillStyle = canvasThemes[THEME].gridColor; else if (THEME !== THEME_DARK)"),t===e&&(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.WARN,"Render direct code replacement failed (grid line color)"),main_window.Render=eval.call(main_window,`(${t})`)}function main_patchStartNewMap(){main_window.initializeALEIMapData=main_aleimapdata_aleimapdata_js_WEBPACK_IMPORTED_MODULE_0_.un,main_window.clearOCM=main_ocm_ocm_js_WEBPACK_IMPORTED_MODULE_18_.p3,main_window.clearUIDMap=main_entity_uidmap_js_WEBPACK_IMPORTED_MODULE_5_._f,main_window.clearParameterMap=main_entity_parametermap_js_WEBPACK_IMPORTED_MODULE_4_.XB,main_window.clearSelectedObjects=main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_.XV;const oldCode=main_window.StartNewMap.toString();let newCode=oldCode.replace("ClearUndos();","ClearUndos(); initializeALEIMapData(); clearOCM(); clearUIDMap(); clearParameterMap(); clearSelectedObjects();");newCode===oldCode&&(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.WARN,"StartNewMap direct code replacement failed"),main_window.StartNewMap=eval("("+newCode+")")}function main_fix100thActionInCompiObj(){const e=main_window.compi_obj.toString(),t=e.replace(/action_id\s*\<\s*trigger_actions_limit/,"action_id <= trigger_actions_limit");e===t&&(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.WARN,"compi_obj direct code replacement failed"),main_window.compi_obj=eval.call(main_window,`(${t})`)}function main_patchSkinList(){main_window.SkinOver=function(e,t,n){if(null==skin_preview_layout){const n=CACHED_CHARS["c"+e.dataset.charId]?.spriteSheet,o=CACHED_CHARS["c"+e.dataset.charId]?.charJSON??null;skin_preview_layout=document.createElement("DIV"),skin_preview_layout.style.pointerEvents="none",document.body.append(skin_preview_layout),skin_preview_layout.style.top="0px",skin_preview_layout.style.bottom="0px",skin_preview_layout.style.width="40%",t.pageX<main_window.innerWidth/2?skin_preview_layout.style.right="0px":skin_preview_layout.style.left="0px",skin_preview_layout.style.backgroundRepeat="no-repeat",skin_preview_layout.style.boxSizing="border-box",skin_preview_layout.style.padding="20px",skin_preview_layout.style.position="fixed",skin_preview_layout.style.zIndex="400",skin_preview_layout.style.backgroundImage=`url(${n?.src})`,skin_preview_layout.style.backgroundSize="",skin_preview_layout.style.backgroundPositionX="0%",skin_preview_layout.style.backgroundPositionY="0%",skin_info=document.createElement("DIV"),skin_preview_layout.append(skin_info),skin_info.style.textShadow="0 2px 2px black",skin_info.style.fontSize="14px",skin_info.style.fontFamily="monospace",skin_info.style.whiteSpace="pre",null!==o?(skin_info.textContent="JSON decode result: "+JSON.stringify(o,null,"\n\t")+"\n\nWidth: "+n?.width+" px\n\nHeight: "+n?.height+" px",7==o.blood_color.length&&(skin_info.innerHTML=skin_info.innerHTML.split('"'+o.blood_color+'"').join('<span style="color:'+o.blood_color+';display: inline-block;background: black;border-radius: 9px;box-shadow: 0 0 0 5px black;filter: brightness(2);">"'+o.blood_color.split("0").join("O")+'" &#9679; </span>'))):(skin_info.textContent="JSON decode result: Error\n\nMost likely this skin does not contain Skin Properties Code which can be generated at\nhttps://www.plazmaburst2.com/skin-properties-code-generator\n\nIt needs to be in the top left corner of uploaded skin image",skin_info.style.color="#ff9393"),text_opacity=1,SkinUpdateBackgroundColor(),skin_bg_update_interval=setInterval(SkinUpdateBackgroundColor,32)}},main_window.SkinUpdateBackgroundColor=function(){var e=Date.now(),t=100+50*Math.sin(e/4e3),n=100+50*Math.sin(e/4100),o=100+50*Math.sin(e/4200),r=(t+n+o)/3;t=.5*t+.5*r,n=.5*n+.5*r,o=.5*o+.5*r,skin_preview_layout.style.backgroundColor="rgba("+t+","+n+","+o+",0.8)",text_opacity=Math.min(1,text_opacity+.05),skin_info.style.opacity=Math.max(0,text_opacity)},main_window.SkinMouseMove=function(e){skin_preview_layout&&(skin_preview_layout.style.backgroundPositionX=Math.max(0,Math.min(100,1.4*e.offsetX-20))+"%",skin_preview_layout.style.backgroundPositionY=Math.max(0,Math.min(100,1.4*e.offsetY-20))+"%",text_opacity=.7*(1+text_opacity)-1)},main_window.SkinOut=function(e){skin_info.remove(),skin_info=null,skin_preview_layout.remove(),skin_preview_layout=null,clearInterval(skin_bg_update_interval)},(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"Patched SkinList")}function main_sortEntitiesBetter(){function e(e){switch(e._class){case"bg":return 0;case"box":case"door":return 1;case"decor":return 2;case"player":case"enemy":case"gun":return 3;default:return 4}}ActionArray.length>0&&(ActionArray=[]),es.sort(((t,n)=>e(t)-e(n)))}main_window.eval=function(e){return void 0!==main_window.ServerRequest&&main_patchServerRequest(),main_handleServerRequestResponse(null,null,e)};let main_alreadyStarted=!1,main_ALE_start=async function(){if(main_alreadyStarted)return;main_alreadyStarted=!0,main_VAL_TABLE=special_values_table,main_ROOT_ELEMENT=document.documentElement,main_stylesheets=document.styleSheets,main_ALE_Render=Render,main_addPropertyPanelResize(),main_addObjBoxResize(),main_patchServerRequest(),(0,main_gui_css_loadcss_js_WEBPACK_IMPORTED_MODULE_8_.A)(),(0,main_gui_css_themes_js_WEBPACK_IMPORTED_MODULE_9_.o9)(),(0,main_gui_css_themes_js_WEBPACK_IMPORTED_MODULE_9_.pI)(),(0,main_gui_css_themes_js_WEBPACK_IMPORTED_MODULE_9_.CK)(),main_updateStyles(),main_updateEngineMarkNames(),main_updateSkins(),main_updateSounds(),main_updateVoicePresets(),(0,main_entity_parameter_js_WEBPACK_IMPORTED_MODULE_3_.MB)(),main_updateOffsets(),main_updateObjects(),main_storage_settings_js_WEBPACK_IMPORTED_MODULE_19_.F.html5Mode&&((0,main_html5mode_js_WEBPACK_IMPORTED_MODULE_22_.xZ)(),setTimeout((()=>{NewNote("Note: HTML5 mode is enabled. Features and options that aren't available on the HTML5 port have been disabled.","#FFFF00")}),2e3)),(0,main_gui_actionlist_js_WEBPACK_IMPORTED_MODULE_32_.n)(),(0,main_gui_actionlist_js_WEBPACK_IMPORTED_MODULE_32_.c)(),(0,main_gui_topgui_js_WEBPACK_IMPORTED_MODULE_17_.q)(),(0,main_gui_topgui_js_WEBPACK_IMPORTED_MODULE_17_.t)("Download XML",main_exportXML),(0,main_gui_topgui_js_WEBPACK_IMPORTED_MODULE_17_.t)("Insert XML",main_insertXMLUserInput),(0,main_gui_topgui_js_WEBPACK_IMPORTED_MODULE_17_.t)("ALEI Settings",main_gui_settingsmenu_js_WEBPACK_IMPORTED_MODULE_15_.l),main_patchMrCustomImage(),main_patch_m_down(),main_patch_m_move(),main_addSessionSync(),main_addTriggerIDs(),main_patchShowHideButton(),main_optimize(),(0,main_gui_toolbar_js_WEBPACK_IMPORTED_MODULE_16_.F)(),main_patchDecorUpload(),(0,main_entity_entity_js_WEBPACK_IMPORTED_MODULE_2_.Mw)(),main_patchEvalSet(),(0,main_entity_parameter_js_WEBPACK_IMPORTED_MODULE_3_.ss)(),main_window.PasteFromClipBoard=main_PasteFromClipBoard,main_storage_settings_js_WEBPACK_IMPORTED_MODULE_19_.F.enableTooltips&&main_doTooltip(),main_storage_settings_js_WEBPACK_IMPORTED_MODULE_19_.F.extendedTriggers&&(main_extendTriggerList(),main_window.ExtendedTriggersLoaded=!0),(0,main_gui_paramsgui_paramsgui_js_WEBPACK_IMPORTED_MODULE_12_.q)(),main_patchTeamList(),main_patchRandomizeName(),main_patchAllowedCharacters(),main_addProjectileModels(),main_patchSpecialValue(),UpdateTools(),main_patchPercentageTool(),main_createClipboardDiv(),main_addPasteFromPermanentClipboard(),(0,main_triggeractions_interactability_js_WEBPACK_IMPORTED_MODULE_20_.v)(),main_registerClipboardItemAction(),main_addUndoRedoErrorReporting(),main_patchDrawGrid(),main_addFunctionToWindow(),(0,main_gui_settingsmenu_js_WEBPACK_IMPORTED_MODULE_15_.a)(),main_aleimapdata_aleimapdatapatches_js_WEBPACK_IMPORTED_MODULE_1_.a(),main_patchStartNewMap(),(0,main_gui_paramsgui_comments_commentbuttons_js_WEBPACK_IMPORTED_MODULE_11_.L)(),(0,main_gui_paramsgui_comments_commentbuttons_js_WEBPACK_IMPORTED_MODULE_11_.R)(),(0,main_gui_colorpicker_opencoloreditorbutton_js_WEBPACK_IMPORTED_MODULE_7_.Z)(),main_isNative&&!GM_info.script.name.includes("Local")&&(0,main_updates_js_WEBPACK_IMPORTED_MODULE_24_.U)(),main_changeTopRightText(),(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.VERBOSE,"Settings: "+JSON.stringify(main_storage_settings_js_WEBPACK_IMPORTED_MODULE_19_.F)),main_window.ENABLE_TEXT=main_storage_settings_js_WEBPACK_IMPORTED_MODULE_19_.F.renderObjectNames,main_window.need_redraw=!0,main_window.UpdateTools();let e=main_window.PreviewQualitySet;if(main_window.PreviewQualitySet=t=>{e(t),(0,main_storage_storageutils_js_WEBPACK_IMPORTED_MODULE_29_.P)("ALEI_PreviewQualitySet",t)},main_window.PreviewQualitySet((0,main_storage_storageutils_js_WEBPACK_IMPORTED_MODULE_29_.G)("ALEI_PreviewQualitySet",!1,(e=>"true"===e))),main_patchRender(),(0,main_gui_finderrors_finderrors_js_WEBPACK_IMPORTED_MODULE_10_.l)(),(0,main_gui_finderrors_finderrors_js_WEBPACK_IMPORTED_MODULE_10_.U)(),main_patchSkinList(),main_fix100thActionInCompiObj(),es.length>0&&((0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.DEBUG,"Map was loaded unsuccessfully. Doing it again"),es=[],changes_made=!1,need_redraw=!0,need_GUIParams_update=!0,ClearUndos(),(0,main_aleimapdata_aleimapdata_js_WEBPACK_IMPORTED_MODULE_0_.un)(),(0,main_ocm_ocm_js_WEBPACK_IMPORTED_MODULE_18_.p3)(),(0,main_entity_uidmap_js_WEBPACK_IMPORTED_MODULE_5_._f)(),(0,main_entity_parametermap_js_WEBPACK_IMPORTED_MODULE_4_.XB)(),LoadThisMap()),NewNote("ALEI: Welcome!","#7777FF"),NewNote("Don't forget to join discord server! discord.gg/vKgDbVTE2V","#7777FF"),(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.INFO,"Welcome!"),main_isNative)(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.INFO,`TamperMonkey Version: ${GM_info.version} ALEI Version: ${GM_info.script.version}`);else{let e="You are running ALEI not under tampermonkey, this is not native ALEI, please load ALEI by tampermonkey when possible.";NewNote(`ALEI: ${e}`,"#FFFF00"),NewNote("ALEI: Check https://github.com/Molisson/ALEI for more details.","#FFFF00"),(0,main_log_js_WEBPACK_IMPORTED_MODULE_23_.Md)(main_log_js_WEBPACK_IMPORTED_MODULE_23_.dm.INFO,e),NewNote("ALEI: Reminder that ALEI under tampermonkey is bound to break less than without.","#FFFFFF")}};main_isNative?document.addEventListener("DOMContentLoaded",(()=>main_ALE_start())):main_ALE_start(),console.log("ALEI!")})()})();